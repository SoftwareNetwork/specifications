<div class="figure">
<img src="https://raw.githubusercontent.com/libuv/libuv/master/img/banner.png" alt="libuv" />
<p class="caption">libuv</p>
</div>
<h2 id="overview">Overview</h2>
<p>libuv is a multi-platform support library with a focus on asynchronous I/O. It was primarily developed for use by <a href="http://nodejs.org/">Node.js</a>, but it's also used by <a href="http://luvit.io/">Luvit</a>, <a href="http://julialang.org/">Julia</a>, <a href="https://github.com/saghul/pyuv">pyuv</a>, and <a href="https://github.com/libuv/libuv/wiki/Projects-that-use-libuv">others</a>.</p>
<h2 id="feature-highlights">Feature highlights</h2>
<ul>
<li><p>Full-featured event loop backed by epoll, kqueue, IOCP, event ports.</p></li>
<li><p>Asynchronous TCP and UDP sockets</p></li>
<li><p>Asynchronous DNS resolution</p></li>
<li><p>Asynchronous file and file system operations</p></li>
<li><p>File system events</p></li>
<li><p>ANSI escape code controlled TTY</p></li>
<li><p>IPC with socket sharing, using Unix domain sockets or named pipes (Windows)</p></li>
<li><p>Child processes</p></li>
<li><p>Thread pool</p></li>
<li><p>Signal handling</p></li>
<li><p>High resolution clock</p></li>
<li><p>Threading and synchronization primitives</p></li>
</ul>
<h2 id="versioning">Versioning</h2>
<p>Starting with version 1.0.0 libuv follows the <a href="http://semver.org/">semantic versioning</a> scheme. The API change and backwards compatibility rules are those indicated by SemVer. libuv will keep a stable ABI across major releases.</p>
<p>The ABI/API changes can be tracked <a href="http://abi-laboratory.pro/tracker/timeline/libuv/">here</a>.</p>
<h2 id="licensing">Licensing</h2>
<p>libuv is licensed under the MIT license. Check the <a href="LICENSE">LICENSE file</a>. The documentation is licensed under the CC BY 4.0 license. Check the <a href="LICENSE-docs">LICENSE-docs file</a>.</p>
<h2 id="community">Community</h2>
<ul>
<li><a href="https://github.com/libuv/help">Support</a></li>
<li><a href="http://groups.google.com/group/libuv">Mailing list</a></li>
<li><a href="http://webchat.freenode.net?channels=libuv&amp;uio=d4">IRC chatroom (#libuv@irc.freenode.org)</a></li>
</ul>
<h2 id="documentation">Documentation</h2>
<h3 id="official-documentation">Official documentation</h3>
<p>Located in the docs/ subdirectory. It uses the <a href="http://sphinx-doc.org/">Sphinx</a> framework, which makes it possible to build the documentation in multiple formats.</p>
<p>Show different supported building options:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">make</span> help</code></pre></div>
<p>Build documentation as HTML:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">make</span> html</code></pre></div>
<p>Build documentation as HTML and live reload it when it changes (this requires sphinx-autobuild to be installed and is only supported on Unix):</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">make</span> livehtml</code></pre></div>
<p>Build documentation as man pages:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">make</span> man</code></pre></div>
<p>Build documentation as ePub:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">make</span> epub</code></pre></div>
<p>NOTE: Windows users need to use make.bat instead of plain 'make'.</p>
<p>Documentation can be browsed online <a href="http://docs.libuv.org">here</a>.</p>
<p>The <a href="https://github.com/libuv/libuv/tree/master/test">tests and benchmarks</a> also serve as API specification and usage examples.</p>
<h3 id="other-resources">Other resources</h3>
<ul>
<li><a href="http://www.youtube.com/watch?v=nGn60vDSxQ4">LXJS 2012 talk</a> — High-level introductory talk about libuv.</li>
<li><a href="https://github.com/thlorenz/libuv-dox">libuv-dox</a> — Documenting types and methods of libuv, mostly by reading uv.h.</li>
<li><a href="https://github.com/thlorenz/learnuv">learnuv</a> — Learn uv for fun and profit, a self guided workshop to libuv.</li>
</ul>
<p>These resources are not handled by libuv maintainers and might be out of date. Please verify it before opening new issues.</p>
<h2 id="downloading">Downloading</h2>
<p>libuv can be downloaded either from the <a href="https://github.com/libuv/libuv">GitHub repository</a> or from the <a href="http://dist.libuv.org/dist/">downloads site</a>.</p>
<p>Before verifying the git tags or signature files, importing the relevant keys is necessary. Key IDs are listed in the <a href="https://github.com/libuv/libuv/blob/master/MAINTAINERS.md">MAINTAINERS</a> file, but are also available as git blob objects for easier use.</p>
<p>Importing a key the usual way:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">gpg</span> --keyserver pool.sks-keyservers.net --recv-keys AE9BC059</code></pre></div>
<p>Importing a key from a git blob object:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">git</span> show pubkey-saghul <span class="kw">|</span> <span class="ex">gpg</span> --import</code></pre></div>
<h3 id="verifying-releases">Verifying releases</h3>
<p>Git tags are signed with the developer's key, they can be verified as follows:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">git</span> verify-tag v1.6.1</code></pre></div>
<p>Starting with libuv 1.7.0, the tarballs stored in the <a href="http://dist.libuv.org/dist/">downloads site</a> are signed and an accompanying signature file sit alongside each. Once both the release tarball and the signature file are downloaded, the file can be verified as follows:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">gpg</span> --verify libuv-1.7.0.tar.gz.sign</code></pre></div>
<h2 id="build-instructions">Build Instructions</h2>
<p>For UNIX-like platforms, including macOS, there are two build methods: autotools or <a href="https://cmake.org/">CMake</a>.</p>
<p>For Windows, <a href="https://cmake.org/">CMake</a> is the only supported build method and has the following prerequisites:</p>
<p><details></p>
<ul>
<li>One of:</li>
<li><a href="https://visualstudio.microsoft.com/visual-cpp-build-tools/">Visual C++ Build Tools</a></li>
<li><a href="https://www.visualstudio.com/vs/older-downloads/">Visual Studio 2015 Update 3</a>, all editions including the Community edition (remember to select &quot;Common Tools for Visual C++ 2015&quot; feature during installation).</li>
<li><a href="https://www.visualstudio.com/downloads/">Visual Studio 2017</a>, any edition (including the Build Tools SKU). <strong>Required Components:</strong> &quot;MSbuild&quot;, &quot;VC++ 2017 v141 toolset&quot; and one of the Windows SDKs (10 or 8.1).</li>
<li>Basic Unix tools required for some tests, <a href="http://git-scm.com/download/win">Git for Windows</a> includes Git Bash and tools which can be included in the global <code>PATH</code>.</li>
</ul>
<p></details></p>
<p>To build with autotools:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">sh</span> autogen.sh
$ <span class="ex">./configure</span>
$ <span class="fu">make</span>
$ <span class="fu">make</span> check
$ <span class="fu">make</span> install</code></pre></div>
<p>To build with <a href="https://cmake.org/">CMake</a>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">mkdir</span> -p build

$ <span class="kw">(</span><span class="bu">cd</span> build <span class="kw">&amp;&amp;</span> <span class="fu">cmake</span> .. -DBUILD_TESTING=ON<span class="kw">)</span> <span class="co"># generate project with tests</span>
$ <span class="fu">cmake</span> --build build                       # add <span class="kw">`</span><span class="ex">-j</span> <span class="op">&lt;</span>n<span class="op">&gt;</span><span class="kw">`</span> with cmake <span class="op">&gt;</span>= 3.12

<span class="co"># Run tests:</span>
$ <span class="kw">(</span><span class="bu">cd</span> build <span class="kw">&amp;&amp;</span> <span class="ex">ctest</span> -C Debug --output-on-failure<span class="kw">)</span>

<span class="co"># Or manually run tests:</span>
$ <span class="ex">build/uv_run_tests</span>                        # shared library build
$ <span class="ex">build/uv_run_tests_a</span>                      # static library build</code></pre></div>
<p>To cross-compile with <a href="https://cmake.org/">CMake</a> (unsupported but generally works):</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">cmake</span> ../..                 \
  -DCMAKE_SYSTEM_NAME=Windows \
  -DCMAKE_SYSTEM_VERSION=6.1  \
  -DCMAKE_C_COMPILER=i686-w64-mingw32-gcc</code></pre></div>
<h3 id="install-with-homebrew">Install with Homebrew</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">brew</span> install --HEAD libuv</code></pre></div>
<p>Note to OS X users:</p>
<p>Make sure that you specify the architecture you wish to build for in the &quot;ARCHS&quot; flag. You can specify more than one by delimiting with a space (e.g. &quot;x86_64 i386&quot;).</p>
<h3 id="running-tests">Running tests</h3>
<p>Some tests are timing sensitive. Relaxing test timeouts may be necessary on slow or overloaded machines:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">env</span> UV_TEST_TIMEOUT_MULTIPLIER=2 build/uv_run_tests <span class="co"># 10s instead of 5s</span></code></pre></div>
<h4 id="run-one-test">Run one test</h4>
<p>The list of all tests is in <code>test/test-list.h</code>.</p>
<p>This invocation will cause the test driver to fork and execute <code>TEST_NAME</code> in a child process:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">build/uv_run_tests_a</span> TEST_NAME</code></pre></div>
<p>This invocation will cause the test driver to execute the test in the same process:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">build/uv_run_tests_a</span> TEST_NAME TEST_NAME</code></pre></div>
<h4 id="debugging-tools">Debugging tools</h4>
<p>When running the test from within the test driver process (<code>build/uv_run_tests_a TEST_NAME TEST_NAME</code>), tools like gdb and valgrind work normally.</p>
<p>When running the test from a child of the test driver process (<code>build/uv_run_tests_a TEST_NAME</code>), use these tools in a fork-aware manner.</p>
<h5 id="fork-aware-gdb">Fork-aware gdb</h5>
<p>Use the <a href="https://sourceware.org/gdb/onlinedocs/gdb/Forks.html">follow-fork-mode</a> setting:</p>
<pre><code>$ gdb --args build/uv_run_tests_a TEST_NAME

(gdb) set follow-fork-mode child
...</code></pre>
<h5 id="fork-aware-valgrind">Fork-aware valgrind</h5>
<p>Use the <code>--trace-children=yes</code> parameter:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">valgrind</span> --trace-children=yes -v --tool=memcheck --leak-check=full --track-origins=yes --leak-resolution=high --show-reachable=yes --log-file=memcheck-%p.log build/uv_run_tests_a TEST_NAME</code></pre></div>
<h3 id="running-benchmarks">Running benchmarks</h3>
<p>See the section on running tests. The benchmark driver is <code>./uv_run_benchmarks_a</code> and the benchmarks are listed in <code>test/benchmark-list.h</code>.</p>
<h2 id="supported-platforms">Supported Platforms</h2>
<p>Check the <a href="SUPPORTED_PLATFORMS.md">SUPPORTED_PLATFORMS file</a>.</p>
<h3 id="aix-notes">AIX Notes</h3>
<p>AIX compilation using IBM XL C/C++ requires version 12.1 or greater.</p>
<p>AIX support for filesystem events requires the non-default IBM <code>bos.ahafs</code> package to be installed. This package provides the AIX Event Infrastructure that is detected by <code>autoconf</code>. <a href="http://www.ibm.com/developerworks/aix/library/au-aix_event_infrastructure/">IBM documentation</a> describes the package in more detail.</p>
<h3 id="zos-notes">z/OS Notes</h3>
<p>z/OS creates System V semaphores and message queues. These persist on the system after the process terminates unless the event loop is closed.</p>
<p>Use the <code>ipcrm</code> command to manually clear up System V resources.</p>
<h2 id="patches">Patches</h2>
<p>See the <a href="https://github.com/libuv/libuv/blob/master/CONTRIBUTING.md">guidelines for contributing</a>.</p>
