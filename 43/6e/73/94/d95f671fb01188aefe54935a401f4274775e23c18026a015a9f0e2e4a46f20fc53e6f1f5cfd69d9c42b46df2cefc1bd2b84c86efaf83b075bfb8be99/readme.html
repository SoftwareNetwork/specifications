<h1 id="μpb-small-fast-c-protos">μpb: small, fast C protos</h1>
<p>μpb (often written ‘upb’) is a small <a
href="https://github.com/protocolbuffers/protobuf">protobuf</a>
implementation written in C.</p>
<p>upb is the core runtime for protobuf languages extensions in <a
href="https://github.com/protocolbuffers/protobuf/tree/master/ruby">Ruby</a>,
<a
href="https://github.com/protocolbuffers/protobuf/tree/master/php">PHP</a>,
and <a
href="https://github.com/protocolbuffers/upb/tree/main/python">Python</a>.</p>
<p>While upb offers a C API, the C API &amp; ABI <strong>are not
stable</strong>. For this reason, upb is not generally offered as a C
library for direct consumption, and there are no releases.</p>
<h2 id="features">Features</h2>
<p>upb has comparable speed to protobuf C++, but is an order of
magnitude smaller in code size.</p>
<p>Like the main protobuf implementation in C++, it supports:</p>
<ul>
<li>a generated API (in C)</li>
<li>reflection</li>
<li>binary &amp; JSON wire formats</li>
<li>text format serialization</li>
<li>all standard features of protobufs (oneofs, maps, unknown fields,
extensions, etc.)</li>
<li>full conformance with the protobuf conformance tests</li>
</ul>
<p>upb also supports some features that C++ does not:</p>
<ul>
<li><strong>optional reflection:</strong> generated messages are
agnostic to whether reflection will be linked in or not.</li>
<li><strong>no global state:</strong> no pre-main registration or other
global state.</li>
<li><strong>fast reflection-based parsing:</strong> messages loaded at
runtime parse just as fast as compiled-in messages.</li>
</ul>
<p>However there are a few features it does not support:</p>
<ul>
<li>text format parsing</li>
<li>deep descriptor verification: upb’s descriptor validation is not as
exhaustive as <code>protoc</code>.</li>
</ul>
<h2 id="install">Install</h2>
<p>For Ruby, use <a
href="https://rubygems.org/gems/google-protobuf">RubyGems</a>:</p>
<pre><code>$ gem install google-protobuf</code></pre>
<p>For PHP, use <a
href="https://pecl.php.net/package/protobuf">PECL</a>:</p>
<pre><code>$ sudo pecl install protobuf</code></pre>
<p>For Python, use <a
href="https://pypi.org/project/protobuf/">PyPI</a>:</p>
<pre><code>$ sudo pip install protobuf</code></pre>
<p>Alternatively, you can build and install upb using <a
href="https://github.com/microsoft/vcpkg/">vcpkg</a> dependency
manager:</p>
<pre><code>git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.sh
./vcpkg integrate install
./vcpkg install upb</code></pre>
<p>The upb port in vcpkg is kept up to date by microsoft team members
and community contributors.</p>
<p>If the version is out of date, please <a
href="https://github.com/Microsoft/vcpkg">create an issue or pull
request</a> on the vcpkg repository.</p>
<h2 id="contributing">Contributing</h2>
<p>Please see <a href="CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
