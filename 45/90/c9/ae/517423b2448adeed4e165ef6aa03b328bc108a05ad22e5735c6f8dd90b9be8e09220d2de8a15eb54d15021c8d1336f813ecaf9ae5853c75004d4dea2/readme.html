<div class="figure">
<img src="https://raw.githubusercontent.com/libuv/libuv/master/img/banner.png" alt="libuv" />
<p class="caption">libuv</p>
</div>
<h2 id="overview">Overview</h2>
<p>libuv is a multi-platform support library with a focus on asynchronous I/O. It was primarily developed for use by <a href="http://nodejs.org/">Node.js</a>, but it's also used by <a href="http://luvit.io/">Luvit</a>, <a href="http://julialang.org/">Julia</a>, <a href="https://github.com/saghul/pyuv">pyuv</a>, and <a href="https://github.com/libuv/libuv/wiki/Projects-that-use-libuv">others</a>.</p>
<h2 id="feature-highlights">Feature highlights</h2>
<ul>
<li><p>Full-featured event loop backed by epoll, kqueue, IOCP, event ports.</p></li>
<li><p>Asynchronous TCP and UDP sockets</p></li>
<li><p>Asynchronous DNS resolution</p></li>
<li><p>Asynchronous file and file system operations</p></li>
<li><p>File system events</p></li>
<li><p>ANSI escape code controlled TTY</p></li>
<li><p>IPC with socket sharing, using Unix domain sockets or named pipes (Windows)</p></li>
<li><p>Child processes</p></li>
<li><p>Thread pool</p></li>
<li><p>Signal handling</p></li>
<li><p>High resolution clock</p></li>
<li><p>Threading and synchronization primitives</p></li>
</ul>
<h2 id="versioning">Versioning</h2>
<p>Starting with version 1.0.0 libuv follows the <a href="http://semver.org/">semantic versioning</a> scheme. The API change and backwards compatibility rules are those indicated by SemVer. libuv will keep a stable ABI across major releases.</p>
<p>The ABI/API changes can be tracked <a href="http://abi-laboratory.pro/tracker/timeline/libuv/">here</a>.</p>
<h2 id="licensing">Licensing</h2>
<p>libuv is licensed under the MIT license. Check the <a href="LICENSE">LICENSE file</a>. The documentation is licensed under the CC BY 4.0 license. Check the <a href="LICENSE-docs">LICENSE-docs file</a>.</p>
<h2 id="community">Community</h2>
<ul>
<li><a href="https://github.com/libuv/help">Support</a></li>
<li><a href="http://groups.google.com/group/libuv">Mailing list</a></li>
<li><a href="http://webchat.freenode.net?channels=libuv&amp;uio=d4">IRC chatroom (#libuv@irc.freenode.org)</a></li>
</ul>
<h2 id="documentation">Documentation</h2>
<h3 id="official-documentation">Official documentation</h3>
<p>Located in the docs/ subdirectory. It uses the <a href="http://sphinx-doc.org/">Sphinx</a> framework, which makes it possible to build the documentation in multiple formats.</p>
<p>Show different supported building options:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">make</span> help</code></pre></div>
<p>Build documentation as HTML:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">make</span> html</code></pre></div>
<p>Build documentation as HTML and live reload it when it changes (this requires sphinx-autobuild to be installed and is only supported on Unix):</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">make</span> livehtml</code></pre></div>
<p>Build documentation as man pages:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">make</span> man</code></pre></div>
<p>Build documentation as ePub:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">make</span> epub</code></pre></div>
<p>NOTE: Windows users need to use make.bat instead of plain 'make'.</p>
<p>Documentation can be browsed online <a href="http://docs.libuv.org">here</a>.</p>
<p>The <a href="https://github.com/libuv/libuv/tree/master/test">tests and benchmarks</a> also serve as API specification and usage examples.</p>
<h3 id="other-resources">Other resources</h3>
<ul>
<li><a href="http://www.youtube.com/watch?v=nGn60vDSxQ4">LXJS 2012 talk</a> — High-level introductory talk about libuv.</li>
<li><a href="https://github.com/thlorenz/libuv-dox">libuv-dox</a> — Documenting types and methods of libuv, mostly by reading uv.h.</li>
<li><a href="https://github.com/thlorenz/learnuv">learnuv</a> — Learn uv for fun and profit, a self guided workshop to libuv.</li>
</ul>
<p>These resources are not handled by libuv maintainers and might be out of date. Please verify it before opening new issues.</p>
<h2 id="downloading">Downloading</h2>
<p>libuv can be downloaded either from the <a href="https://github.com/libuv/libuv">GitHub repository</a> or from the <a href="http://dist.libuv.org/dist/">downloads site</a>.</p>
<p>Starting with libuv 1.7.0, binaries for Windows are also provided. This is to be considered EXPERIMENTAL.</p>
<p>Before verifying the git tags or signature files, importing the relevant keys is necessary. Key IDs are listed in the <a href="https://github.com/libuv/libuv/blob/master/MAINTAINERS.md">MAINTAINERS</a> file, but are also available as git blob objects for easier use.</p>
<p>Importing a key the usual way:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">gpg</span> --keyserver pool.sks-keyservers.net --recv-keys AE9BC059</code></pre></div>
<p>Importing a key from a git blob object:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">git</span> show pubkey-saghul <span class="kw">|</span> <span class="ex">gpg</span> --import</code></pre></div>
<h3 id="verifying-releases">Verifying releases</h3>
<p>Git tags are signed with the developer's key, they can be verified as follows:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">git</span> verify-tag v1.6.1</code></pre></div>
<p>Starting with libuv 1.7.0, the tarballs stored in the <a href="http://dist.libuv.org/dist/">downloads site</a> are signed and an accompanying signature file sit alongside each. Once both the release tarball and the signature file are downloaded, the file can be verified as follows:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">gpg</span> --verify libuv-1.7.0.tar.gz.sign</code></pre></div>
<h2 id="build-instructions">Build Instructions</h2>
<p>For GCC there are two build methods: via autotools or via <a href="http://code.google.com/p/gyp/">GYP</a>. GYP is a meta-build system which can generate MSVS, Makefile, and XCode backends. It is best used for integration into other projects.</p>
<p>To build with autotools:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">sh</span> autogen.sh
$ <span class="ex">./configure</span>
$ <span class="fu">make</span>
$ <span class="fu">make</span> check
$ <span class="fu">make</span> install</code></pre></div>
<p>To build with <a href="https://cmake.org/">CMake</a>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">mkdir</span> -p out/cmake <span class="kw">;</span> <span class="bu">cd</span> out/cmake   # create build directory
$ <span class="fu">cmake</span> ../.. -DBUILD_TESTING=ON      # generate project with test
$ <span class="fu">cmake</span> --build .                     # build
$ <span class="ex">ctest</span> -C Debug --output-on-failure  # run tests

<span class="co"># Or manually run tests:</span>
$ <span class="ex">./out/cmake/uv_run_tests</span>    # shared library build
$ <span class="ex">./out/cmake/uv_run_tests_a</span>  # static library build</code></pre></div>
<p>To build with GYP, first run:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">git</span> clone https://chromium.googlesource.com/external/gyp build/gyp</code></pre></div>
<h3 id="windows">Windows</h3>
<p>Prerequisites:</p>
<ul>
<li><a href="https://www.python.org/downloads/">Python 2.6 or 2.7</a> as it is required by <a href="http://code.google.com/p/gyp/">GYP</a>. If python is not in your path, set the environment variable <code>PYTHON</code> to its location. For example: <code>set PYTHON=C:\Python27\python.exe</code></li>
<li>One of:</li>
<li><a href="https://visualstudio.microsoft.com/visual-cpp-build-tools/">Visual C++ Build Tools</a></li>
<li><a href="https://www.visualstudio.com/vs/older-downloads/">Visual Studio 2015 Update 3</a>, all editions including the Community edition (remember to select &quot;Common Tools for Visual C++ 2015&quot; feature during installation).</li>
<li><a href="https://www.visualstudio.com/downloads/">Visual Studio 2017</a>, any edition (including the Build Tools SKU). <strong>Required Components:</strong> &quot;MSbuild&quot;, &quot;VC++ 2017 v141 toolset&quot; and one of the Windows SDKs (10 or 8.1).</li>
<li>Basic Unix tools required for some tests, <a href="http://git-scm.com/download/win">Git for Windows</a> includes Git Bash and tools which can be included in the global <code>PATH</code>.</li>
</ul>
<p>To build, launch a git shell (e.g. Cmd or PowerShell), run <code>vcbuild.bat</code> (to build with VS2017 you need to explicitly add a <code>vs2017</code> argument), which will checkout the GYP code into <code>build/gyp</code>, generate <code>uv.sln</code> as well as the necesery related project files, and start building.</p>
<pre class="console"><code>&gt; vcbuild</code></pre>
<p>Or:</p>
<pre class="console"><code>&gt; vcbuild vs2017</code></pre>
<p>To run the tests:</p>
<pre class="console"><code>&gt; vcbuild test</code></pre>
<p>To see all the options that could passed to <code>vcbuild</code>:</p>
<pre class="console"><code>&gt; vcbuild help
vcbuild.bat [debug/release] [test/bench] [clean] [noprojgen] [nobuild] [vs2017] [x86/x64] [static/shared]
Examples:
  vcbuild.bat              : builds debug build
  vcbuild.bat test         : builds debug build and runs tests
  vcbuild.bat release bench: builds release build and runs benchmarks</code></pre>
<h3 id="unix">Unix</h3>
<p>For Debug builds (recommended) run:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">./gyp_uv.py</span> -f make
$ <span class="fu">make</span> -C out</code></pre></div>
<p>For Release builds run:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">./gyp_uv.py</span> -f make
$ <span class="va">BUILDTYPE=</span>Release <span class="fu">make</span> -C out</code></pre></div>
<p>Run <code>./gyp_uv.py -f make -Dtarget_arch=x32</code> to build <a href="https://en.wikipedia.org/wiki/X32_ABI">x32</a> binaries.</p>
<h3 id="os-x">OS X</h3>
<p>Run:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">./gyp_uv.py</span> -f xcode
$ <span class="ex">xcodebuild</span> -ARCHS=<span class="st">&quot;x86_64&quot;</span> -project out/uv.xcodeproj -configuration Release -alltargets</code></pre></div>
<p>Using Homebrew:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">brew</span> install --HEAD libuv</code></pre></div>
<p>Note to OS X users:</p>
<p>Make sure that you specify the architecture you wish to build for in the &quot;ARCHS&quot; flag. You can specify more than one by delimiting with a space (e.g. &quot;x86_64 i386&quot;).</p>
<h3 id="android">Android</h3>
<p>Run:</p>
<p>For arm</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="bu">source</span> ./android-configure-arm NDK_PATH gyp [API_LEVEL]
$ <span class="fu">make</span> -C out</code></pre></div>
<p>or for arm64</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="bu">source</span> ./android-configure-arm64 NDK_PATH gyp [API_LEVEL]
$ <span class="fu">make</span> -C out</code></pre></div>
<p>or for x86</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="bu">source</span> ./android-configure-x86 NDK_PATH gyp [API_LEVEL]
$ <span class="fu">make</span> -C out</code></pre></div>
<p>or for x86_64</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="bu">source</span> ./android-configure-x86_64 NDK_PATH gyp [API_LEVEL]
$ <span class="fu">make</span> -C out</code></pre></div>
<p>The default API level is 24, but a different one can be selected as follows:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="bu">source</span> ./android-configure-arm ~/android-ndk-r15b gyp 21
$ <span class="fu">make</span> -C out</code></pre></div>
<p>Note for UNIX users: compile your project with <code>-D_LARGEFILE_SOURCE</code> and <code>-D_FILE_OFFSET_BITS=64</code>. GYP builds take care of that automatically.</p>
<h3 id="using-ninja">Using Ninja</h3>
<p>To use ninja for build on ninja supported platforms, run:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">./gyp_uv.py</span> -f ninja
$ <span class="ex">ninja</span> -C out/Debug     #for debug build OR
$ <span class="ex">ninja</span> -C out/Release</code></pre></div>
<h3 id="running-tests">Running tests</h3>
<h4 id="build">Build</h4>
<p>Build (includes tests):</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">./gyp_uv.py</span> -f make
$ <span class="fu">make</span> -C out</code></pre></div>
<h4 id="run-all-tests">Run all tests</h4>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">./out/Debug/run-tests</span></code></pre></div>
<h4 id="run-one-test">Run one test</h4>
<p>The list of all tests is in <code>test/test-list.h</code>.</p>
<p>This invocation will cause the <code>run-tests</code> driver to fork and execute <code>TEST_NAME</code> in a child process:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">./out/Debug/run-tests</span> TEST_NAME</code></pre></div>
<p>This invocation will cause the <code>run-tests</code> driver to execute the test within the <code>run-tests</code> process:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">./out/Debug/run-tests</span> TEST_NAME TEST_NAME</code></pre></div>
<h4 id="debugging-tools">Debugging tools</h4>
<p>When running the test from within the <code>run-tests</code> process (<code>run-tests TEST_NAME TEST_NAME</code>), tools like gdb and valgrind work normally. When running the test from a child of the <code>run-tests</code> process (<code>run-tests TEST_NAME</code>), use these tools in a fork-aware manner.</p>
<h5 id="fork-aware-gdb">Fork-aware gdb</h5>
<p>Use the <a href="https://sourceware.org/gdb/onlinedocs/gdb/Forks.html">follow-fork-mode</a> setting:</p>
<pre><code>$ gdb --args out/Debug/run-tests TEST_NAME

(gdb) set follow-fork-mode child
...</code></pre>
<h5 id="fork-aware-valgrind">Fork-aware valgrind</h5>
<p>Use the <code>--trace-children=yes</code> parameter:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">valgrind</span> --trace-children=yes -v --tool=memcheck --leak-check=full --track-origins=yes --leak-resolution=high --show-reachable=yes --log-file=memcheck-%p.log out/Debug/run-tests TEST_NAME</code></pre></div>
<h3 id="running-benchmarks">Running benchmarks</h3>
<p>See the section on running tests. The benchmark driver is <code>out/Debug/run-benchmarks</code> and the benchmarks are listed in <code>test/benchmark-list.h</code>.</p>
<h2 id="supported-platforms">Supported Platforms</h2>
<p>Check the <a href="SUPPORTED_PLATFORMS.md">SUPPORTED_PLATFORMS file</a>.</p>
<h3 id="aix-notes">AIX Notes</h3>
<p>AIX support for filesystem events requires the non-default IBM <code>bos.ahafs</code> package to be installed. This package provides the AIX Event Infrastructure that is detected by <code>autoconf</code>. <a href="http://www.ibm.com/developerworks/aix/library/au-aix_event_infrastructure/">IBM documentation</a> describes the package in more detail.</p>
<p>AIX support for filesystem events is not compiled when building with <code>gyp</code>.</p>
<h3 id="zos-notes">z/OS Notes</h3>
<p>z/OS creates System V semaphores and message queues. These persist on the system after the process terminates unless the event loop is closed.</p>
<p>Use the <code>ipcrm</code> command to manually clear up System V resources.</p>
<h2 id="patches">Patches</h2>
<p>See the <a href="https://github.com/libuv/libuv/blob/master/CONTRIBUTING.md">guidelines for contributing</a>.</p>
