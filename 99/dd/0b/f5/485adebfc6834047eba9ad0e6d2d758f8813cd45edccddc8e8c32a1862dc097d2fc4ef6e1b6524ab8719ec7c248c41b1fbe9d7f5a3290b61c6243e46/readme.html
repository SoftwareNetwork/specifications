<h1 id="apache-thrift">Apache Thrift</h1>
<h1 id="introduction">Introduction</h1>
<p>Thrift is a lightweight, language-independent software stack for
point-to-point RPC implementation. Thrift provides clean abstractions
and implementations for data transport, data serialization, and
application level processing. The code generation system takes a simple
definition language as input and generates code across programming
languages that uses the abstracted stack to build interoperable RPC
clients and servers.</p>
<figure>
<img src="doc/images/thrift-layers.png"
alt="Apache Thrift Layered Architecture" />
<figcaption aria-hidden="true">Apache Thrift Layered
Architecture</figcaption>
</figure>
<p>Thrift makes it easy for programs written in different programming
languages to share data and call remote procedures. With support for <a
href="LANGUAGES.md">28 programming languages</a>, chances are Thrift
supports the languages that you currently use.</p>
<p>Thrift is specifically designed to support non-atomic version changes
across client and server code. This allows you to upgrade your server
while still being able to service older clients; or have newer clients
issue requests to older servers. An excellent community-provided
write-up about thrift and compatibility when versioning an API can be
found in the <a
href="https://diwakergupta.github.io/thrift-missing-guide/#_versioning_compatibility">Thrift
Missing Guide</a>.</p>
<p>For more details on Thrift’s design and implementation, see the
Thrift whitepaper included in this distribution, or at the README.md
file in your particular subdirectory of interest.</p>
<h1 id="status">Status</h1>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 16%" />
<col style="width: 26%" />
<col style="width: 20%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Branch</th>
<th style="text-align: left;">Travis</th>
<th style="text-align: left;">Appveyor</th>
<th style="text-align: left;">Coverity Scan</th>
<th style="text-align: left;">codecov.io</th>
<th style="text-align: left;">Website</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a
href="https://github.com/apache/thrift/tree/master"><code>master</code></a></td>
<td style="text-align: left;"><a
href="https://app.travis-ci.com/apache/thrift/branches"><img
src="https://api.travis-ci.com/apache/thrift.svg?branch=master"
alt="Build Status" /></a></td>
<td style="text-align: left;"><a
href="https://ci.appveyor.com/project/ApacheSoftwareFoundation/thrift/history"><img
src="https://ci.appveyor.com/api/projects/status/github/apache/thrift?branch=master&amp;svg=true"
alt="Build status" /></a></td>
<td style="text-align: left;"><a
href="https://scan.coverity.com/projects/thrift"><img
src="https://scan.coverity.com/projects/1345/badge.svg"
alt="Coverity Scan Build Status" /></a></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="https://thrift.apache.org/"><img
src="https://img.shields.io/badge/official-website-brightgreen.svg"
alt="Website" /></a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><a
href="https://github.com/apache/thrift/tree/0.17.0"><code>0.17.0</code></a></td>
<td style="text-align: left;"><a
href="https://app.travis-ci.com/apache/thrift/branches"><img
src="https://api.travis-ci.com/apache/thrift.svg?branch=0.17.0"
alt="Build Status" /></a></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<h1 id="releases">Releases</h1>
<p>Thrift does not maintain a specific release calendar at this
time.</p>
<p>We strive to release twice yearly. Download the <a
href="http://thrift.apache.org/download">current release</a>.</p>
<h1 id="license">License</h1>
<p>Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements. See the NOTICE file distributed with
this work for additional information regarding copyright ownership. The
ASF licenses this file to you under the Apache License, Version 2.0 (the
“License”); you may not use this file except in compliance with the
License. You may obtain a copy of the License at</p>
<p>http://www.apache.org/licenses/LICENSE-2.0</p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<h1 id="project-hierarchy">Project Hierarchy</h1>
<p>thrift/</p>
<p>compiler/</p>
<pre><code>Contains the Thrift compiler, implemented in C++.</code></pre>
<p>lib/</p>
<pre><code>Contains the Thrift software library implementation, subdivided by
language of implementation.

cpp/
go/
java/
php/
py/
rb/
...</code></pre>
<p>test/</p>
<pre><code>Contains sample Thrift files and test code across the target programming
languages.</code></pre>
<p>tutorial/</p>
<pre><code>Contains a basic tutorial that will teach you how to develop software
using Thrift.</code></pre>
<h1 id="development">Development</h1>
<p>To build the same way Travis CI builds the project you should use
docker. We have <a href="build/docker/README.md">comprehensive building
instructions for docker</a>.</p>
<h1 id="requirements">Requirements</h1>
<p>See http://thrift.apache.org/docs/install for a list of build
requirements (may be stale). Alternatively, see the docker build
environments for a list of prerequisites.</p>
<h1 id="resources">Resources</h1>
<p>More information about Thrift can be obtained on the Thrift webpage
at:</p>
<pre><code> http://thrift.apache.org</code></pre>
<h1 id="acknowledgments">Acknowledgments</h1>
<p>Thrift was inspired by pillar, a lightweight RPC tool written by Adam
D’Angelo, and also by Google’s protocol buffers.</p>
<h1 id="installation">Installation</h1>
<p>If you are building from the first time out of the source repository,
you will need to generate the configure scripts. (This is not necessary
if you downloaded a tarball.) From the top directory, do:</p>
<pre><code>./bootstrap.sh</code></pre>
<p>Once the configure scripts are generated, thrift can be configured.
From the top directory, do:</p>
<pre><code>./configure</code></pre>
<p>You may need to specify the location of the boost files explicitly.
If you installed boost in <code>/usr/local</code>, you would run
configure as follows:</p>
<pre><code>./configure --with-boost=/usr/local</code></pre>
<p>Note that by default the thrift C++ library is typically built with
debugging symbols included. If you want to customize these options you
should use the CXXFLAGS option in configure, as such:</p>
<pre><code>./configure CXXFLAGS=&#39;-g -O2&#39;
./configure CFLAGS=&#39;-g -O2&#39;
./configure CPPFLAGS=&#39;-DDEBUG_MY_FEATURE&#39;</code></pre>
<p>To enable gcov required options -fprofile-arcs -ftest-coverage enable
them:</p>
<pre><code>./configure  --enable-coverage</code></pre>
<p>Run ./configure –help to see other configuration options</p>
<p>Please be aware that the Python library will ignore the –prefix
option and just install wherever Python’s distutils puts it (usually
along the lines of <code>/usr/lib/pythonX.Y/site-packages/</code>). If
you need to control where the Python modules are installed, set the
PY_PREFIX variable. (DESTDIR is respected for Python and C++.)</p>
<p>Make thrift:</p>
<pre><code>make</code></pre>
<p>From the top directory, become superuser and do:</p>
<pre><code>make install</code></pre>
<p>Uninstall thrift:</p>
<pre><code>make uninstall</code></pre>
<p>Note that some language packages must be installed manually using
build tools better suited to those languages (at the time of this
writing, this applies to Java, Ruby, PHP).</p>
<p>Look for the README.md file in the lib/<language>/ folder for more
details on the installation of each language library package.</p>
<h1 id="package-managers">Package Managers</h1>
<p>Apache Thrift is available via a number of package managers, a list
which is is steadily growing. A more detailed overview can be found <a
href="http://thrift.apache.org/lib/">at the Apache Thrift web site under
“Libraries”</a> and/or in the respective READMEs for each language under
/lib</p>
<h1 id="testing">Testing</h1>
<p>There are a large number of client library tests that can all be run
from the top-level directory.</p>
<pre><code>make -k check</code></pre>
<p>This will make all of the libraries (as necessary), and run through
the unit tests defined in each of the client libraries. If a single
language fails, the make check will continue on and provide a synopsis
at the end.</p>
<p>To run the cross-language test suite, please run:</p>
<pre><code>make cross</code></pre>
<p>This will run a set of tests that use different language clients and
servers.</p>
