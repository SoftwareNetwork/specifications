<h1 id="c-blosc2">C-Blosc2</h1>
<h2 id="a-fast-compressed-and-persistent-data-store-library-for-c">A
fast, compressed and persistent data store library for C</h2>
<dl>
<dt>Author</dt>
<dd>
<p>Blosc Development Team</p>
</dd>
<dt>Contact</dt>
<dd>
<p><a href="mailto:blosc@blosc.org">blosc@blosc.org</a></p>
</dd>
<dt>URL</dt>
<dd>
<p><a href="https://www.blosc.org">https://www.blosc.org</a></p>
</dd>
<dt>Gitter</dt>
<dd>
<p><a
href="https://gitter.im/Blosc/c-blosc?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img
src="https://badges.gitter.im/Blosc/c-blosc.svg"
alt="Join the chat at https://gitter.im/Blosc/c-blosc" /></a></p>
</dd>
<dt>Actions</dt>
<dd>
<p><a
href="https://github.com/Blosc/c-blosc2/actions?query=workflow%3A%22CI+CMake%22"><img
src="https://github.com/Blosc/c-blosc2/workflows/CI%20CMake/badge.svg"
alt="actions" /></a></p>
</dd>
<dt>NumFOCUS</dt>
<dd>
<p><a href="https://numfocus.org"><img
src="https://img.shields.io/badge/powered%20by-NumFOCUS-orange.svg?style=flat&amp;colorA=E1523D&amp;colorB=007D8A"
alt="numfocus" /></a></p>
</dd>
<dt>Code of Conduct</dt>
<dd>
<p><a
href="https://github.com/Blosc/community/blob/master/code_of_conduct.md"><img
src="https://img.shields.io/badge/Contributor%20Covenant-v2.0%20adopted-ff69b4.svg"
alt="Contributor Covenant" /></a></p>
</dd>
</dl>
<h2 id="what-is-it">What is it?</h2>
<p><a href="https://www.blosc.org/pages/blosc-in-depth/">Blosc2</a> is a
high-performance compressor and data format optimized for binary data,
including numerical arrays, tensors, and other structured formats. It
provides a flexible framework of codecs and filters, enabling developers
to balance compression speed and ratio for specific use cases, from
high-throughput data pipelines to persistent storage. As the successor
to the original Blosc library (released in 2010), Blosc2 is built on a
mature foundation and is integrated into many popular scientific
computing libraries, such as PyTables, h5py, and Zarr.</p>
<p>C-Blosc2 is the new major version of <a
href="https://github.com/Blosc/c-blosc">C-Blosc</a>, and is backward
compatible with both the C-Blosc1 API and its in-memory format. However,
the reverse thing is generally not true for the format; buffers
generated with C-Blosc2 are not format-compatible with C-Blosc1 (i.e.
forward compatibility is not supported). In case you want to ensure full
API compatibility with C-Blosc1 API, define the <span
class="title-ref">BLOSC1_COMPAT</span> symbol.</p>
<p>See a 3 minutes <a
href="https://www.youtube.com/watch?v=ER12R7FXosk">introductory video to
Blosc2</a>.</p>
<h2 id="blosc2-ndim-an-n-dimensional-store">Blosc2 NDim: an
N-Dimensional store</h2>
<p>One of more exciting additions in C-Blosc2 is the <a
href="https://www.blosc.org/c-blosc2/reference/b2nd.html">Blosc2 NDim
layer</a> (or B2ND for short), allowing to create <em>and</em> read
n-dimensional datasets in an extremely efficient way thanks to a n-dim
2-level partitioning, that allows to slice and dice arbitrary large and
compressed data in a more fine-grained way:</p>
<p><img
src="https://github.com/Blosc/c-blosc2/blob/main/images/b2nd-2level-parts.png?raw=true"
style="width:75.0%" alt="image" /></p>
<p>To wet you appetite, here it is how the <span
class="title-ref">NDArray</span> object in the <a
href="#python-wrapper">Python wrapper</a> performs on getting slices
orthogonal to the different axis of a 4-dim dataset:</p>
<p><img
src="https://github.com/Blosc/c-blosc2/blob/main/images/Read-Partial-Slices-B2ND.png?raw=true"
style="width:75.0%" alt="image" /></p>
<p>We have blogged about this: <a
href="https://www.blosc.org/posts/blosc2-ndim-intro">https://www.blosc.org/posts/blosc2-ndim-intro</a></p>
<p>We also have a ~2 min explanatory video on <a
href="https://www.youtube.com/watch?v=LvP9zxMGBng">why slicing in a
pineapple-style (aka double partition) is useful</a>:</p>
<p><a href="https://www.youtube.com/watch?v=LvP9zxMGBng"><img
src="https://github.com/Blosc/blogsite/blob/master/files/images/slicing-pineapple-style.png?raw=true"
style="width:50.0%"
alt="Slicing a dataset in pineapple-style" /></a></p>
<p>More info about the <a
href="https://www.blosc.org/docs/Exploring-MilkyWay-SciPy2023-paper.pdf">improved
capabilities of C-Blosc2 can be found in this paper</a>. Please, cite it
if you use C-Blosc2 in your research!</p>
<h2 id="open-format">Open format</h2>
<p>The Blosc2 format is open and <a
href="https://github.com/Blosc/c-blosc2/blob/main/README_FORMAT.rst">fully
documented</a>.</p>
<p>The format specs are defined in less than 4000 words, so they should
be easy to read and understand. In our opinion, this is critical for the
long-term success of the library, as it allows for third-party
implementations of the format, and also for the users to understand what
is going on under the hood.</p>
<h2 id="python-wrapper">Python wrapper</h2>
<p>We are officially supporting (thanks to the Python Software
Foundation) a <a href="https://github.com/Blosc/python-blosc2">Python
wrapper for Blosc2</a>. It supports all the features of the predecessor
<a href="https://github.com/Blosc/python-blosc">python-blosc</a> package
plus most of the bells and whistles of C-Blosc2, like 64-bit and
multidimensional containers. As a bonus, the <span
class="title-ref">python-blosc2</span> package comes with wheels and
binary versions of the C-Blosc2 libraries, so anyone, even non-Python
users can install C-Blosc2 binaries easily with:</p>
<pre class="console"><code>pip install blosc2</code></pre>
<h2 id="compiling-the-c-blosc2-library-with-cmake">Compiling the
C-Blosc2 library with CMake</h2>
<p>Blosc can be built, tested and installed using <a
href="https://cmake.org">CMake</a>. The following procedure describes a
typical CMake build.</p>
<p>Create the build directory inside the sources and move into it:</p>
<pre class="console"><code>git clone https://github.com/Blosc/c-blosc2
cd c-blosc2
mkdir build
cd build</code></pre>
<p>Now run CMake configuration and optionally specify the installation
directory (e.g. '/usr' or '/usr/local'):</p>
<pre class="console"><code>cmake -DCMAKE_INSTALL_PREFIX=your_install_prefix_directory ..</code></pre>
<p>CMake allows to configure Blosc in many different ways, like
preferring internal or external sources for compressors or
enabling/disabling them. Please note that configuration can also be
performed using UI tools provided by CMake (<span
class="title-ref">ccmake</span> or <span
class="title-ref">cmake-gui</span>):</p>
<pre class="console"><code>ccmake ..      # run a curses-based interface
cmake-gui ..   # run a graphical interface</code></pre>
<p>Build, test and install Blosc:</p>
<pre class="console"><code>cmake --build .
ctest
cmake --build . --target install</code></pre>
<p>The static and dynamic version of the Blosc library, together with
header files, will be installed into the specified
CMAKE_INSTALL_PREFIX.</p>
<p>Once you have compiled your Blosc library, you can easily link your
apps with it as shown in the <a
href="https://github.com/Blosc/c-blosc2/blob/main/examples">examples/
directory</a>.</p>
<h3 id="handling-support-for-codecs-lz4-lz4hc-zstd-zlib">Handling
support for codecs (LZ4, LZ4HC, Zstd, Zlib)</h3>
<p>C-Blosc2 comes with full sources for LZ4, LZ4HC, Zstd, and Zlib and
in general, you should not worry about not having (or CMake not finding)
the libraries in your system because by default the included sources
will be automatically compiled and included in the C-Blosc2 library.
This means that you can be confident in having a complete support for
all these codecs in all the official Blosc deployments. Of course, if
you consider this is too bloated, you can exclude support for some of
them.</p>
<p>For example, let's suppose that you want to disable support for
Zstd:</p>
<pre class="console"><code>cmake -DDEACTIVATE_ZSTD=ON ..</code></pre>
<p>Or, you may want to use a codec in an external library already in the
system:</p>
<pre class="console"><code>cmake -DPREFER_EXTERNAL_LZ4=ON ..</code></pre>
<h3 id="supported-platforms">Supported platforms</h3>
<p>C-Blosc2 is meant to support all platforms where a C99 compliant C
compiler can be found. The ones that are mostly tested are Intel (Linux,
Mac OSX and Windows), ARM (Linux, Mac), and PowerPC (Linux). More on ARM
support in <span class="title-ref">README_ARM.rst</span>.</p>
<p>For Windows, you will need at least VS2015 or higher on x86 and x64
targets (i.e. ARM is not supported on Windows).</p>
<p>For Mac OSX, make sure that you have the command line developer tools
available. You can always install them with:</p>
<pre class="console"><code>xcode-select --install</code></pre>
<p>For Mac OSX on arm64 architecture, you may want to compile it like
this:</p>
<pre class="console"><code>CC=&quot;clang -arch arm64&quot; cmake ..</code></pre>
<h3 id="display-error-messages">Display error messages</h3>
<p>By default error messages are disabled. To display them, you just
need to activate the Blosc tracing machinery by setting the
<code>BLOSC_TRACE</code> environment variable.</p>
<h2 id="contributing">Contributing</h2>
<p>If you want to collaborate in this development you are welcome. We
need help in the different areas listed at the <a
href="https://github.com/Blosc/c-blosc2/blob/main/ROADMAP-TO-3.0.rst">ROADMAP</a>;
also, be sure to read our <a
href="https://github.com/Blosc/c-blosc2/blob/main/DEVELOPING-GUIDE.rst">DEVELOPING-GUIDE</a>
and our <a
href="https://github.com/Blosc/community/blob/master/code_of_conduct.md">Code
of Conduct</a>. Blosc is distributed using the <a
href="https://github.com/Blosc/c-blosc2/blob/main/LICENSE.txt">BSD
license</a>.</p>
<h2 id="tweeter-feed">Tweeter feed</h2>
<p>Follow <a href="https://twitter.com/Blosc2">@Blosc2</a> so as to get
informed about the latest developments.</p>
<h2 id="citing-blosc">Citing Blosc</h2>
<p>You can cite our work on the different libraries under the Blosc
umbrella as:</p>
<pre class="console"><code>@ONLINE{blosc,
  author = {{Blosc Development Team}},
  title = &quot;{A fast, compressed and persistent data store library}&quot;,
  year = {2009-2025},
  note = {https://blosc.org}
}</code></pre>
<h2 id="acknowledgments">Acknowledgments</h2>
<p>See <a
href="https://github.com/Blosc/c-blosc2/blob/main/THANKS.rst">THANKS
document</a>.</p>
<hr />
<p><em>Compress Better, Compute Bigger</em></p>
<p>-- Blosc Development Team</p>
