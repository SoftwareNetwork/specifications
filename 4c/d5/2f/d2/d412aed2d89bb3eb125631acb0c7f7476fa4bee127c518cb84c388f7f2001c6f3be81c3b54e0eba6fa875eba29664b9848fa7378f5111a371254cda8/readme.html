<h1 id="gce-math">GCE-Math</h1>
<p><a href="https://travis-ci.org/kthohr/gcem"><img src="https://travis-ci.org/kthohr/gcem.svg?branch=master" alt="Build Status" /></a> <a href="https://ci.appveyor.com/project/kthohr/gcem"><img src="https://ci.appveyor.com/api/projects/status/5kxxkmisln1j4h6b?svg=true" alt="Build status" /></a> <a href="https://codecov.io/github/kthohr/gcem?branch=master"><img src="https://codecov.io/github/kthohr/gcem/coverage.svg?branch=master" alt="Coverage Status" /></a> <a href="https://www.codacy.com/app/kthohr/gcem?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=kthohr/gcem&amp;utm_campaign=Badge_Grade"><img src="https://api.codacy.com/project/badge/Grade/19bf49e64ca04c848f6a0a8030d1f131" alt="Codacy Badge" /></a> <a href="https://lgtm.com/projects/g/kthohr/gcem"><img src="https://img.shields.io/lgtm/grade/cpp/g/kthohr/gcem.svg?logo=lgtm&amp;logoWidth=18" alt="Language grade: C/C++" /></a> <a href="https://gcem.readthedocs.io/en/latest/?badge=latest"><img src="https://readthedocs.org/projects/gcem/badge/?version=latest" alt="Documentation Status" /></a></p>
<p>GCE-Math (<strong>G</strong>eneralized <strong>C</strong>onstant <strong>E</strong>xpression Math) is a templated C++ library enabling compile-time computation of mathematical functions.</p>
<p>Features:</p>
<ul>
<li>The library is written in C++11 <code>constexpr</code> format, and is C++11/14/17 compatible.</li>
<li>Continued fraction and series expansions are implemented using recursive templates.</li>
<li>The <code>gcem::</code> syntax is identical to the C++ standard library (<code>std::</code>).</li>
<li>Tested and accurate to floating-point precision against the C++ standard library.</li>
<li>Released under a permissive, non-GPL license.</li>
</ul>
<p><strong>Author</strong>: Keith O'Hara</p>
<p><a href="./LICENSE"><img src="https://img.shields.io/badge/Licence-Apache%202.0-blue.svg" alt="License" /></a></p>
<h3 id="contents">Contents:</h3>
<ul>
<li><a href="#status-and-documentation">Status and Documentation</a></li>
<li><a href="#installation-and-tests">Installation and Tests</a></li>
<li><a href="#jupyter-notebook">Jupyter Notebook</a></li>
<li><a href="#general-syntax">General Syntax</a></li>
<li><a href="#examples">Examples</a></li>
</ul>
<h2 id="status-and-documentation">Status and Documentation</h2>
<p>The library is actively maintained, and is still being extended. A list of features includes:</p>
<ul>
<li>basic library functions:
<ul>
<li><code>abs</code>, <code>exp</code>, <code>log</code>, <code>max</code>, <code>min</code>, <code>pow</code>, <code>sqrt</code>, <code>gcd</code>, <code>lcm</code>, and more</li>
</ul></li>
<li>trigonometric functions:
<ul>
<li>basic: <code>cos</code>, <code>sin</code>, <code>tan</code></li>
<li>inverse: <code>acos</code>, <code>asin</code>, <code>atan</code>, <code>atan2</code></li>
</ul></li>
<li>hyperbolic (area) functions:
<ul>
<li><code>cosh</code>, <code>sinh</code>, <code>tanh</code>, <code>acosh</code>, <code>asinh</code>, <code>atanh</code></li>
</ul></li>
<li>special functions:
<ul>
<li>factorials and the binomial coefficient: <code>factorial</code>, <code>binomial_coef</code></li>
<li>beta, gamma, and multivariate gamma functions: <code>beta</code>, <code>lbeta</code>, <code>lgamma</code>, <code>tgamma</code>, <code>lmgamma</code></li>
<li>the Gaussian error function and inverse error function: <code>erf</code>, <code>erf_inv</code></li>
<li>(regularized) incomplete beta and incomplete gamma functions: <code>incomplete_beta</code>, <code>incomplete_gamma</code></li>
<li>inverse incomplete beta and incomplete gamma functions: <code>incomplete_beta_inv</code>, <code>incomplete_gamma_inv</code></li>
</ul></li>
</ul>
<p>Full documentation is available online:</p>
<p><a href="https://gcem.readthedocs.io/en/latest/?badge=latest"><img src="https://readthedocs.org/projects/gcem/badge/?version=latest" alt="Documentation Status" /></a></p>
<h2 id="installation-and-tests">Installation and Tests</h2>
<p>GCE-Math is a header-only library and does not require any additional libraries (beyond a C++11 compatible compiler). Simply add the header files to your project using:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="pp">#include </span><span class="im">&quot;gcem.hpp&quot;</span></code></pre></div>
<h3 id="conda">Conda</h3>
<!-- [![Anaconda-Server Badge](https://anaconda.org/kthohr/gcem/badges/platforms.svg)](https://anaconda.org/kthohr/gcem) -->
<p>You can install GCE-Math using the conda package manager.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">conda</span> install gcem -c kthohr</code></pre></div>
<h3 id="cmake">CMake</h3>
<p>You can also install the library from source using CMake.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># clone gcem from GitHub</span>
<span class="fu">git</span> clone https://github.com/kthohr/gcem ./gcem

<span class="co"># make a build directory</span>
<span class="bu">cd</span> ./gcem
<span class="fu">mkdir</span> build
<span class="bu">cd</span> build

<span class="co"># generate Makefiles and install</span>
<span class="fu">cmake</span> .. -DCMAKE_INSTALL_PREFIX=/gcem/install/location
<span class="fu">make</span> install</code></pre></div>
<p>For example, <code>/gcem/install/location</code> could be <code>/usr/local/</code>.</p>
<h3 id="test-suite">Test Suite</h3>
<p>There are two ways to build the test suite. On Unix-alike systems, a Makefile is available under <code>tests/</code>.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> ./gcem/tests
<span class="fu">make</span>
<span class="ex">./run_tests</span></code></pre></div>
<p>With CMake, the option <code>BUILD_TESTS=1</code> generates the necessary Makefiles to build the test suite.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> ./gcem
<span class="fu">mkdir</span> build

<span class="bu">cd</span> build
<span class="fu">cmake</span> ../ -DBUILD_TESTS=1 -DCMAKE_INSTALL_PREFIX=/gcem/install/location
<span class="fu">make</span> gcem_tests

<span class="bu">cd</span> tests
<span class="ex">./exp.test</span></code></pre></div>
<h2 id="jupyter-notebook">Jupyter Notebook</h2>
<p>You can test the library online using an interactive Jupyter notebook:</p>
<p><a href="https://mybinder.org/v2/gh/kthohr/gcem/master?filepath=notebooks%2Fgcem.ipynb"><img src="https://mybinder.org/badge.svg" alt="Binder" /></a></p>
<h2 id="general-syntax">General Syntax</h2>
<p>GCE-Math functions are written as C++ templates with <code>constexpr</code> specifiers, the format of which might be confusing to users unfamiliar with template-based programming. As an example, the <a href="https://en.wikipedia.org/wiki/Error_function">Gaussian error function</a> (<code>erf</code>) is defined as:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">template</span>&lt;<span class="kw">typename</span> T&gt;
<span class="kw">constexpr</span>
<span class="dt">return_t</span>&lt;T&gt;
erf(<span class="at">const</span> T x) <span class="kw">noexcept</span>;</code></pre></div>
<p>where a set of internal templated <code>constexpr</code> functions will implement a continued fraction expansion to return a value of type <code>return_t&lt;T&gt;</code>. This output type ('<code>return_t&lt;T&gt;</code>') is generally determined by the input type, e.g., <code>int</code>, <code>float</code>, <code>double</code>, <code>long double</code>, etc. When <code>T</code> is an intergral type, the output will be upgraded to <code>return_t&lt;T&gt; = double</code>, otherwise <code>return_t&lt;T&gt; = T</code>. For types not covered by <code>std::is_integral</code>, recasts should be used.</p>
<h2 id="examples">Examples</h2>
<p>To calculate 10!:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="pp">#include </span><span class="im">&quot;gcem.hpp&quot;</span>

<span class="dt">int</span> main()
{
    <span class="kw">constexpr</span> <span class="dt">int</span> x = <span class="dv">10</span>;
    <span class="kw">constexpr</span> <span class="dt">int</span> res = gcem::factorial(x);

    <span class="cf">return</span> <span class="dv">0</span>;
}</code></pre></div>
<p>Inspecting the assembly code generated by Clang:</p>
<pre class="assembly"><code>_main:                                  ## @main
    .cfi_startproc
## BB#0:
    push    rbp
Lcfi0:
    .cfi_def_cfa_offset 16
Lcfi1:
    .cfi_offset rbp, -16
    mov rbp, rsp
Lcfi2:
    .cfi_def_cfa_register rbp
    xor eax, eax
    mov dword ptr [rbp - 4], 0
    mov dword ptr [rbp - 8], 10
    mov dword ptr [rbp - 12], 3628800
    pop rbp
    ret
    .cfi_endproc</code></pre>
<p>We see that a function call has been replaced by a numeric value (10! = 3628800).</p>
<p>Similarly, to compute the log Gamma function at a point:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="pp">#include </span><span class="im">&quot;gcem.hpp&quot;</span>

<span class="dt">int</span> main()
{
    <span class="kw">constexpr</span> <span class="dt">long</span> <span class="dt">double</span> x = <span class="fl">1.5</span>;
    <span class="kw">constexpr</span> <span class="dt">long</span> <span class="dt">double</span> res = gcem::lgamma(x);

    <span class="cf">return</span> <span class="dv">0</span>;
}</code></pre></div>
<p>Assembly code:</p>
<pre class="assembly"><code>LCPI0_0:
    .long   1069547520              ## float 1.5
    .section    __TEXT,__literal16,16byte_literals
    .p2align    4
LCPI0_1:
    .quad   -622431863250851168     ## x86_fp80 -0.120782237635245167208
    .short  49147
    .space  6
    .section    __TEXT,__text,regular,pure_instructions
    .globl  _main
    .p2align    4, 0x90
_main:                                  ## @main
    .cfi_startproc
## BB#0:
    push    rbp
Lcfi0:
    .cfi_def_cfa_offset 16
Lcfi1:
    .cfi_offset rbp, -16
    mov rbp, rsp
Lcfi2:
    .cfi_def_cfa_register rbp
    xor eax, eax
    mov dword ptr [rbp - 4], 0
    fld dword ptr [rip + LCPI0_0]
    fstp    xword ptr [rbp - 32]
    fld xword ptr [rip + LCPI0_1]
    fstp    xword ptr [rbp - 48]
    pop rbp
    ret
    .cfi_endproc</code></pre>
<h2 id="related-libraries">Related libraries</h2>
<p>For a library built on the GCEM compile-time functionality, see <a href="https://github.com/kthohr/stats">StatsLib</a>.</p>
