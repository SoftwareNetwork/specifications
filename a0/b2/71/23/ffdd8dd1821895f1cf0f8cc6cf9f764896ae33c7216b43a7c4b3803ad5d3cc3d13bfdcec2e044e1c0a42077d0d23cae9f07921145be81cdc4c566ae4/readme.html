<p><a href="https://github.com/nlohmann/json/releases"><img
src="docs/mkdocs/docs/images/json.gif"
alt="JSON for Modern C++" /></a></p>
<p><a href="https://ci.appveyor.com/project/nlohmann/json"><img
src="https://ci.appveyor.com/api/projects/status/1acb366xfyg3qybk/branch/develop?svg=true"
alt="Build Status" /></a> <a
href="https://github.com/nlohmann/json/actions?query=workflow%3AUbuntu"><img
src="https://github.com/nlohmann/json/workflows/Ubuntu/badge.svg"
alt="Ubuntu" /></a> <a
href="https://github.com/nlohmann/json/actions?query=workflow%3AmacOS"><img
src="https://github.com/nlohmann/json/workflows/macOS/badge.svg"
alt="macOS" /></a> <a
href="https://github.com/nlohmann/json/actions?query=workflow%3AWindows"><img
src="https://github.com/nlohmann/json/workflows/Windows/badge.svg"
alt="Windows" /></a> <a
href="https://coveralls.io/github/nlohmann/json?branch=develop"><img
src="https://coveralls.io/repos/github/nlohmann/json/badge.svg?branch=develop"
alt="Coverage Status" /></a> <a
href="https://scan.coverity.com/projects/nlohmann-json"><img
src="https://scan.coverity.com/projects/5550/badge.svg"
alt="Coverity Scan Build Status" /></a> <a
href="https://app.codacy.com/gh/nlohmann/json/dashboard?utm_source=gh&amp;utm_medium=referral&amp;utm_content=&amp;utm_campaign=Badge_grade"><img
src="https://app.codacy.com/project/badge/Grade/e0d1a9d5d6fd46fcb655c4cb930bb3e8"
alt="Codacy Badge" /></a> <a
href="https://cirrus-ci.com/github/nlohmann/json"><img
src="https://api.cirrus-ci.com/github/nlohmann/json.svg"
alt="Cirrus CI" /></a> <a
href="https://bugs.chromium.org/p/oss-fuzz/issues/list?sort=-opened&amp;can=1&amp;q=proj:json"><img
src="https://oss-fuzz-build-logs.storage.googleapis.com/badges/json.svg"
alt="Fuzzing Status" /></a> <a
href="https://wandbox.org/permlink/1mp10JbaANo6FUc7"><img
src="https://img.shields.io/badge/try-online-blue.svg"
alt="Try online" /></a> <a href="https://json.nlohmann.me"><img
src="https://img.shields.io/badge/docs-mkdocs-blue.svg"
alt="Documentation" /></a> <a
href="https://raw.githubusercontent.com/nlohmann/json/master/LICENSE.MIT"><img
src="https://img.shields.io/badge/license-MIT-blue.svg"
alt="GitHub license" /></a> <a
href="https://github.com/nlohmann/json/releases"><img
src="https://img.shields.io/github/release/nlohmann/json.svg"
alt="GitHub Releases" /></a> <a
href="https://repology.org/project/nlohmann-json/versions"><img
src="https://repology.org/badge/tiny-repos/nlohmann-json.svg"
alt="Packaging status" /></a> <a
href="https://github.com/nlohmann/json/releases"><img
src="https://img.shields.io/github/downloads/nlohmann/json/total"
alt="GitHub Downloads" /></a> <a
href="https://github.com/nlohmann/json/issues"><img
src="https://img.shields.io/github/issues/nlohmann/json.svg"
alt="GitHub Issues" /></a> <a
href="https://isitmaintained.com/project/nlohmann/json"
title="Average time to resolve an issue"><img
src="https://isitmaintained.com/badge/resolution/nlohmann/json.svg"
alt="Average time to resolve an issue" /></a> <a
href="https://bestpractices.coreinfrastructure.org/projects/289"><img
src="https://bestpractices.coreinfrastructure.org/projects/289/badge"
alt="CII Best Practices" /></a> <a
href="https://scorecard.dev/viewer/?uri=github.com/nlohmann/json"><img
src="https://api.scorecard.dev/projects/github.com/nlohmann/json/badge"
alt="OpenSSF Scorecard" /></a> <a
href="https://github.com/sponsors/nlohmann"><img
src="https://img.shields.io/badge/GitHub-Sponsors-ff69b4"
alt="GitHub Sponsors" /></a> <a
href="https://api.reuse.software/info/github.com/nlohmann/json"><img
src="https://api.reuse.software/badge/github.com/nlohmann/json"
alt="REUSE status" /></a> <a href="https://discord.gg/6mrGXKvX7y"><img
src="https://img.shields.io/discord/1003743314341793913"
alt="Discord" /></a></p>
<ul>
<li><a href="#design-goals">Design goals</a></li>
<li><a href="#sponsors">Sponsors</a></li>
<li><a href="#support">Support</a> (<a
href="https://json.nlohmann.me">documentation</a>, <a
href="https://json.nlohmann.me/home/faq/">FAQ</a>, <a
href="https://github.com/nlohmann/json/discussions">discussions</a>, <a
href="https://json.nlohmann.me/api/basic_json/">API</a>, <a
href="https://github.com/nlohmann/json/issues">bug issues</a>)</li>
<li><a href="#quick-reference">Quick reference</a></li>
<li><a href="#examples">Examples</a>
<ul>
<li><a href="#read-json-from-a-file">Read JSON from a file</a></li>
<li><a href="#creating-json-objects-from-json-literals">Creating
<code>json</code> objects from JSON literals</a></li>
<li><a href="#json-as-first-class-data-type">JSON as first-class data
type</a></li>
<li><a href="#serialization--deserialization">Serialization /
Deserialization</a></li>
<li><a href="#stl-like-access">STL-like access</a></li>
<li><a href="#conversion-from-stl-containers">Conversion from STL
containers</a></li>
<li><a href="#json-pointer-and-json-patch">JSON Pointer and JSON
Patch</a></li>
<li><a href="#json-merge-patch">JSON Merge Patch</a></li>
<li><a href="#implicit-conversions">Implicit conversions</a></li>
<li><a href="#arbitrary-types-conversions">Conversions to/from arbitrary
types</a></li>
<li><a href="#specializing-enum-conversion">Specializing enum
conversion</a></li>
<li><a
href="#binary-formats-bson-cbor-messagepack-ubjson-and-bjdata">Binary
formats (BSON, CBOR, MessagePack, UBJSON, and BJData)</a></li>
</ul></li>
<li><a href="#customers">Customers</a></li>
<li><a href="#supported-compilers">Supported compilers</a></li>
<li><a href="#integration">Integration</a>
<ul>
<li><a href="#cmake">CMake</a></li>
<li><a href="#package-managers">Package Managers</a></li>
<li><a href="#pkg-config">Pkg-config</a></li>
</ul></li>
<li><a href="#license">License</a></li>
<li><a href="#contact">Contact</a></li>
<li><a href="#thanks">Thanks</a></li>
<li><a href="#used-third-party-tools">Used third-party tools</a></li>
<li><a href="#notes">Notes</a></li>
<li><a href="#execute-unit-tests">Execute unit tests</a></li>
</ul>
<h2 id="design-goals">Design goals</h2>
<p>There are myriads of <a href="https://json.org">JSON</a> libraries
out there, and each may even have its reason to exist. Our class had
these design goals:</p>
<ul>
<li><p><strong>Intuitive syntax</strong>. In languages such as Python,
JSON feels like a first class data type. We used all the operator magic
of modern C++ to achieve the same feeling in your code. Check out the <a
href="#examples">examples below</a> and you’ll know what I
mean.</p></li>
<li><p><strong>Trivial integration</strong>. Our whole code consists of
a single header file <a
href="https://github.com/nlohmann/json/blob/develop/single_include/nlohmann/json.hpp"><code>json.hpp</code></a>.
That’s it. No library, no subproject, no dependencies, no complex build
system. The class is written in vanilla C++11. All in all, everything
should require no adjustment of your compiler flags or project settings.
The library is also included in all popular <a
href="https://json.nlohmann.me/integration/package_managers/">package
managers</a>.</p></li>
<li><p><strong>Serious testing</strong>. Our code is heavily <a
href="https://github.com/nlohmann/json/tree/develop/tests/src">unit-tested</a>
and covers <a href="https://coveralls.io/r/nlohmann/json">100%</a> of
the code, including all exceptional behavior. Furthermore, we checked
with <a href="https://valgrind.org">Valgrind</a> and the <a
href="https://clang.llvm.org/docs/index.html">Clang Sanitizers</a> that
there are no memory leaks. <a
href="https://github.com/google/oss-fuzz/tree/master/projects/json">Google
OSS-Fuzz</a> additionally runs fuzz tests against all parsers 24/7,
effectively executing billions of tests so far. To maintain high
quality, the project is following the <a
href="https://bestpractices.coreinfrastructure.org/projects/289">Core
Infrastructure Initiative (CII) best practices</a>. See the <a
href="https://json.nlohmann.me/community/quality_assurance">quality
assurance</a> overview documentation.</p></li>
</ul>
<p>Other aspects were not so important to us:</p>
<ul>
<li><p><strong>Memory efficiency</strong>. Each JSON object has an
overhead of one pointer (the maximal size of a union) and one
enumeration element (1 byte). The default generalization uses the
following C++ data types: <code>std::string</code> for strings,
<code>int64_t</code>, <code>uint64_t</code> or <code>double</code> for
numbers, <code>std::map</code> for objects, <code>std::vector</code> for
arrays, and <code>bool</code> for Booleans. However, you can template
the generalized class <code>basic_json</code> to your needs.</p></li>
<li><p><strong>Speed</strong>. There are certainly <a
href="https://github.com/miloyip/nativejson-benchmark#parsing-time">faster
JSON libraries</a> out there. However, if your goal is to speed up your
development by adding JSON support with a single header, then this
library is the way to go. If you know how to use a
<code>std::vector</code> or <code>std::map</code>, you are already
set.</p></li>
</ul>
<p>See the <a
href="https://github.com/nlohmann/json/blob/master/.github/CONTRIBUTING.md#please-dont">contribution
guidelines</a> for more information.</p>
<h2 id="sponsors">Sponsors</h2>
<p>You can sponsor this library at <a
href="https://github.com/sponsors/nlohmann">GitHub Sponsors</a>.</p>
<h3 id="raising_hand-priority-sponsor">:raising_hand: Priority
Sponsor</h3>
<ul>
<li><a href="https://github.com/codeclown">Martti Laine</a></li>
<li><a href="https://github.com/phrrngtn">Paul Harrington</a></li>
</ul>
<h3 id="label-named-sponsors">:label: Named Sponsors</h3>
<ul>
<li><a href="https://github.com/reFX-Mike">Michael Hartmann</a></li>
<li><a href="https://github.com/sthagen">Stefan Hagen</a></li>
<li><a href="https://github.com/homer6">Steve Sperandeo</a></li>
<li><a href="https://github.com/eljefedelrodeodeljefe">Robert Jefe
Lindstädt</a></li>
<li><a href="https://github.com/ciroque">Steve Wagner</a></li>
<li><a href="https://github.com/LionNatsu">Lion Yang</a></li>
</ul>
<h3 id="further-support">Further support</h3>
<p>The development of the library is further supported by JetBrains by
providing free access to their IDE tools.</p>
<p><a href="https://jb.gg/OpenSourceSupport"><img
src="https://resources.jetbrains.com/storage/products/company/brand/logos/jetbrains.svg"
alt="JetBrains logo." /></a></p>
<p>Thanks everyone!</p>
<h2 id="support">Support</h2>
<p>:question: If you have a <strong>question</strong>, please check if
it is already answered in the <a
href="https://json.nlohmann.me/home/faq/"><strong>FAQ</strong></a> or
the <a
href="https://github.com/nlohmann/json/discussions/categories/q-a"><strong>Q&amp;A</strong></a>
section. If not, please <a
href="https://github.com/nlohmann/json/discussions/new"><strong>ask a
new question</strong></a> there.</p>
<p>:books: If you want to <strong>learn more</strong> about how to use
the library, check out the rest of the <a
href="#examples"><strong>README</strong></a>, have a look at <a
href="https://github.com/nlohmann/json/tree/develop/docs/mkdocs/docs/examples"><strong>code
examples</strong></a>, or browse through the <a
href="https://json.nlohmann.me"><strong>help pages</strong></a>.</p>
<p>:construction: If you want to understand the <strong>API</strong>
better, check out the <a
href="https://json.nlohmann.me/api/basic_json/"><strong>API
Reference</strong></a> or have a look at the <a
href="#quick-reference">quick reference</a> below.</p>
<p>:bug: If you found a <strong>bug</strong>, please check the <a
href="https://json.nlohmann.me/home/faq/"><strong>FAQ</strong></a> if it
is a known issue or the result of a design decision. Please also have a
look at the <a
href="https://github.com/nlohmann/json/issues"><strong>issue
list</strong></a> before you <a
href="https://github.com/nlohmann/json/issues/new/choose"><strong>create
a new issue</strong></a>. Please provide as much information as possible
to help us understand and reproduce your issue.</p>
<p>There is also a <a
href="https://github.com/Kapeli/Dash-User-Contributions/tree/master/docsets/JSON_for_Modern_C%2B%2B"><strong>docset</strong></a>
for the documentation browsers <a
href="https://kapeli.com/dash">Dash</a>, <a
href="https://velocity.silverlakesoftware.com">Velocity</a>, and <a
href="https://zealdocs.org">Zeal</a> that contains the full <a
href="https://json.nlohmann.me">documentation</a> as offline
resource.</p>
<h2 id="quick-reference">Quick reference</h2>
<ul>
<li><strong>Constructors</strong> <a
href="https://json.nlohmann.me/api/basic_json/basic_json">basic_json</a>,
<a href="https://json.nlohmann.me/api/basic_json/array">array</a>, <a
href="https://json.nlohmann.me/api/basic_json/binary">binary</a>, <a
href="https://json.nlohmann.me/api/basic_json/object">object</a></li>
<li><strong>Object inspection</strong>: <a
href="https://json.nlohmann.me/api/basic_json/type">type</a>, <a
href="https://json.nlohmann.me/api/basic_json/operator_value_t">operator
value_t</a>, <a
href="https://json.nlohmann.me/api/basic_json/type_name">type_name</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_primitive">is_primitive</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_structured">is_structured</a>,
<a href="https://json.nlohmann.me/api/basic_json/is_null">is_null</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_boolean">is_boolean</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_number">is_number</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_number_integer">is_number_integer</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_number_unsigned">is_number_unsigned</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_number_float">is_number_float</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_object">is_object</a>,
<a href="https://json.nlohmann.me/api/basic_json/is_array">is_array</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_string">is_string</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_binary">is_binary</a>,
<a
href="https://json.nlohmann.me/api/basic_json/is_discarded">is_discarded</a></li>
<li><strong>Value access</strong>; <a
href="https://json.nlohmann.me/api/basic_json/get">get</a>, <a
href="https://json.nlohmann.me/api/basic_json/get_to">get_to</a>, <a
href="https://json.nlohmann.me/api/basic_json/get_ptr">get_ptr</a>, <a
href="https://json.nlohmann.me/api/basic_json/get_ref">get_ref</a>, <a
href="https://json.nlohmann.me/api/basic_json/operator_ValueType">operator
ValueType</a>, <a
href="https://json.nlohmann.me/api/basic_json/get_binary">get_binary</a></li>
<li><strong>Element access</strong>: <a
href="https://json.nlohmann.me/api/basic_json/at">at</a>, <a
href="https://json.nlohmann.me/api/basic_json/operator%5B%5D">operator[]</a>,
<a href="https://json.nlohmann.me/api/basic_json/value">value</a>, <a
href="https://json.nlohmann.me/api/basic_json/front">front</a>, <a
href="https://json.nlohmann.me/api/basic_json/back">back</a></li>
<li><strong>Lookup</strong>: <a
href="https://json.nlohmann.me/api/basic_json/find">find</a>, <a
href="https://json.nlohmann.me/api/basic_json/count">count</a>, <a
href="https://json.nlohmann.me/api/basic_json/contains">contains</a></li>
<li><strong>Iterators</strong>: <a
href="https://json.nlohmann.me/api/basic_json/begin">begin</a>, <a
href="https://json.nlohmann.me/api/basic_json/cbegin">cbegin</a>, <a
href="https://json.nlohmann.me/api/basic_json/end">end</a>, <a
href="https://json.nlohmann.me/api/basic_json/cend">cend</a>, <a
href="https://json.nlohmann.me/api/basic_json/rbegin">rbegin</a>, <a
href="https://json.nlohmann.me/api/basic_json/rend">rend</a>, <a
href="https://json.nlohmann.me/api/basic_json/crbegin">crbegin</a>, <a
href="https://json.nlohmann.me/api/basic_json/crend">crend</a>, <a
href="https://json.nlohmann.me/api/basic_json/items">items</a></li>
<li><strong>Capacity</strong>: <a
href="https://json.nlohmann.me/api/basic_json/empty">empty</a>, <a
href="https://json.nlohmann.me/api/basic_json/size">size</a>, <a
href="https://json.nlohmann.me/api/basic_json/max_size">max_size</a></li>
<li><strong>Modifiers</strong>: <a
href="https://json.nlohmann.me/api/basic_json/clear">clear</a>, <a
href="https://json.nlohmann.me/api/basic_json/push_back">push_back</a>,
<a
href="https://json.nlohmann.me/api/basic_json/operator+=">operator+=</a>,
<a
href="https://json.nlohmann.me/api/basic_json/emplace_back">emplace_back</a>,
<a href="https://json.nlohmann.me/api/basic_json/emplace">emplace</a>,
<a href="https://json.nlohmann.me/api/basic_json/erase">erase</a>, <a
href="https://json.nlohmann.me/api/basic_json/insert">insert</a>, <a
href="https://json.nlohmann.me/api/basic_json/update">update</a>, <a
href="https://json.nlohmann.me/api/basic_json/swap">swap</a></li>
<li><strong>Lexicographical comparison operators</strong>: <a
href="https://json.nlohmann.me/api/basic_json/operator_eq">operator==</a>,
<a
href="https://json.nlohmann.me/api/basic_json/operator_ne">operator!=</a>,
<a
href="https://json.nlohmann.me/api/basic_json/operator_lt">operator&lt;</a>,
<a
href="https://json.nlohmann.me/api/basic_json/operator_gt">operator&gt;</a>,
<a
href="https://json.nlohmann.me/api/basic_json/operator_le">operator&lt;=</a>,
<a
href="https://json.nlohmann.me/api/basic_json/operator_ge">operator&gt;=</a>,
<a
href="https://json.nlohmann.me/api/basic_json/operator_spaceship">operator&lt;=&gt;</a></li>
<li><strong>Serialization / Dumping</strong>: <a
href="https://json.nlohmann.me/api/basic_json/dump">dump</a></li>
<li><strong>Deserialization / Parsing</strong>: <a
href="https://json.nlohmann.me/api/basic_json/parse">parse</a>, <a
href="https://json.nlohmann.me/api/basic_json/accept">accept</a>, <a
href="https://json.nlohmann.me/api/basic_json/sax_parse">sax_parse</a></li>
<li><strong>JSON Pointer functions</strong>: <a
href="https://json.nlohmann.me/api/basic_json/flatten">flatten</a>, <a
href="https://json.nlohmann.me/api/basic_json/unflatten">unflatten</a></li>
<li><strong>JSON Patch functions</strong>: <a
href="https://json.nlohmann.me/api/basic_json/patch">patch</a>, <a
href="https://json.nlohmann.me/api/basic_json/patch_inplace">patch_inplace</a>,
<a href="https://json.nlohmann.me/api/basic_json/diff">diff</a>, <a
href="https://json.nlohmann.me/api/basic_json/merge_patch">merge_patch</a></li>
<li><strong>Static functions</strong>: <a
href="https://json.nlohmann.me/api/basic_json/meta">meta</a>, <a
href="https://json.nlohmann.me/api/basic_json/get_allocator">get_allocator</a></li>
<li><strong>Binary formats</strong>: <a
href="https://json.nlohmann.me/api/basic_json/from_bjdata">from_bjdata</a>,
<a
href="https://json.nlohmann.me/api/basic_json/from_bson">from_bson</a>,
<a
href="https://json.nlohmann.me/api/basic_json/from_cbor">from_cbor</a>,
<a
href="https://json.nlohmann.me/api/basic_json/from_msgpack">from_msgpack</a>,
<a
href="https://json.nlohmann.me/api/basic_json/from_ubjson">from_ubjson</a>,
<a
href="https://json.nlohmann.me/api/basic_json/to_bjdata">to_bjdata</a>,
<a href="https://json.nlohmann.me/api/basic_json/to_bson">to_bson</a>,
<a href="https://json.nlohmann.me/api/basic_json/to_cbor">to_cbor</a>,
<a
href="https://json.nlohmann.me/api/basic_json/to_msgpack">to_msgpack</a>,
<a
href="https://json.nlohmann.me/api/basic_json/to_ubjson">to_ubjson</a></li>
<li><strong>Non-member functions</strong>: <a
href="https://json.nlohmann.me/api/operator_ltlt/">operator&lt;&lt;</a>,
<a
href="https://json.nlohmann.me/api/operator_gtgt/">operator&gt;&gt;</a>,
<a
href="https://json.nlohmann.me/api/basic_json/to_string">to_string</a></li>
<li><strong>Literals</strong>: <a
href="https://json.nlohmann.me/api/operator_literal_json">operator”“_json</a></li>
<li><strong>Helper classes</strong>: <a
href="https://json.nlohmann.me/api/basic_json/std_hash">std::hash&lt;basic_json&gt;</a>,
<a
href="https://json.nlohmann.me/api/basic_json/std_swap">std::swap&lt;basic_json&gt;</a></li>
</ul>
<p><a href="https://json.nlohmann.me/api/basic_json/"><strong>Full API
documentation</strong></a></p>
<h2 id="examples">Examples</h2>
<p>Here are some examples to give you an idea how to use the class.</p>
<p>Beside the examples below, you may want to:</p>
<p>→ Check the <a
href="https://json.nlohmann.me/">documentation</a><br />
→ Browse the <a
href="https://github.com/nlohmann/json/tree/develop/docs/mkdocs/docs/examples">standalone
example files</a><br />
→ Read the full <a href="https://json.nlohmann.me/api/basic_json/">API
Documentation</a> with self-contained examples for every function</p>
<h3 id="read-json-from-a-file">Read JSON from a file</h3>
<p>The <code>json</code> class provides an API for manipulating a JSON
value. To create a <code>json</code> object by reading a JSON file:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;fstream&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;nlohmann/json.hpp&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> json <span class="op">=</span> nlohmann<span class="op">::</span>json<span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>ifstream f<span class="op">(</span><span class="st">&quot;example.json&quot;</span><span class="op">);</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>json data <span class="op">=</span> json<span class="op">::</span>parse<span class="op">(</span>f<span class="op">);</span></span></code></pre></div>
<h3 id="creating-json-objects-from-json-literals">Creating
<code>json</code> objects from JSON literals</h3>
<p>Assume you want to create hard-code this literal JSON value in a
file, as a <code>json</code> object:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pi&quot;</span><span class="fu">:</span> <span class="fl">3.141</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;happy&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>There are various options:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Using (raw) string literals and json::parse</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>json ex1 <span class="op">=</span> json<span class="op">::</span>parse<span class="op">(</span><span class="st">R&quot;(</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="vs">  {</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="vs">    &quot;pi&quot;: 3.141,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="vs">    &quot;happy&quot;: true</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="st">)&quot;</span><span class="op">);</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">// Using user-defined (raw) string literals</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> nlohmann<span class="op">::</span>literals<span class="op">;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>json ex2 <span class="op">=</span> <span class="st">R&quot;(</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="vs">  {</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="vs">    &quot;pi&quot;: 3.141,</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="vs">    &quot;happy&quot;: true</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="st">)&quot;</span>_json<span class="op">;</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">// Using initializer lists</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>json ex3 <span class="op">=</span> <span class="op">{</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span><span class="st">&quot;happy&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">},</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span><span class="st">&quot;pi&quot;</span><span class="op">,</span> <span class="fl">3.141</span><span class="op">},</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h3 id="json-as-first-class-data-type">JSON as first-class data
type</h3>
<p>Here are some examples to give you an idea how to use the class.</p>
<p>Assume you want to create the JSON object</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pi&quot;</span><span class="fu">:</span> <span class="fl">3.141</span><span class="fu">,</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;happy&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Niels&quot;</span><span class="fu">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;nothing&quot;</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;answer&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;everything&quot;</span><span class="fu">:</span> <span class="dv">42</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;list&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">1</span><span class="ot">,</span> <span class="dv">0</span><span class="ot">,</span> <span class="dv">2</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;object&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;currency&quot;</span><span class="fu">:</span> <span class="st">&quot;USD&quot;</span><span class="fu">,</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="fl">42.99</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>With this library, you could write:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">// create an empty structure (null)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>json j<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">// add a number that is stored as double (note the implicit conversion of j to an object)</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="st">&quot;pi&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="fl">3.141</span><span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">// add a Boolean that is stored as bool</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="st">&quot;happy&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">// add a string that is stored as std::string</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="st">&quot;name&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Niels&quot;</span><span class="op">;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">// add another null object by passing nullptr</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="st">&quot;nothing&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">// add an object inside the object</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="st">&quot;answer&quot;</span><span class="op">][</span><span class="st">&quot;everything&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">// add an array that is stored as std::vector (using an initializer list)</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="st">&quot;list&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">2</span> <span class="op">};</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co">// add another object (using an initializer list of pairs)</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="st">&quot;object&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span> <span class="op">{</span><span class="st">&quot;currency&quot;</span><span class="op">,</span> <span class="st">&quot;USD&quot;</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;value&quot;</span><span class="op">,</span> <span class="fl">42.99</span><span class="op">}</span> <span class="op">};</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co">// instead, you could also write (which looks very similar to the JSON above)</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>json j2 <span class="op">=</span> <span class="op">{</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span><span class="st">&quot;pi&quot;</span><span class="op">,</span> <span class="fl">3.141</span><span class="op">},</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span><span class="st">&quot;happy&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">},</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span><span class="st">&quot;name&quot;</span><span class="op">,</span> <span class="st">&quot;Niels&quot;</span><span class="op">},</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span><span class="st">&quot;nothing&quot;</span><span class="op">,</span> <span class="kw">nullptr</span><span class="op">},</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span><span class="st">&quot;answer&quot;</span><span class="op">,</span> <span class="op">{</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;everything&quot;</span><span class="op">,</span> <span class="dv">42</span><span class="op">}</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>  <span class="op">}},</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span><span class="st">&quot;list&quot;</span><span class="op">,</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">2</span><span class="op">}},</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span><span class="st">&quot;object&quot;</span><span class="op">,</span> <span class="op">{</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;currency&quot;</span><span class="op">,</span> <span class="st">&quot;USD&quot;</span><span class="op">},</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;value&quot;</span><span class="op">,</span> <span class="fl">42.99</span><span class="op">}</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>  <span class="op">}}</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<p>Note that in all these cases, you never need to “tell” the compiler
which JSON value type you want to use. If you want to be explicit or
express some edge cases, the functions <a
href="https://json.nlohmann.me/api/basic_json/array/"><code>json::array()</code></a>
and <a
href="https://json.nlohmann.me/api/basic_json/object/"><code>json::object()</code></a>
will help:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">// a way to express the empty array []</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>json empty_array_explicit <span class="op">=</span> json<span class="op">::</span>array<span class="op">();</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">// ways to express the empty object {}</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>json empty_object_implicit <span class="op">=</span> json<span class="op">({});</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>json empty_object_explicit <span class="op">=</span> json<span class="op">::</span>object<span class="op">();</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">// a way to express an _array_ of key/value pairs [[&quot;currency&quot;, &quot;USD&quot;], [&quot;value&quot;, 42.99]]</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>json array_not_object <span class="op">=</span> json<span class="op">::</span>array<span class="op">({</span> <span class="op">{</span><span class="st">&quot;currency&quot;</span><span class="op">,</span> <span class="st">&quot;USD&quot;</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;value&quot;</span><span class="op">,</span> <span class="fl">42.99</span><span class="op">}</span> <span class="op">});</span></span></code></pre></div>
<h3 id="serialization-deserialization">Serialization /
Deserialization</h3>
<h4 id="tofrom-strings">To/from strings</h4>
<p>You can create a JSON value (deserialization) by appending
<code>_json</code> to a string literal:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">// create object from string literal</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>json j <span class="op">=</span> <span class="st">&quot;{ </span><span class="sc">\&quot;</span><span class="st">happy</span><span class="sc">\&quot;</span><span class="st">: true, </span><span class="sc">\&quot;</span><span class="st">pi</span><span class="sc">\&quot;</span><span class="st">: 3.141 }&quot;</span><span class="op">_json;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">// or even nicer with a raw string literal</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> j2 <span class="op">=</span> <span class="st">R&quot;(</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="vs">  {</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="vs">    &quot;happy&quot;: true,</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="vs">    &quot;pi&quot;: 3.141</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="st">)&quot;</span>_json<span class="op">;</span></span></code></pre></div>
<p>Note that without appending the <code>_json</code> suffix, the passed
string literal is not parsed, but just used as JSON string value. That
is, <code>json j = "{ \"happy\": true, \"pi\": 3.141 }"</code> would
just store the string <code>"{ "happy": true, "pi": 3.141 }"</code>
rather than parsing the actual object.</p>
<p>The string literal should be brought into scope with
<code>using namespace nlohmann::literals;</code> (see <a
href="https://json.nlohmann.me/api/operator_literal_json/"><code>json::parse()</code></a>).</p>
<p>The above example can also be expressed explicitly using <a
href="https://json.nlohmann.me/api/basic_json/parse/"><code>json::parse()</code></a>:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">// parse explicitly</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> j3 <span class="op">=</span> json<span class="op">::</span>parse<span class="op">(</span><span class="st">R&quot;(</span><span class="vs">{&quot;happy&quot;: true, &quot;pi&quot;: 3.141}</span><span class="st">)&quot;</span><span class="op">);</span></span></code></pre></div>
<p>You can also get a string representation of a JSON value
(serialize):</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">// explicit conversion to string</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string s <span class="op">=</span> j<span class="op">.</span>dump<span class="op">();</span>    <span class="co">// {&quot;happy&quot;:true,&quot;pi&quot;:3.141}</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">// serialization with pretty printing</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">// pass in the amount of spaces to indent</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> j<span class="op">.</span>dump<span class="op">(</span><span class="dv">4</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">// {</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">//     &quot;happy&quot;: true,</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">//     &quot;pi&quot;: 3.141</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">// }</span></span></code></pre></div>
<p>Note the difference between serialization and assignment:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">// store a string in a JSON value</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>json j_string <span class="op">=</span> <span class="st">&quot;this is a string&quot;</span><span class="op">;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">// retrieve the string value</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> cpp_string <span class="op">=</span> j_string<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;();</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">// retrieve the string value (alternative when a variable already exists)</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string cpp_string2<span class="op">;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>j_string<span class="op">.</span>get_to<span class="op">(</span>cpp_string2<span class="op">);</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">// retrieve the serialized value (explicit JSON serialization)</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string serialized_string <span class="op">=</span> j_string<span class="op">.</span>dump<span class="op">();</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">// output of original string</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> cpp_string <span class="op">&lt;&lt;</span> <span class="st">&quot; == &quot;</span> <span class="op">&lt;&lt;</span> cpp_string2 <span class="op">&lt;&lt;</span> <span class="st">&quot; == &quot;</span> <span class="op">&lt;&lt;</span> j_string<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;()</span> <span class="op">&lt;&lt;</span> <span class="ch">&#39;</span><span class="sc">\n</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">// output of serialized value</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> j_string <span class="op">&lt;&lt;</span> <span class="st">&quot; == &quot;</span> <span class="op">&lt;&lt;</span> serialized_string <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span></code></pre></div>
<p><a
href="https://json.nlohmann.me/api/basic_json/dump/"><code>.dump()</code></a>
returns the originally stored string value.</p>
<p>Note the library only supports UTF-8. When you store strings with
different encodings in the library, calling <a
href="https://json.nlohmann.me/api/basic_json/dump/"><code>dump()</code></a>
may throw an exception unless
<code>json::error_handler_t::replace</code> or
<code>json::error_handler_t::ignore</code> are used as error
handlers.</p>
<h4 id="tofrom-streams-e.g.-files-string-streams">To/from streams
(e.g. files, string streams)</h4>
<p>You can also use streams to serialize and deserialize:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">// deserialize from standard input</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>json j<span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cin <span class="op">&gt;&gt;</span> j<span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">// serialize to standard output</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> j<span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">// the setw manipulator was overloaded to set the indentation for pretty printing</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="bu">std::</span>setw<span class="op">(</span><span class="dv">4</span><span class="op">)</span> <span class="op">&lt;&lt;</span> j <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span></code></pre></div>
<p>These operators work for any subclasses of <code>std::istream</code>
or <code>std::ostream</code>. Here is the same example with files:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">// read a JSON file</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>ifstream i<span class="op">(</span><span class="st">&quot;file.json&quot;</span><span class="op">);</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>json j<span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>i <span class="op">&gt;&gt;</span> j<span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">// write prettified JSON to another file</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>ofstream o<span class="op">(</span><span class="st">&quot;pretty.json&quot;</span><span class="op">);</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>o <span class="op">&lt;&lt;</span> <span class="bu">std::</span>setw<span class="op">(</span><span class="dv">4</span><span class="op">)</span> <span class="op">&lt;&lt;</span> j <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span></code></pre></div>
<p>Please note that setting the exception bit for <code>failbit</code>
is inappropriate for this use case. It will result in program
termination due to the <code>noexcept</code> specifier in use.</p>
<h4 id="read-from-iterator-range">Read from iterator range</h4>
<p>You can also parse JSON from an iterator range; that is, from any
container accessible by iterators whose <code>value_type</code> is an
integral type of 1, 2 or 4 bytes, which will be interpreted as UTF-8,
UTF-16 and UTF-32 respectively. For instance, a
<code>std::vector&lt;std::uint8_t&gt;</code>, or a
<code>std::list&lt;std::uint16_t&gt;</code>:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>uint8_t<span class="op">&gt;</span> v <span class="op">=</span> <span class="op">{</span><span class="ch">&#39;t&#39;</span><span class="op">,</span> <span class="ch">&#39;r&#39;</span><span class="op">,</span> <span class="ch">&#39;u&#39;</span><span class="op">,</span> <span class="ch">&#39;e&#39;</span><span class="op">};</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>json j <span class="op">=</span> json<span class="op">::</span>parse<span class="op">(</span>v<span class="op">.</span>begin<span class="op">(),</span> v<span class="op">.</span>end<span class="op">());</span></span></code></pre></div>
<p>You may leave the iterators for the range [begin, end):</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>uint8_t<span class="op">&gt;</span> v <span class="op">=</span> <span class="op">{</span><span class="ch">&#39;t&#39;</span><span class="op">,</span> <span class="ch">&#39;r&#39;</span><span class="op">,</span> <span class="ch">&#39;u&#39;</span><span class="op">,</span> <span class="ch">&#39;e&#39;</span><span class="op">};</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>json j <span class="op">=</span> json<span class="op">::</span>parse<span class="op">(</span>v<span class="op">);</span></span></code></pre></div>
<h4 id="custom-data-source">Custom data source</h4>
<p>Since the parse function accepts arbitrary iterator ranges, you can
provide your own data sources by implementing the
<code>LegacyInputIterator</code> concept.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MyContainer <span class="op">{</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">void</span> advance<span class="op">();</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">const</span> <span class="dt">char</span><span class="op">&amp;</span> get_current<span class="op">();</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MyIterator <span class="op">{</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> <span class="dt">difference_type</span> <span class="op">=</span> <span class="bu">std::</span>ptrdiff_t<span class="op">;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> <span class="dt">value_type</span> <span class="op">=</span> <span class="dt">char</span><span class="op">;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> pointer <span class="op">=</span> <span class="at">const</span> <span class="dt">char</span><span class="op">*;</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> reference <span class="op">=</span> <span class="at">const</span> <span class="dt">char</span><span class="op">&amp;;</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> iterator_category <span class="op">=</span> <span class="bu">std::</span>input_iterator_tag<span class="op">;</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    MyIterator<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">++()</span> <span class="op">{</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>        target<span class="op">-&gt;</span>advance<span class="op">();</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> <span class="kw">operator</span><span class="op">!=(</span><span class="at">const</span> MyIterator<span class="op">&amp;</span> rhs<span class="op">)</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> rhs<span class="op">.</span>target <span class="op">!=</span> target<span class="op">;</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    reference <span class="kw">operator</span><span class="op">*()</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> target<span class="op">-&gt;</span>get_current<span class="op">();</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    MyContainer<span class="op">*</span> target <span class="op">=</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>MyIterator begin<span class="op">(</span>MyContainer<span class="op">&amp;</span> tgt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> MyIterator<span class="op">{&amp;</span>tgt<span class="op">};</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>MyIterator end<span class="op">(</span><span class="at">const</span> MyContainer<span class="op">&amp;)</span> <span class="op">{</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">{};</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> foo<span class="op">()</span> <span class="op">{</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>    MyContainer c<span class="op">;</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    json j <span class="op">=</span> json<span class="op">::</span>parse<span class="op">(</span>c<span class="op">);</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="sax-interface">SAX interface</h4>
<p>The library uses a SAX-like interface with the following
functions:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">// called when null is parsed</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> null<span class="op">();</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">// called when a boolean is parsed; value is passed</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> boolean<span class="op">(</span><span class="dt">bool</span> val<span class="op">);</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">// called when a signed or unsigned integer number is parsed; value is passed</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> number_integer<span class="op">(</span><span class="dt">number_integer_t</span> val<span class="op">);</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> number_unsigned<span class="op">(</span><span class="dt">number_unsigned_t</span> val<span class="op">);</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">// called when a floating-point number is parsed; value and original string is passed</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> number_float<span class="op">(</span><span class="dt">number_float_t</span> val<span class="op">,</span> <span class="at">const</span> <span class="dt">string_t</span><span class="op">&amp;</span> s<span class="op">);</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">// called when a string is parsed; value is passed and can be safely moved away</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> string<span class="op">(</span><span class="dt">string_t</span><span class="op">&amp;</span> val<span class="op">);</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co">// called when a binary value is parsed; value is passed and can be safely moved away</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> binary<span class="op">(</span><span class="dt">binary_t</span><span class="op">&amp;</span> val<span class="op">);</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co">// called when an object or array begins or ends, resp. The number of elements is passed (or -1 if not known)</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> start_object<span class="op">(</span><span class="bu">std::</span>size_t elements<span class="op">);</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> end_object<span class="op">();</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> start_array<span class="op">(</span><span class="bu">std::</span>size_t elements<span class="op">);</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> end_array<span class="op">();</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="co">// called when an object key is parsed; value is passed and can be safely moved away</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> key<span class="op">(</span><span class="dt">string_t</span><span class="op">&amp;</span> val<span class="op">);</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="co">// called when a parse error occurs; byte position, the last token, and an exception is passed</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> parse_error<span class="op">(</span><span class="bu">std::</span>size_t position<span class="op">,</span> <span class="at">const</span> <span class="bu">std::</span>string<span class="op">&amp;</span> last_token<span class="op">,</span> <span class="at">const</span> detail::exception<span class="op">&amp;</span> ex<span class="op">);</span></span></code></pre></div>
<p>The return value of each function determines whether parsing should
proceed.</p>
<p>To implement your own SAX handler, proceed as follows:</p>
<ol type="1">
<li>Implement the SAX interface in a class. You can use class
<code>nlohmann::json_sax&lt;json&gt;</code> as base class, but you can
also use any class where the functions described above are implemented
and public.</li>
<li>Create an object of your SAX interface class,
e.g. <code>my_sax</code>.</li>
<li>Call <code>bool json::sax_parse(input, &amp;my_sax)</code>; where
the first parameter can be any input like a string or an input stream
and the second parameter is a pointer to your SAX interface.</li>
</ol>
<p>Note the <code>sax_parse</code> function only returns a
<code>bool</code> indicating the result of the last executed SAX event.
It does not return a <code>json</code> value - it is up to you to decide
what to do with the SAX events. Furthermore, no exceptions are thrown in
case of a parse error - it is up to you what to do with the exception
object passed to your <code>parse_error</code> implementation.
Internally, the SAX interface is used for the DOM parser (class
<code>json_sax_dom_parser</code>) as well as the acceptor
(<code>json_sax_acceptor</code>), see file <a
href="https://github.com/nlohmann/json/blob/develop/include/nlohmann/detail/input/json_sax.hpp"><code>json_sax.hpp</code></a>.</p>
<h3 id="stl-like-access">STL-like access</h3>
<p>We designed the JSON class to behave just like an STL container. In
fact, it satisfies the <a
href="https://en.cppreference.com/w/cpp/named_req/ReversibleContainer"><strong>ReversibleContainer</strong></a>
requirement.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">// create an array using push_back</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>json j<span class="op">;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>push_back<span class="op">(</span><span class="st">&quot;foo&quot;</span><span class="op">);</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>push_back<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>push_back<span class="op">(</span><span class="kw">true</span><span class="op">);</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">// also use emplace_back</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>emplace_back<span class="op">(</span><span class="fl">1.78</span><span class="op">);</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">// iterate the array</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>json<span class="op">::</span>iterator it <span class="op">=</span> j<span class="op">.</span>begin<span class="op">();</span> it <span class="op">!=</span> j<span class="op">.</span>end<span class="op">();</span> <span class="op">++</span>it<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="op">*</span>it <span class="op">&lt;&lt;</span> <span class="ch">&#39;</span><span class="sc">\n</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co">// range-based for</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> element <span class="op">:</span> j<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> element <span class="op">&lt;&lt;</span> <span class="ch">&#39;</span><span class="sc">\n</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co">// getter/setter</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="kw">auto</span> tmp <span class="op">=</span> j<span class="op">[</span><span class="dv">0</span><span class="op">].</span><span class="kw">template</span> get<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;();</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> foo <span class="op">=</span> j<span class="op">.</span>at<span class="op">(</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="co">// comparison</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>j <span class="op">==</span> <span class="st">R&quot;(</span><span class="vs">[&quot;foo&quot;, 1, true, 1.78]</span><span class="st">)&quot;</span>_json<span class="op">;</span>  <span class="co">// true</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="co">// other stuff</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>size<span class="op">();</span>     <span class="co">// 4 entries</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>empty<span class="op">();</span>    <span class="co">// false</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>type<span class="op">();</span>     <span class="co">// json::value_t::array</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>clear<span class="op">();</span>    <span class="co">// the array is empty again</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="co">// convenience type checkers</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>is_null<span class="op">();</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>is_boolean<span class="op">();</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>is_number<span class="op">();</span></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>is_object<span class="op">();</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>is_array<span class="op">();</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>is_string<span class="op">();</span></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a><span class="co">// create an object</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>json o<span class="op">;</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>o<span class="op">[</span><span class="st">&quot;foo&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="dv">23</span><span class="op">;</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>o<span class="op">[</span><span class="st">&quot;bar&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>o<span class="op">[</span><span class="st">&quot;baz&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="fl">3.141</span><span class="op">;</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a><span class="co">// also use emplace</span></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>o<span class="op">.</span>emplace<span class="op">(</span><span class="st">&quot;weather&quot;</span><span class="op">,</span> <span class="st">&quot;sunny&quot;</span><span class="op">);</span></span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a><span class="co">// special iterator member functions for objects</span></span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>json<span class="op">::</span>iterator it <span class="op">=</span> o<span class="op">.</span>begin<span class="op">();</span> it <span class="op">!=</span> o<span class="op">.</span>end<span class="op">();</span> <span class="op">++</span>it<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>  <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> it<span class="op">.</span>key<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot; : &quot;</span> <span class="op">&lt;&lt;</span> it<span class="op">.</span>value<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a><span class="co">// the same code as range for</span></span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> el <span class="op">:</span> o<span class="op">.</span>items<span class="op">())</span> <span class="op">{</span></span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>  <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> el<span class="op">.</span>key<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot; : &quot;</span> <span class="op">&lt;&lt;</span> el<span class="op">.</span>value<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a><span class="co">// even easier with structured bindings (C++17)</span></span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> <span class="op">[</span>key<span class="op">,</span> value<span class="op">]</span> <span class="op">:</span> o<span class="op">.</span>items<span class="op">())</span> <span class="op">{</span></span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>  <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> key <span class="op">&lt;&lt;</span> <span class="st">&quot; : &quot;</span> <span class="op">&lt;&lt;</span> value <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a><span class="co">// find an entry</span></span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>o<span class="op">.</span>contains<span class="op">(</span><span class="st">&quot;foo&quot;</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a>  <span class="co">// there is an entry with key &quot;foo&quot;</span></span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a><span class="co">// or via find and an iterator</span></span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>o<span class="op">.</span>find<span class="op">(</span><span class="st">&quot;foo&quot;</span><span class="op">)</span> <span class="op">!=</span> o<span class="op">.</span>end<span class="op">())</span> <span class="op">{</span></span>
<span id="cb17-73"><a href="#cb17-73" aria-hidden="true" tabindex="-1"></a>  <span class="co">// there is an entry with key &quot;foo&quot;</span></span>
<span id="cb17-74"><a href="#cb17-74" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a><span class="co">// or simpler using count()</span></span>
<span id="cb17-77"><a href="#cb17-77" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> foo_present <span class="op">=</span> o<span class="op">.</span>count<span class="op">(</span><span class="st">&quot;foo&quot;</span><span class="op">);</span> <span class="co">// 1</span></span>
<span id="cb17-78"><a href="#cb17-78" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fob_present <span class="op">=</span> o<span class="op">.</span>count<span class="op">(</span><span class="st">&quot;fob&quot;</span><span class="op">);</span> <span class="co">// 0</span></span>
<span id="cb17-79"><a href="#cb17-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-80"><a href="#cb17-80" aria-hidden="true" tabindex="-1"></a><span class="co">// delete an entry</span></span>
<span id="cb17-81"><a href="#cb17-81" aria-hidden="true" tabindex="-1"></a>o<span class="op">.</span>erase<span class="op">(</span><span class="st">&quot;foo&quot;</span><span class="op">);</span></span></code></pre></div>
<h3 id="conversion-from-stl-containers">Conversion from STL
containers</h3>
<p>Any sequence container (<code>std::array</code>,
<code>std::vector</code>, <code>std::deque</code>,
<code>std::forward_list</code>, <code>std::list</code>) whose values can
be used to construct JSON values (e.g., integers, floating point
numbers, Booleans, string types, or again STL containers described in
this section) can be used to create a JSON array. The same holds for
similar associative containers (<code>std::set</code>,
<code>std::multiset</code>, <code>std::unordered_set</code>,
<code>std::unordered_multiset</code>), but in these cases the order of
the elements of the array depends on how the elements are ordered in the
respective STL container.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> c_vector <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">};</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>json j_vec<span class="op">(</span>c_vector<span class="op">);</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">// [1, 2, 3, 4]</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>deque<span class="op">&lt;</span><span class="dt">double</span><span class="op">&gt;</span> c_deque <span class="op">{</span><span class="fl">1.2</span><span class="op">,</span> <span class="fl">2.3</span><span class="op">,</span> <span class="fl">3.4</span><span class="op">,</span> <span class="fl">5.6</span><span class="op">};</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>json j_deque<span class="op">(</span>c_deque<span class="op">);</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">// [1.2, 2.3, 3.4, 5.6]</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>list<span class="op">&lt;</span><span class="dt">bool</span><span class="op">&gt;</span> c_list <span class="op">{</span><span class="kw">true</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">false</span><span class="op">,</span> <span class="kw">true</span><span class="op">};</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>json j_list<span class="op">(</span>c_list<span class="op">);</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">// [true, true, false, true]</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>forward_list<span class="op">&lt;</span><span class="dt">int64_t</span><span class="op">&gt;</span> c_flist <span class="op">{</span><span class="dv">12345678909876</span><span class="op">,</span> <span class="dv">23456789098765</span><span class="op">,</span> <span class="dv">34567890987654</span><span class="op">,</span> <span class="dv">45678909876543</span><span class="op">};</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>json j_flist<span class="op">(</span>c_flist<span class="op">);</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co">// [12345678909876, 23456789098765, 34567890987654, 45678909876543]</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>array<span class="op">&lt;</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">,</span> <span class="dv">4</span><span class="op">&gt;</span> c_array <span class="op">{{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">}};</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>json j_array<span class="op">(</span>c_array<span class="op">);</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co">// [1, 2, 3, 4]</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>set<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;</span> c_set <span class="op">{</span><span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="st">&quot;two&quot;</span><span class="op">,</span> <span class="st">&quot;three&quot;</span><span class="op">,</span> <span class="st">&quot;four&quot;</span><span class="op">,</span> <span class="st">&quot;one&quot;</span><span class="op">};</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>json j_set<span class="op">(</span>c_set<span class="op">);</span> <span class="co">// only one entry for &quot;one&quot; is used</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="co">// [&quot;four&quot;, &quot;one&quot;, &quot;three&quot;, &quot;two&quot;]</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>unordered_set<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;</span> c_uset <span class="op">{</span><span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="st">&quot;two&quot;</span><span class="op">,</span> <span class="st">&quot;three&quot;</span><span class="op">,</span> <span class="st">&quot;four&quot;</span><span class="op">,</span> <span class="st">&quot;one&quot;</span><span class="op">};</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>json j_uset<span class="op">(</span>c_uset<span class="op">);</span> <span class="co">// only one entry for &quot;one&quot; is used</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="co">// maybe [&quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;one&quot;]</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>multiset<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;</span> c_mset <span class="op">{</span><span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="st">&quot;two&quot;</span><span class="op">,</span> <span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="st">&quot;four&quot;</span><span class="op">};</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>json j_mset<span class="op">(</span>c_mset<span class="op">);</span> <span class="co">// both entries for &quot;one&quot; are used</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a><span class="co">// maybe [&quot;one&quot;, &quot;two&quot;, &quot;one&quot;, &quot;four&quot;]</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>unordered_multiset<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;</span> c_umset <span class="op">{</span><span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="st">&quot;two&quot;</span><span class="op">,</span> <span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="st">&quot;four&quot;</span><span class="op">};</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>json j_umset<span class="op">(</span>c_umset<span class="op">);</span> <span class="co">// both entries for &quot;one&quot; are used</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a><span class="co">// maybe [&quot;one&quot;, &quot;two&quot;, &quot;one&quot;, &quot;four&quot;]</span></span></code></pre></div>
<p>Likewise, any associative key-value containers
(<code>std::map</code>, <code>std::multimap</code>,
<code>std::unordered_map</code>, <code>std::unordered_multimap</code>)
whose keys can construct an <code>std::string</code> and whose values
can be used to construct JSON values (see examples above) can be used to
create a JSON object. Note that in case of multimaps only one key is
used in the JSON object and the value depends on the internal order of
the STL container.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>map<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">,</span> <span class="dt">int</span><span class="op">&gt;</span> c_map <span class="op">{</span> <span class="op">{</span><span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;two&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;three&quot;</span><span class="op">,</span> <span class="dv">3</span><span class="op">}</span> <span class="op">};</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>json j_map<span class="op">(</span>c_map<span class="op">);</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">// {&quot;one&quot;: 1, &quot;three&quot;: 3, &quot;two&quot;: 2 }</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>unordered_map<span class="op">&lt;</span><span class="at">const</span> <span class="dt">char</span><span class="op">*,</span> <span class="dt">double</span><span class="op">&gt;</span> c_umap <span class="op">{</span> <span class="op">{</span><span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="fl">1.2</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;two&quot;</span><span class="op">,</span> <span class="fl">2.3</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;three&quot;</span><span class="op">,</span> <span class="fl">3.4</span><span class="op">}</span> <span class="op">};</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>json j_umap<span class="op">(</span>c_umap<span class="op">);</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">// {&quot;one&quot;: 1.2, &quot;two&quot;: 2.3, &quot;three&quot;: 3.4}</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>multimap<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">,</span> <span class="dt">bool</span><span class="op">&gt;</span> c_mmap <span class="op">{</span> <span class="op">{</span><span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;two&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;three&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;three&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">}</span> <span class="op">};</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>json j_mmap<span class="op">(</span>c_mmap<span class="op">);</span> <span class="co">// only one entry for key &quot;three&quot; is used</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">// maybe {&quot;one&quot;: true, &quot;two&quot;: true, &quot;three&quot;: true}</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>unordered_multimap<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">,</span> <span class="dt">bool</span><span class="op">&gt;</span> c_ummap <span class="op">{</span> <span class="op">{</span><span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;two&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;three&quot;</span><span class="op">,</span> <span class="kw">false</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;three&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">}</span> <span class="op">};</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>json j_ummap<span class="op">(</span>c_ummap<span class="op">);</span> <span class="co">// only one entry for key &quot;three&quot; is used</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co">// maybe {&quot;one&quot;: true, &quot;two&quot;: true, &quot;three&quot;: true}</span></span></code></pre></div>
<h3 id="json-pointer-and-json-patch">JSON Pointer and JSON Patch</h3>
<p>The library supports <strong>JSON Pointer</strong> (<a
href="https://tools.ietf.org/html/rfc6901">RFC 6901</a>) as alternative
means to address structured values. On top of this, <strong>JSON
Patch</strong> (<a href="https://tools.ietf.org/html/rfc6902">RFC
6902</a>) allows describing differences between two JSON values -
effectively allowing patch and diff operations known from Unix.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">// a JSON value</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>json j_original <span class="op">=</span> <span class="st">R&quot;(</span><span class="vs">{</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="vs">  &quot;baz&quot;: [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;],</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="vs">  &quot;foo&quot;: &quot;bar&quot;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span><span class="st">)&quot;</span>_json<span class="op">;</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">// access members with a JSON pointer (RFC 6901)</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>j_original<span class="op">[</span><span class="st">&quot;/baz/1&quot;</span><span class="op">_json_pointer];</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co">// &quot;two&quot;</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co">// a JSON patch (RFC 6902)</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>json j_patch <span class="op">=</span> <span class="st">R&quot;(</span><span class="vs">[</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="vs">  { &quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/baz&quot;, &quot;value&quot;: &quot;boo&quot; },</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="vs">  { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/hello&quot;, &quot;value&quot;: [&quot;world&quot;] },</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="vs">  { &quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/foo&quot;}</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="vs">]</span><span class="st">)&quot;</span>_json<span class="op">;</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co">// apply the patch</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>json j_result <span class="op">=</span> j_original<span class="op">.</span>patch<span class="op">(</span>j_patch<span class="op">);</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="co">// {</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co">//    &quot;baz&quot;: &quot;boo&quot;,</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="co">//    &quot;hello&quot;: [&quot;world&quot;]</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="co">// }</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co">// calculate a JSON patch from two JSON values</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>json<span class="op">::</span>diff<span class="op">(</span>j_result<span class="op">,</span> j_original<span class="op">);</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="co">// [</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="co">//   { &quot;op&quot;:&quot; replace&quot;, &quot;path&quot;: &quot;/baz&quot;, &quot;value&quot;: [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;] },</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="co">//   { &quot;op&quot;: &quot;remove&quot;,&quot;path&quot;: &quot;/hello&quot; },</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a><span class="co">//   { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/foo&quot;, &quot;value&quot;: &quot;bar&quot; }</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a><span class="co">// ]</span></span></code></pre></div>
<h3 id="json-merge-patch">JSON Merge Patch</h3>
<p>The library supports <strong>JSON Merge Patch</strong> (<a
href="https://tools.ietf.org/html/rfc7386">RFC 7386</a>) as a patch
format. Instead of using JSON Pointer (see above) to specify values to
be manipulated, it describes the changes using a syntax that closely
mimics the document being modified.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">// a JSON value</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>json j_document <span class="op">=</span> <span class="st">R&quot;(</span><span class="vs">{</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="vs">  &quot;a&quot;: &quot;b&quot;,</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="vs">  &quot;c&quot;: {</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="vs">    &quot;d&quot;: &quot;e&quot;,</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="vs">    &quot;f&quot;: &quot;g&quot;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span><span class="st">)&quot;</span>_json<span class="op">;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">// a patch</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>json j_patch <span class="op">=</span> <span class="st">R&quot;(</span><span class="vs">{</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="vs">  &quot;a&quot;:&quot;z&quot;,</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="vs">  &quot;c&quot;: {</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="vs">    &quot;f&quot;: null</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span><span class="st">)&quot;</span>_json<span class="op">;</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co">// apply the patch</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>j_document<span class="op">.</span>merge_patch<span class="op">(</span>j_patch<span class="op">);</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="co">// {</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="co">//  &quot;a&quot;: &quot;z&quot;,</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="co">//  &quot;c&quot;: {</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="co">//    &quot;d&quot;: &quot;e&quot;</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="co">//  }</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="co">// }</span></span></code></pre></div>
<h3 id="implicit-conversions">Implicit conversions</h3>
<p>Supported types can be implicitly converted to JSON values.</p>
<p>It is recommended to <strong>NOT USE</strong> implicit conversions
<strong>FROM</strong> a JSON value. You can find more details about this
recommendation <a
href="https://www.github.com/nlohmann/json/issues/958">here</a>. You can
switch off implicit conversions by defining
<code>JSON_USE_IMPLICIT_CONVERSIONS</code> to <code>0</code> before
including the <code>json.hpp</code> header. When using CMake, you can
also achieve this by setting the option
<code>JSON_ImplicitConversions</code> to <code>OFF</code>.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">// strings</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string s1 <span class="op">=</span> <span class="st">&quot;Hello, world!&quot;</span><span class="op">;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>json js <span class="op">=</span> s1<span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> s2 <span class="op">=</span> js<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;();</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">// NOT RECOMMENDED</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string s3 <span class="op">=</span> js<span class="op">;</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string s4<span class="op">;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>s4 <span class="op">=</span> js<span class="op">;</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Booleans</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> b1 <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>json jb <span class="op">=</span> b1<span class="op">;</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> b2 <span class="op">=</span> jb<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span><span class="dt">bool</span><span class="op">&gt;();</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co">// NOT RECOMMENDED</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> b3 <span class="op">=</span> jb<span class="op">;</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> b4<span class="op">;</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>b4 <span class="op">=</span> jb<span class="op">;</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="co">// numbers</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>json jn <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> f <span class="op">=</span> jn<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span><span class="dt">double</span><span class="op">&gt;();</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="co">// NOT RECOMMENDED</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> f2 <span class="op">=</span> jb<span class="op">;</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> f3<span class="op">;</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>f3 <span class="op">=</span> jb<span class="op">;</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a><span class="co">// etc.</span></span></code></pre></div>
<p>Note that <code>char</code> types are not automatically converted to
JSON strings, but to integer numbers. A conversion to a string must be
specified explicitly:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> ch <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span>                       <span class="co">// ASCII value 65</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>json j_default <span class="op">=</span> ch<span class="op">;</span>                 <span class="co">// stores integer number 65</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>json j_string <span class="op">=</span> <span class="bu">std::</span>string<span class="op">(</span><span class="dv">1</span><span class="op">,</span> ch<span class="op">);</span>  <span class="co">// stores string &quot;A&quot;</span></span></code></pre></div>
<h3 id="arbitrary-types-conversions">Arbitrary types conversions</h3>
<p>Every type can be serialized in JSON, not just STL containers and
scalar types. Usually, you would do something along those lines:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> ns <span class="op">{</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// a simple struct to model a person</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> person <span class="op">{</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">std::</span>string name<span class="op">;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">std::</span>string address<span class="op">;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>ns<span class="op">::</span>person p <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Ned Flanders&quot;</span><span class="op">,</span> <span class="st">&quot;744 Evergreen Terrace&quot;</span><span class="op">,</span> <span class="dv">60</span><span class="op">};</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co">// convert to JSON: copy each value into the JSON object</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>json j<span class="op">;</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="st">&quot;name&quot;</span><span class="op">]</span> <span class="op">=</span> p<span class="op">.</span>name<span class="op">;</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="st">&quot;address&quot;</span><span class="op">]</span> <span class="op">=</span> p<span class="op">.</span>address<span class="op">;</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>j<span class="op">[</span><span class="st">&quot;age&quot;</span><span class="op">]</span> <span class="op">=</span> p<span class="op">.</span>age<span class="op">;</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="co">// convert from JSON: copy each value from the JSON object</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>ns<span class="op">::</span>person p <span class="op">{</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    j<span class="op">[</span><span class="st">&quot;name&quot;</span><span class="op">].</span><span class="kw">template</span> get<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;(),</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    j<span class="op">[</span><span class="st">&quot;address&quot;</span><span class="op">].</span><span class="kw">template</span> get<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;(),</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    j<span class="op">[</span><span class="st">&quot;age&quot;</span><span class="op">].</span><span class="kw">template</span> get<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;()</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<p>It works, but that’s quite a lot of boilerplate… Fortunately, there’s
a better way:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">// create a person</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>ns<span class="op">::</span>person p <span class="op">{</span><span class="st">&quot;Ned Flanders&quot;</span><span class="op">,</span> <span class="st">&quot;744 Evergreen Terrace&quot;</span><span class="op">,</span> <span class="dv">60</span><span class="op">};</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">// conversion: person -&gt; json</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>json j <span class="op">=</span> p<span class="op">;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> j <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">// {&quot;address&quot;:&quot;744 Evergreen Terrace&quot;,&quot;age&quot;:60,&quot;name&quot;:&quot;Ned Flanders&quot;}</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co">// conversion: json -&gt; person</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> p2 <span class="op">=</span> j<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span>ns<span class="op">::</span>person<span class="op">&gt;();</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co">// that&#39;s it</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="ot">assert</span><span class="op">(</span>p <span class="op">==</span> p2<span class="op">);</span></span></code></pre></div>
<h4 id="basic-usage">Basic usage</h4>
<p>To make this work with one of your types, you only need to provide
two functions:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> json <span class="op">=</span> nlohmann<span class="op">::</span>json<span class="op">;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> ns <span class="op">{</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> to_json<span class="op">(</span>json<span class="op">&amp;</span> j<span class="op">,</span> <span class="at">const</span> person<span class="op">&amp;</span> p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> json<span class="op">{{</span><span class="st">&quot;name&quot;</span><span class="op">,</span> p<span class="op">.</span>name<span class="op">},</span> <span class="op">{</span><span class="st">&quot;address&quot;</span><span class="op">,</span> p<span class="op">.</span>address<span class="op">},</span> <span class="op">{</span><span class="st">&quot;age&quot;</span><span class="op">,</span> p<span class="op">.</span>age<span class="op">}};</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> from_json<span class="op">(</span><span class="at">const</span> json<span class="op">&amp;</span> j<span class="op">,</span> person<span class="op">&amp;</span> p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>        j<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;name&quot;</span><span class="op">).</span>get_to<span class="op">(</span>p<span class="op">.</span>name<span class="op">);</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>        j<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;address&quot;</span><span class="op">).</span>get_to<span class="op">(</span>p<span class="op">.</span>address<span class="op">);</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>        j<span class="op">.</span>at<span class="op">(</span><span class="st">&quot;age&quot;</span><span class="op">).</span>get_to<span class="op">(</span>p<span class="op">.</span>age<span class="op">);</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="co">// namespace ns</span></span></code></pre></div>
<p>That’s all! When calling the <code>json</code> constructor with your
type, your custom <code>to_json</code> method will be automatically
called. Likewise, when calling
<code>template get&lt;your_type&gt;()</code> or
<code>get_to(your_type&amp;)</code>, the <code>from_json</code> method
will be called.</p>
<p>Some important things:</p>
<ul>
<li>Those methods <strong>MUST</strong> be in your type’s namespace
(which can be the global namespace), or the library will not be able to
locate them (in this example, they are in namespace <code>ns</code>,
where <code>person</code> is defined).</li>
<li>Those methods <strong>MUST</strong> be available (e.g., proper
headers must be included) everywhere you use these conversions. Look at
<a href="https://github.com/nlohmann/json/issues/1108">issue 1108</a>
for errors that may occur otherwise.</li>
<li>When using <code>template get&lt;your_type&gt;()</code>,
<code>your_type</code> <strong>MUST</strong> be <a
href="https://en.cppreference.com/w/cpp/named_req/DefaultConstructible">DefaultConstructible</a>.
(There is a way to bypass this requirement described later.)</li>
<li>In function <code>from_json</code>, use function <a
href="https://json.nlohmann.me/api/basic_json/at/"><code>at()</code></a>
to access the object values rather than <code>operator[]</code>. In case
a key does not exist, <code>at</code> throws an exception that you can
handle, whereas <code>operator[]</code> exhibits undefined
behavior.</li>
<li>You do not need to add serializers or deserializers for STL types
like <code>std::vector</code>: the library already implements
these.</li>
</ul>
<h4 id="simplify-your-life-with-macros">Simplify your life with
macros</h4>
<p>If you just want to serialize/deserialize some structs, the
<code>to_json</code>/<code>from_json</code> functions can be a lot of
boilerplate. There are <a
href="https://json.nlohmann.me/features/arbitrary_types/#simplify-your-life-with-macros"><strong>several
macros</strong></a> to make your life easier as long as you (1) want to
use a JSON object as serialization and (2) want to use the member
variable names as object keys in that object.</p>
<p>Which macro to choose depends on whether private member variables
need to be accessed, a deserialization is needed, missing values should
yield an error or should be replaced by default values, and if derived
classes are used. See <a
href="https://json.nlohmann.me/api/macros/#serializationdeserialization-macros">this
overview to choose the right one for your use case</a>.</p>
<h5 id="example-usage-of-macros">Example usage of macros</h5>
<p>The <code>to_json</code>/<code>from_json</code> functions for the
<code>person</code> struct above can be created with <a
href="https://json.nlohmann.me/api/macros/nlohmann_define_type_non_intrusive/"><code>NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE</code></a>.
In all macros, the first parameter is the name of the class/struct, and
all remaining parameters name the members.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> ns <span class="op">{</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE<span class="op">(</span>person<span class="op">,</span> name<span class="op">,</span> address<span class="op">,</span> age<span class="op">)</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Here is another example with private members, where <a
href="https://json.nlohmann.me/api/macros/nlohmann_define_type_intrusive/"><code>NLOHMANN_DEFINE_TYPE_INTRUSIVE</code></a>
is needed:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> ns <span class="op">{</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span> address <span class="op">{</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">private</span><span class="op">:</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">std::</span>string street<span class="op">;</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> housenumber<span class="op">;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> postcode<span class="op">;</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">public</span><span class="op">:</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>        NLOHMANN_DEFINE_TYPE_INTRUSIVE<span class="op">(</span>address<span class="op">,</span> street<span class="op">,</span> housenumber<span class="op">,</span> postcode<span class="op">)</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="how-do-i-convert-third-party-types">How do I convert third-party
types?</h4>
<p>This requires a bit more advanced technique. But first, let’s see how
this conversion mechanism works:</p>
<p>The library uses <strong>JSON Serializers</strong> to convert types
to json. The default serializer for <code>nlohmann::json</code> is
<code>nlohmann::adl_serializer</code> (ADL means <a
href="https://en.cppreference.com/w/cpp/language/adl">Argument-Dependent
Lookup</a>).</p>
<p>It is implemented like this (simplified):</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> adl_serializer <span class="op">{</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">void</span> to_json<span class="op">(</span>json<span class="op">&amp;</span> j<span class="op">,</span> <span class="at">const</span> T<span class="op">&amp;</span> value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// calls the &quot;to_json&quot; method in T&#39;s namespace</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">void</span> from_json<span class="op">(</span><span class="at">const</span> json<span class="op">&amp;</span> j<span class="op">,</span> T<span class="op">&amp;</span> value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">// same thing, but with the &quot;from_json&quot; method</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<p>This serializer works fine when you have control over the type’s
namespace. However, what about <code>boost::optional</code> or
<code>std::filesystem::path</code> (C++17)? Hijacking the
<code>boost</code> namespace is pretty bad, and it’s illegal to add
something other than template specializations to <code>std</code>…</p>
<p>To solve this, you need to add a specialization of
<code>adl_serializer</code> to the <code>nlohmann</code> namespace,
here’s an example:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">// partial specialization (full specialization works too)</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> nlohmann <span class="op">{</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> adl_serializer<span class="op">&lt;</span><span class="ex">boost::</span>optional<span class="op">&lt;</span>T<span class="op">&gt;&gt;</span> <span class="op">{</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">static</span> <span class="dt">void</span> to_json<span class="op">(</span>json<span class="op">&amp;</span> j<span class="op">,</span> <span class="at">const</span> <span class="ex">boost::</span>optional<span class="op">&lt;</span>T<span class="op">&gt;&amp;</span> opt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>opt <span class="op">==</span> <span class="ex">boost::</span>none<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                j <span class="op">=</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>              j <span class="op">=</span> <span class="op">*</span>opt<span class="op">;</span> <span class="co">// this will call adl_serializer&lt;T&gt;::to_json which will</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>                        <span class="co">// find the free function to_json in T&#39;s namespace!</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">static</span> <span class="dt">void</span> from_json<span class="op">(</span><span class="at">const</span> json<span class="op">&amp;</span> j<span class="op">,</span> <span class="ex">boost::</span>optional<span class="op">&lt;</span>T<span class="op">&gt;&amp;</span> opt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>j<span class="op">.</span>is_null<span class="op">())</span> <span class="op">{</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>                opt <span class="op">=</span> <span class="ex">boost::</span>none<span class="op">;</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>                opt <span class="op">=</span> j<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span>T<span class="op">&gt;();</span> <span class="co">// same as above, but with</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>                                           <span class="co">// adl_serializer&lt;T&gt;::from_json</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4
id="how-can-i-use-get-for-non-default-constructiblenon-copyable-types">How
can I use <code>get()</code> for non-default constructible/non-copyable
types?</h4>
<p>There is a way, if your type is <a
href="https://en.cppreference.com/w/cpp/named_req/MoveConstructible">MoveConstructible</a>.
You will need to specialize the <code>adl_serializer</code> as well, but
with a special <code>from_json</code> overload:</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> <span class="dt">move_only_type</span> <span class="op">{</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">move_only_type</span><span class="op">()</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">move_only_type</span><span class="op">(</span><span class="dt">int</span> ii<span class="op">):</span> i<span class="op">(</span>ii<span class="op">)</span> <span class="op">{}</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">move_only_type</span><span class="op">(</span><span class="at">const</span> <span class="dt">move_only_type</span><span class="op">&amp;)</span> <span class="op">=</span> <span class="kw">delete</span><span class="op">;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">move_only_type</span><span class="op">(</span><span class="dt">move_only_type</span><span class="op">&amp;&amp;)</span> <span class="op">=</span> <span class="cf">default</span><span class="op">;</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> nlohmann <span class="op">{</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">template</span> <span class="op">&lt;&gt;</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> adl_serializer<span class="op">&lt;</span><span class="dt">move_only_type</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        <span class="co">// note: the return type is no longer &#39;void&#39;, and the method only takes</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">// one argument</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">static</span> <span class="dt">move_only_type</span> from_json<span class="op">(</span><span class="at">const</span> json<span class="op">&amp;</span> j<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">{</span>j<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;()};</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Here&#39;s the catch! You must provide a to_json method! Otherwise, you</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>        <span class="co">// will not be able to convert move_only_type to json, since you fully</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">// specialized adl_serializer on that type</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">static</span> <span class="dt">void</span> to_json<span class="op">(</span>json<span class="op">&amp;</span> j<span class="op">,</span> <span class="dt">move_only_type</span> t<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>            j <span class="op">=</span> t<span class="op">.</span>i<span class="op">;</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="can-i-write-my-own-serializer-advanced-use">Can I write my own
serializer? (Advanced use)</h4>
<p>Yes. You might want to take a look at <a
href="https://github.com/nlohmann/json/blob/develop/tests/src/unit-udt.cpp"><code>unit-udt.cpp</code></a>
in the test suite, to see a few examples.</p>
<p>If you write your own serializer, you’ll need to do a few things:</p>
<ul>
<li>use a different <code>basic_json</code> alias than
<code>nlohmann::json</code> (the last template parameter of
<code>basic_json</code> is the <code>JSONSerializer</code>)</li>
<li>use your <code>basic_json</code> alias (or a template parameter) in
all your <code>to_json</code>/<code>from_json</code> methods</li>
<li>use <code>nlohmann::to_json</code> and
<code>nlohmann::from_json</code> when you need ADL</li>
</ul>
<p>Here is an example, without simplifications, that only accepts types
with a size &lt;= 32, and uses ADL.</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">// You should use void as a second template argument</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">// if you don&#39;t need compile-time checks on T</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">,</span> <span class="kw">typename</span> SFINAE <span class="op">=</span> <span class="kw">typename</span> <span class="bu">std::</span>enable_if<span class="op">&lt;</span><span class="kw">sizeof</span><span class="op">(</span>T<span class="op">)</span> <span class="op">&lt;=</span> <span class="dv">32</span><span class="op">&gt;::</span>type<span class="op">&gt;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> less_than_32_serializer <span class="op">{</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> BasicJsonType<span class="op">&gt;</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">void</span> to_json<span class="op">(</span>BasicJsonType<span class="op">&amp;</span> j<span class="op">,</span> T value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>        <span class="co">// we want to use ADL, and call the correct to_json overload</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">using</span> nlohmann<span class="op">::</span>to_json<span class="op">;</span> <span class="co">// this method is called by adl_serializer,</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>                                 <span class="co">// this is where the magic happens</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>        to_json<span class="op">(</span>j<span class="op">,</span> value<span class="op">);</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> BasicJsonType<span class="op">&gt;</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">void</span> from_json<span class="op">(</span><span class="at">const</span> BasicJsonType<span class="op">&amp;</span> j<span class="op">,</span> T<span class="op">&amp;</span> value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>        <span class="co">// same thing here</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">using</span> nlohmann<span class="op">::</span>from_json<span class="op">;</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>        from_json<span class="op">(</span>j<span class="op">,</span> value<span class="op">);</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<p>Be <strong>very</strong> careful when reimplementing your serializer,
you can stack overflow if you don’t pay attention:</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">,</span> <span class="dt">void</span><span class="op">&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> bad_serializer</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> BasicJsonType<span class="op">&gt;</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">void</span> to_json<span class="op">(</span>BasicJsonType<span class="op">&amp;</span> j<span class="op">,</span> <span class="at">const</span> T<span class="op">&amp;</span> value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>      <span class="co">// this calls BasicJsonType::json_serializer&lt;T&gt;::to_json(j, value)</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>      <span class="co">// if BasicJsonType::json_serializer == bad_serializer ... oops!</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>      j <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> BasicJsonType<span class="op">&gt;</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">void</span> to_json<span class="op">(</span><span class="at">const</span> BasicJsonType<span class="op">&amp;</span> j<span class="op">,</span> T<span class="op">&amp;</span> value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>      <span class="co">// this calls BasicJsonType::json_serializer&lt;T&gt;::from_json(j, value)</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>      <span class="co">// if BasicJsonType::json_serializer == bad_serializer ... oops!</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>      value <span class="op">=</span> j<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span>T<span class="op">&gt;();</span> <span class="co">// oops!</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h3 id="specializing-enum-conversion">Specializing enum conversion</h3>
<p>By default, enum values are serialized to JSON as integers. In some
cases this could result in undesired behavior. If an enum is modified or
re-ordered after data has been serialized to JSON, the later
de-serialized JSON data may be undefined or a different enum value than
was originally intended.</p>
<p>It is possible to more precisely specify how a given enum is mapped
to and from JSON as shown below:</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">// example enum type declaration</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="kw">enum</span> TaskState <span class="op">{</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    TS_STOPPED<span class="op">,</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    TS_RUNNING<span class="op">,</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    TS_COMPLETED<span class="op">,</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    TS_INVALID<span class="op">=-</span><span class="dv">1</span><span class="op">,</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co">// map TaskState values to JSON as strings</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>NLOHMANN_JSON_SERIALIZE_ENUM<span class="op">(</span> TaskState<span class="op">,</span> <span class="op">{</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span>TS_INVALID<span class="op">,</span> <span class="kw">nullptr</span><span class="op">},</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span>TS_STOPPED<span class="op">,</span> <span class="st">&quot;stopped&quot;</span><span class="op">},</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span>TS_RUNNING<span class="op">,</span> <span class="st">&quot;running&quot;</span><span class="op">},</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span>TS_COMPLETED<span class="op">,</span> <span class="st">&quot;completed&quot;</span><span class="op">},</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span></code></pre></div>
<p>The <code>NLOHMANN_JSON_SERIALIZE_ENUM()</code> macro declares a set
of <code>to_json()</code> / <code>from_json()</code> functions for type
<code>TaskState</code> while avoiding repetition and boilerplate
serialization code.</p>
<p><strong>Usage:</strong></p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">// enum to JSON as string</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>json j <span class="op">=</span> TS_STOPPED<span class="op">;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="ot">assert</span><span class="op">(</span>j <span class="op">==</span> <span class="st">&quot;stopped&quot;</span><span class="op">);</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">// json string to enum</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>json j3 <span class="op">=</span> <span class="st">&quot;running&quot;</span><span class="op">;</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="ot">assert</span><span class="op">(</span>j3<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span>TaskState<span class="op">&gt;()</span> <span class="op">==</span> TS_RUNNING<span class="op">);</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">// undefined json value to enum (where the first map entry above is the default)</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>json jPi <span class="op">=</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="ot">assert</span><span class="op">(</span>jPi<span class="op">.</span><span class="kw">template</span> get<span class="op">&lt;</span>TaskState<span class="op">&gt;()</span> <span class="op">==</span> TS_INVALID<span class="op">);</span></span></code></pre></div>
<p>Just as in <a href="#arbitrary-types-conversions">Arbitrary Type
Conversions</a> above,</p>
<ul>
<li><code>NLOHMANN_JSON_SERIALIZE_ENUM()</code> MUST be declared in your
enum type’s namespace (which can be the global namespace), or the
library will not be able to locate it, and it will default to integer
serialization.</li>
<li>It MUST be available (e.g., proper headers must be included)
everywhere you use the conversions.</li>
</ul>
<p>Other Important points:</p>
<ul>
<li>When using <code>template get&lt;ENUM_TYPE&gt;()</code>, undefined
JSON values will default to the first pair specified in your map. Select
this default pair carefully.</li>
<li>If an enum or JSON value is specified more than once in your map,
the first matching occurrence from the top of the map will be returned
when converting to or from JSON.</li>
</ul>
<h3 id="binary-formats-bson-cbor-messagepack-ubjson-and-bjdata">Binary
formats (BSON, CBOR, MessagePack, UBJSON, and BJData)</h3>
<p>Though JSON is a ubiquitous data format, it is not a very compact
format suitable for data exchange, for instance over a network. Hence,
the library supports <a href="https://bsonspec.org">BSON</a> (Binary
JSON), <a href="https://cbor.io">CBOR</a> (Concise Binary Object
Representation), <a href="https://msgpack.org">MessagePack</a>, <a
href="https://ubjson.org">UBJSON</a> (Universal Binary JSON
Specification) and <a href="https://neurojson.org/bjdata">BJData</a>
(Binary JData) to efficiently encode JSON values to byte vectors and to
decode such vectors.</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">// create a JSON value</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>json j <span class="op">=</span> <span class="st">R&quot;(</span><span class="vs">{&quot;compact&quot;: true, &quot;schema&quot;: 0}</span><span class="st">)&quot;</span>_json<span class="op">;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">// serialize to BSON</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>uint8_t<span class="op">&gt;</span> v_bson <span class="op">=</span> json<span class="op">::</span>to_bson<span class="op">(</span>j<span class="op">);</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co">// 0x1B, 0x00, 0x00, 0x00, 0x08, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0x00, 0x01, 0x10, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co">// roundtrip</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>json j_from_bson <span class="op">=</span> json<span class="op">::</span>from_bson<span class="op">(</span>v_bson<span class="op">);</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="co">// serialize to CBOR</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>uint8_t<span class="op">&gt;</span> v_cbor <span class="op">=</span> json<span class="op">::</span>to_cbor<span class="op">(</span>j<span class="op">);</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="co">// 0xA2, 0x67, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0xF5, 0x66, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="co">// roundtrip</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>json j_from_cbor <span class="op">=</span> json<span class="op">::</span>from_cbor<span class="op">(</span>v_cbor<span class="op">);</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a><span class="co">// serialize to MessagePack</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>uint8_t<span class="op">&gt;</span> v_msgpack <span class="op">=</span> json<span class="op">::</span>to_msgpack<span class="op">(</span>j<span class="op">);</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a><span class="co">// 0x82, 0xA7, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0xC3, 0xA6, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00</span></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a><span class="co">// roundtrip</span></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>json j_from_msgpack <span class="op">=</span> json<span class="op">::</span>from_msgpack<span class="op">(</span>v_msgpack<span class="op">);</span></span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a><span class="co">// serialize to UBJSON</span></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>uint8_t<span class="op">&gt;</span> v_ubjson <span class="op">=</span> json<span class="op">::</span>to_ubjson<span class="op">(</span>j<span class="op">);</span></span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a><span class="co">// 0x7B, 0x69, 0x07, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0x54, 0x69, 0x06, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x69, 0x00, 0x7D</span></span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a><span class="co">// roundtrip</span></span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a>json j_from_ubjson <span class="op">=</span> json<span class="op">::</span>from_ubjson<span class="op">(</span>v_ubjson<span class="op">);</span></span></code></pre></div>
<p>The library also supports binary types from BSON, CBOR (byte
strings), and MessagePack (bin, ext, fixext). They are stored by default
as <code>std::vector&lt;std::uint8_t&gt;</code> to be processed outside
the library.</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">// CBOR byte string with payload 0xCAFE</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>uint8_t<span class="op">&gt;</span> v <span class="op">=</span> <span class="op">{</span><span class="bn">0x42</span><span class="op">,</span> <span class="bn">0xCA</span><span class="op">,</span> <span class="bn">0xFE</span><span class="op">};</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">// read value</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>json j <span class="op">=</span> json<span class="op">::</span>from_cbor<span class="op">(</span>v<span class="op">);</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co">// the JSON value has type binary</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>j<span class="op">.</span>is_binary<span class="op">();</span> <span class="co">// true</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="co">// get reference to stored binary value</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span><span class="op">&amp;</span> binary <span class="op">=</span> j<span class="op">.</span>get_binary<span class="op">();</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co">// the binary value has no subtype (CBOR has no binary subtypes)</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>binary<span class="op">.</span>has_subtype<span class="op">();</span> <span class="co">// false</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="co">// access std::vector&lt;std::uint8_t&gt; member functions</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>binary<span class="op">.</span>size<span class="op">();</span> <span class="co">// 2</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>binary<span class="op">[</span><span class="dv">0</span><span class="op">];</span> <span class="co">// 0xCA</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>binary<span class="op">[</span><span class="dv">1</span><span class="op">];</span> <span class="co">// 0xFE</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a><span class="co">// set subtype to 0x10</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>binary<span class="op">.</span>set_subtype<span class="op">(</span><span class="bn">0x10</span><span class="op">);</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a><span class="co">// serialize to MessagePack</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> cbor <span class="op">=</span> json<span class="op">::</span>to_msgpack<span class="op">(</span>j<span class="op">);</span> <span class="co">// 0xD5 (fixext2), 0x10, 0xCA, 0xFE</span></span></code></pre></div>
<h2 id="customers">Customers</h2>
<p>The library is used in multiple projects, applications, operating
systems, etc. The list below is not exhaustive, but the result of an
internet search. If you know further customers of the library, please
let me know, see <a href="#contact">contact</a>.</p>
<p><a href="https://json.nlohmann.me/home/customers/"><img
src="docs/mkdocs/docs/images/customers.png"
alt="logos of customers using the library" /></a></p>
<h2 id="supported-compilers">Supported compilers</h2>
<p>Though it’s 2025 already, the support for C++11 is still a bit
sparse. Currently, the following compilers are known to work:</p>
<ul>
<li>GCC 4.8 - 14.2 (and possibly later)</li>
<li>Clang 3.4 - 21.0 (and possibly later)</li>
<li>Apple Clang 9.1 - 16.0 (and possibly later)</li>
<li>Intel C++ Compiler 17.0.2 (and possibly later)</li>
<li>Nvidia CUDA Compiler 11.0.221 (and possibly later)</li>
<li>Microsoft Visual C++ 2015 / Build Tools 14.0.25123.0 (and possibly
later)</li>
<li>Microsoft Visual C++ 2017 / Build Tools 15.5.180.51428 (and possibly
later)</li>
<li>Microsoft Visual C++ 2019 / Build Tools 16.3.1+1def00d3d (and
possibly later)</li>
<li>Microsoft Visual C++ 2022 / Build Tools 19.30.30709.0 (and possibly
later)</li>
</ul>
<p>I would be happy to learn about other compilers/versions.</p>
<p>Please note:</p>
<ul>
<li><p>GCC 4.8 has a bug <a
href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=57824">57824</a>:
multiline raw strings cannot be the arguments to macros. Don’t use
multiline raw strings directly in macros with this compiler.</p></li>
<li><p>Android defaults to using very old compilers and C++ libraries.
To fix this, add the following to your <code>Application.mk</code>. This
will switch to the LLVM C++ library, the Clang compiler, and enable
C++11 and other features disabled by default.</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode makefile"><code class="sourceCode makefile"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="dt">APP_STL</span> <span class="ch">:=</span><span class="st"> c++_shared</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="dt">NDK_TOOLCHAIN_VERSION</span> <span class="ch">:=</span><span class="st"> clang3.6</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="dt">APP_CPPFLAGS</span> <span class="ch">+=</span><span class="st"> -frtti -fexceptions</span></span></code></pre></div>
<p>The code compiles successfully with <a
href="https://developer.android.com/ndk/index.html?hl=ml">Android
NDK</a>, Revision 9 - 11 (and possibly later) and <a
href="https://www.crystax.net/en/android/ndk">CrystaX’s Android NDK</a>
version 10.</p></li>
<li><p>For GCC running on MinGW or Android SDK, the error
<code>'to_string' is not a member of 'std'</code> (or similarly, for
<code>strtod</code> or <code>strtof</code>) may occur. Note this is not
an issue with the code, but rather with the compiler itself. On Android,
see above to build with a newer environment. For MinGW, please refer to
<a href="https://tehsausage.com/mingw-to-string">this site</a> and <a
href="https://github.com/nlohmann/json/issues/136">this discussion</a>
for information on how to fix this bug. For Android NDK using
<code>APP_STL := gnustl_static</code>, please refer to <a
href="https://github.com/nlohmann/json/issues/219">this
discussion</a>.</p></li>
<li><p>Unsupported versions of GCC and Clang are rejected by
<code>#error</code> directives. This can be switched off by defining
<code>JSON_SKIP_UNSUPPORTED_COMPILER_CHECK</code>. Note that you can
expect no support in this case.</p></li>
</ul>
<p>See the page <a
href="https://json.nlohmann.me/community/quality_assurance">quality
assurance</a> on the compilers used to check the library in the CI.</p>
<h2 id="integration">Integration</h2>
<p><a
href="https://github.com/nlohmann/json/blob/develop/single_include/nlohmann/json.hpp"><code>json.hpp</code></a>
is the single required file in <code>single_include/nlohmann</code> or
<a href="https://github.com/nlohmann/json/releases">released here</a>.
You need to add</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;nlohmann/json.hpp&gt;</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co">// for convenience</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> json <span class="op">=</span> nlohmann<span class="op">::</span>json<span class="op">;</span></span></code></pre></div>
<p>to the files you want to process JSON and set the necessary switches
to enable C++11 (e.g., <code>-std=c++11</code> for GCC and Clang).</p>
<p>You can further use file <a
href="https://github.com/nlohmann/json/blob/develop/include/nlohmann/json_fwd.hpp"><code>include/nlohmann/json_fwd.hpp</code></a>
for forward-declarations. The installation of json_fwd.hpp (as part of
cmake’s install step), can be achieved by setting
<code>-DJSON_MultipleHeaders=ON</code>.</p>
<h3 id="cmake">CMake</h3>
<p>You can also use the <code>nlohmann_json::nlohmann_json</code>
interface target in CMake. This target populates the appropriate usage
requirements for <code>INTERFACE_INCLUDE_DIRECTORIES</code> to point to
the appropriate include directories and
<code>INTERFACE_COMPILE_FEATURES</code> for the necessary C++11
flags.</p>
<h4 id="external">External</h4>
<p>To use this library from a CMake project, you can locate it directly
with <code>find_package()</code> and use the namespaced imported target
from the generated package configuration:</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode cmake"><code class="sourceCode cmake"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CMakeLists.txt</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="kw">find_package</span>(nlohmann_json <span class="dt">3.12.0</span> <span class="ot">REQUIRED</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="er">...</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="kw">add_library</span>(<span class="bn">foo</span> ...)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="er">...</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="kw">target_link_libraries</span>(<span class="bn">foo</span> <span class="ot">PRIVATE</span> <span class="bn">nlohmann_json::nlohmann_json</span>)</span></code></pre></div>
<p>The package configuration file,
<code>nlohmann_jsonConfig.cmake</code>, can be used either from an
install tree or directly out of the build tree.</p>
<h4 id="embedded">Embedded</h4>
<p>To embed the library directly into an existing CMake project, place
the entire source tree in a subdirectory and call
<code>add_subdirectory()</code> in your <code>CMakeLists.txt</code>
file:</p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode cmake"><code class="sourceCode cmake"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Typically you don&#39;t care so much for a third party library&#39;s tests to be</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># run from your own project&#39;s code.</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(JSON_BuildTests <span class="ot">OFF</span> <span class="ot">CACHE</span> <span class="ot">INTERNAL</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># If you only include this third party in PRIVATE source files, you do not</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co"># need to install it when your main project gets installed.</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># set(JSON_Install OFF CACHE INTERNAL &quot;&quot;)</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Don&#39;t use include(nlohmann_json/CMakeLists.txt) since that carries with it</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co"># unintended consequences that will break the build.  It&#39;s generally</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co"># discouraged (although not necessarily well documented as such) to use</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="co"># include(...) for pulling in other CMake projects anyways.</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="kw">add_subdirectory</span>(nlohmann_json)</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="er">...</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="kw">add_library</span>(<span class="bn">foo</span> ...)</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a><span class="er">...</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a><span class="kw">target_link_libraries</span>(<span class="bn">foo</span> <span class="ot">PRIVATE</span> <span class="bn">nlohmann_json::nlohmann_json</span>)</span></code></pre></div>
<h5 id="embedded-fetchcontent">Embedded (FetchContent)</h5>
<p>Since CMake v3.11, <a
href="https://cmake.org/cmake/help/v3.11/module/FetchContent.html">FetchContent</a>
can be used to automatically download a release as a dependency at
configure time.</p>
<p>Example:</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode cmake"><code class="sourceCode cmake"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">include</span>(<span class="im">FetchContent</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">FetchContent_Declare</span>(json <span class="ot">URL</span> https://github.com/nlohmann/json/releases/download/v3.<span class="dt">12.0</span>/json.tar.xz)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">FetchContent_MakeAvailable</span>(json)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="kw">target_link_libraries</span>(<span class="bn">foo</span> <span class="ot">PRIVATE</span> <span class="bn">nlohmann_json::nlohmann_json</span>)</span></code></pre></div>
<p><strong>Note</strong>: It is recommended to use the URL approach
described above which is supported as of version 3.10.0. See <a
href="https://json.nlohmann.me/integration/cmake/#fetchcontent"
class="uri">https://json.nlohmann.me/integration/cmake/#fetchcontent</a>
for more information.</p>
<h4 id="supporting-both">Supporting Both</h4>
<p>To allow your project to support either an externally supplied or an
embedded JSON library, you can use a pattern akin to the following:</p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode cmake"><code class="sourceCode cmake"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top level CMakeLists.txt</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">project</span>(FOO)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="er">...</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="kw">option</span>(FOO_USE_EXTERNAL_JSON <span class="st">&quot;Use an external JSON library&quot;</span> <span class="ot">OFF</span>)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="er">...</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="kw">add_subdirectory</span>(thirdparty)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="er">...</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="kw">add_library</span>(<span class="bn">foo</span> ...)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="er">...</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that the namespaced target will always be available regardless of the</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="co"># import method</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="kw">target_link_libraries</span>(<span class="bn">foo</span> <span class="ot">PRIVATE</span> <span class="bn">nlohmann_json::nlohmann_json</span>)</span></code></pre></div>
<div class="sourceCode" id="cb44"><pre
class="sourceCode cmake"><code class="sourceCode cmake"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># thirdparty/CMakeLists.txt</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="er">...</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(FOO_USE_EXTERNAL_JSON)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">find_package</span>(nlohmann_json <span class="dt">3.12.0</span> <span class="ot">REQUIRED</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>()</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">set</span>(JSON_BuildTests <span class="ot">OFF</span> <span class="ot">CACHE</span> <span class="ot">INTERNAL</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">add_subdirectory</span>(nlohmann_json)</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="cf">endif</span>()</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="er">...</span></span></code></pre></div>
<p><code>thirdparty/nlohmann_json</code> is then a complete copy of this
source tree.</p>
<h3 id="package-managers">Package Managers</h3>
<p>Use your favorite <a
href="https://json.nlohmann.me/integration/package_managers/"><strong>package
manager</strong></a> to use the library.</p>
<ul>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/homebrew.svg" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#homebrew"><strong>Homebrew</strong></a>
<code>nlohmann-json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/meson.svg" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#meson"><strong>Meson</strong></a>
<code>nlohmann_json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/bazel.svg" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#bazel"><strong>Bazel</strong></a>
<code>nlohmann_json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/conan.svg" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#conan"><strong>Conan</strong></a>
<code>nlohmann_json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/spack.svg" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#spack"><strong>Spack</strong></a>
<code>nlohmann-json</code></li>
<li><a
href="https://json.nlohmann.me/integration/package_managers/#hunter"><strong>Hunter</strong></a>
<code>nlohmann_json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/vcpkg.png" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#vcpkg"><strong>vcpkg</strong></a>
<code>nlohmann-json</code></li>
<li><a
href="https://json.nlohmann.me/integration/package_managers/#cget"><strong>cget</strong></a>
<code>nlohmann/json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/swift.svg" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#swift-package-manager"><strong>Swift
Package Manager</strong></a> <code>nlohmann/json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/nuget.svg" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#nuget"><strong>Nuget</strong></a>
<code>nlohmann.json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/conda.svg" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#conda"><strong>Conda</strong></a>
<code>nlohmann_json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/macports.svg" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#macports"><strong>MacPorts</strong></a>
<code>nlohmann-json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/CPM.png" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#cpmcmake"><strong>cpm.cmake</strong></a>
<code>gh:nlohmann/json</code></li>
<li><img src="https://raw.githubusercontent.com/nlohmann/json/refs/heads/develop/docs/mkdocs/docs/images/package_managers/xmake.svg" height="20"> <a
href="https://json.nlohmann.me/integration/package_managers/#xmake"><strong>xmake</strong></a>
<code>nlohmann_json</code></li>
</ul>
<p>The library is part of many package managers. See the <a
href="https://json.nlohmann.me/integration/package_managers/"><strong>documentation</strong></a>
for detailed descriptions and examples.</p>
<h3 id="pkg-config">Pkg-config</h3>
<p>If you are using bare Makefiles, you can use <code>pkg-config</code>
to generate the include flags that point to where the library is
installed:</p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pkg-config</span> nlohmann_json <span class="at">--cflags</span></span></code></pre></div>
<h2 id="license">License</h2>
<p><img align="right" src="https://149753425.v2.pressablecdn.com/wp-content/uploads/2009/06/OSIApproved_100X125.png" alt="OSI approved license"></p>
<p>The class is licensed under the <a
href="https://opensource.org/licenses/MIT">MIT License</a>:</p>
<p>Copyright © 2013-2025 <a href="https://nlohmann.me">Niels
Lohmann</a></p>
<p>Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
“Software”), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:</p>
<p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<hr />
<ul>
<li>The class contains the UTF-8 Decoder from Bjoern Hoehrmann which is
licensed under the <a href="https://opensource.org/licenses/MIT">MIT
License</a> (see above). Copyright © 2008-2009 <a
href="https://bjoern.hoehrmann.de/">Björn Hoehrmann</a> <a
href="mailto:bjoern@hoehrmann.de"
class="email">bjoern@hoehrmann.de</a></li>
<li>The class contains a slightly modified version of the Grisu2
algorithm from Florian Loitsch which is licensed under the <a
href="https://opensource.org/licenses/MIT">MIT License</a> (see above).
Copyright © 2009 <a href="https://florian.loitsch.com/">Florian
Loitsch</a></li>
<li>The class contains a copy of <a
href="https://nemequ.github.io/hedley/">Hedley</a> from Evan Nemerson
which is licensed as <a
href="https://creativecommons.org/publicdomain/zero/1.0/">CC0-1.0</a>.</li>
<li>The class contains parts of <a
href="https://github.com/abseil/abseil-cpp">Google Abseil</a> which is
licensed under the <a
href="https://opensource.org/licenses/Apache-2.0">Apache 2.0
License</a>.</li>
</ul>
<p><img align="right" src="https://git.fsfe.org/reuse/reuse-ci/raw/branch/master/reuse-horizontal.png" alt="REUSE Software"></p>
<p>The library is compliant to version 3.3 of the <a
href="https://reuse.software"><strong>REUSE
specification</strong></a>:</p>
<ul>
<li>Every source file contains an SPDX copyright header.</li>
<li>The full text of all licenses used in the repository can be found in
the <code>LICENSES</code> folder.</li>
<li>File <code>.reuse/dep5</code> contains an overview of all files’
copyrights and licenses.</li>
<li>Run <code>pipx run reuse lint</code> to verify the project’s REUSE
compliance and <code>pipx run reuse spdx</code> to generate a SPDX
SBOM.</li>
</ul>
<h2 id="contact">Contact</h2>
<p>If you have questions regarding the library, I would like to invite
you to <a href="https://github.com/nlohmann/json/issues/new/choose">open
an issue at GitHub</a>. Please describe your request, problem, or
question as detailed as possible, and also mention the version of the
library you are using as well as the version of your compiler and
operating system. Opening an issue at GitHub allows other users and
contributors to this library to collaborate. For instance, I have little
experience with MSVC, and most issues in this regard have been solved by
a growing community. If you have a look at the <a
href="https://github.com/nlohmann/json/issues?q=is%3Aissue+is%3Aclosed">closed
issues</a>, you will see that we react quite timely in most cases.</p>
<p>Only if your request would contain confidential information, please
<a href="mailto:mail@nlohmann.me">send me an email</a>. For encrypted
messages, please use <a
href="https://keybase.io/nlohmann/pgp_keys.asc">this key</a>.</p>
<h2 id="security">Security</h2>
<p><a href="https://github.com/nlohmann/json/commits">Commits by Niels
Lohmann</a> and <a
href="https://github.com/nlohmann/json/releases">releases</a> are signed
with this <a
href="https://keybase.io/nlohmann/pgp_keys.asc?fingerprint=797167ae41c0a6d9232e48457f3cea63ae251b69">PGP
Key</a>.</p>
<h2 id="thanks">Thanks</h2>
<p>I deeply appreciate the help of the following people.</p>
<p><img src="https://raw.githubusercontent.com/nlohmann/json/develop/docs/avatars.png" align="right" alt="GitHub avatars of the contributors"></p>
<ol type="1">
<li><a href="https://github.com/Teemperor">Teemperor</a> implemented
CMake support and lcov integration, realized escape and Unicode handling
in the string parser, and fixed the JSON serialization.</li>
<li><a href="https://github.com/elliotgoodrich">elliotgoodrich</a> fixed
an issue with double deletion in the iterator classes.</li>
<li><a href="https://github.com/kirkshoop">kirkshoop</a> made the
iterators of the class composable to other libraries.</li>
<li><a href="https://github.com/wanwc">wancw</a> fixed a bug that
hindered the class to compile with Clang.</li>
<li>Tomas Åblad found a bug in the iterator implementation.</li>
<li><a href="https://github.com/jrandall">Joshua C. Randall</a> fixed a
bug in the floating-point serialization.</li>
<li><a href="https://github.com/aburgh">Aaron Burghardt</a> implemented
code to parse streams incrementally. Furthermore, he greatly improved
the parser class by allowing the definition of a filter function to
discard undesired elements while parsing.</li>
<li><a href="https://github.com/dkopecek">Daniel Kopeček</a> fixed a bug
in the compilation with GCC 5.0.</li>
<li><a href="https://github.com/Florianjw">Florian Weber</a> fixed a bug
in and improved the performance of the comparison operators.</li>
<li><a href="https://github.com/EricMCornelius">Eric Cornelius</a>
pointed out a bug in the handling with NaN and infinity values. He also
improved the performance of the string escaping.</li>
<li><a href="https://github.com/likebeta">易思龙</a> implemented a
conversion from anonymous enums.</li>
<li><a href="https://github.com/kepkin">kepkin</a> patiently pushed
forward the support for Microsoft Visual studio.</li>
<li><a href="https://github.com/gregmarr">gregmarr</a> simplified the
implementation of reverse iterators and helped with numerous hints and
improvements. In particular, he pushed forward the implementation of
user-defined types.</li>
<li><a href="https://github.com/caiovlp">Caio Luppi</a> fixed a bug in
the Unicode handling.</li>
<li><a href="https://github.com/dariomt">dariomt</a> fixed some typos in
the examples.</li>
<li><a href="https://github.com/d-frey">Daniel Frey</a> cleaned up some
pointers and implemented exception-safe memory allocation.</li>
<li><a href="https://github.com/ColinH">Colin Hirsch</a> took care of a
small namespace issue.</li>
<li><a href="https://github.com/whoshuu">Huu Nguyen</a> correct a
variable name in the documentation.</li>
<li><a href="https://github.com/silverweed">Silverweed</a> overloaded
<code>parse()</code> to accept an rvalue reference.</li>
<li><a href="https://github.com/dariomt">dariomt</a> fixed a subtlety in
MSVC type support and implemented the <code>get_ref()</code> function to
get a reference to stored values.</li>
<li><a href="https://github.com/ZahlGraf">ZahlGraf</a> added a
workaround that allows compilation using Android NDK.</li>
<li><a href="https://github.com/whackashoe">whackashoe</a> replaced a
function that was marked as unsafe by Visual Studio.</li>
<li><a href="https://github.com/406345">406345</a> fixed two small
warnings.</li>
<li><a href="https://github.com/glenfe">Glen Fernandes</a> noted a
potential portability problem in the <code>has_mapped_type</code>
function.</li>
<li><a href="https://github.com/nibroc">Corbin Hughes</a> fixed some
typos in the contribution guidelines.</li>
<li><a href="https://github.com/twelsby">twelsby</a> fixed the array
subscript operator, an issue that failed the MSVC build, and
floating-point parsing/dumping. He further added support for unsigned
integer numbers and implemented better roundtrip support for parsed
numbers.</li>
<li><a href="https://github.com/vog">Volker Diels-Grabsch</a> fixed a
link in the README file.</li>
<li><a href="https://github.com/msm-">msm-</a> added support for
American Fuzzy Lop.</li>
<li><a href="https://github.com/Annihil">Annihil</a> fixed an example in
the README file.</li>
<li><a href="https://github.com/Themercee">Themercee</a> noted a wrong
URL in the README file.</li>
<li><a href="https://github.com/lv-zheng">Lv Zheng</a> fixed a namespace
issue with <code>int64_t</code> and <code>uint64_t</code>.</li>
<li><a href="https://github.com/abc100m">abc100m</a> analyzed the issues
with GCC 4.8 and proposed a <a
href="https://github.com/nlohmann/json/pull/212">partial
solution</a>.</li>
<li><a href="https://github.com/zewt">zewt</a> added useful notes to the
README file about Android.</li>
<li><a href="https://github.com/robertmrk">Róbert Márki</a> added a fix
to use move iterators and improved the integration via CMake.</li>
<li><a href="https://github.com/ChrisKitching">Chris Kitching</a>
cleaned up the CMake files.</li>
<li><a href="https://github.com/06needhamt">Tom Needham</a> fixed a
subtle bug with MSVC 2015 which was also proposed by <a
href="https://github.com/Epidal">Michael K.</a>.</li>
<li><a href="https://github.com/thelostt">Mário Feroldi</a> fixed a
small typo.</li>
<li><a href="https://github.com/duncanwerner">duncanwerner</a> found a
really embarrassing performance regression in the 2.0.0 release.</li>
<li><a href="https://github.com/dtoma">Damien</a> fixed one of the last
conversion warnings.</li>
<li><a href="https://github.com/t-b">Thomas Braun</a> fixed a warning in
a test case and adjusted MSVC calls in the CI.</li>
<li><a href="https://github.com/theodelrieu">Théo DELRIEU</a> patiently
and constructively oversaw the long way toward <a
href="https://github.com/nlohmann/json/issues/290">iterator-range
parsing</a>. He also implemented the magic behind the
serialization/deserialization of user-defined types and split the single
header file into smaller chunks.</li>
<li><a href="https://github.com/5tefan">Stefan</a> fixed a minor issue
in the documentation.</li>
<li><a href="https://github.com/vasild">Vasil Dimov</a> fixed the
documentation regarding conversions from
<code>std::multiset</code>.</li>
<li><a href="https://github.com/ChristophJud">ChristophJud</a>
overworked the CMake files to ease project inclusion.</li>
<li><a href="https://github.com/vpetrigo">Vladimir Petrigo</a> made a
SFINAE hack more readable and added Visual Studio 17 to the build
matrix.</li>
<li><a href="https://github.com/seeekr">Denis Andrejew</a> fixed a
grammar issue in the README file.</li>
<li><a href="https://github.com/palacaze">Pierre-Antoine Lacaze</a>
found a subtle bug in the <code>dump()</code> function.</li>
<li><a
href="https://github.com/TurpentineDistillery">TurpentineDistillery</a>
pointed to <a
href="https://en.cppreference.com/w/cpp/locale/locale/classic"><code>std::locale::classic()</code></a>
to avoid too much locale joggling, found some nice performance
improvements in the parser, improved the benchmarking code, and realized
locale-independent number parsing and printing.</li>
<li><a href="https://github.com/cgzones">cgzones</a> had an idea how to
fix the Coverity scan.</li>
<li><a href="https://github.com/jaredgrubb">Jared Grubb</a> silenced a
nasty documentation warning.</li>
<li><a href="https://github.com/qwename">Yixin Zhang</a> fixed an
integer overflow check.</li>
<li><a href="https://github.com/Bosswestfalen">Bosswestfalen</a> merged
two iterator classes into a smaller one.</li>
<li><a href="https://github.com/Daniel599">Daniel599</a> helped to get
Travis execute the tests with Clang’s sanitizers.</li>
<li><a href="https://github.com/vjon">Jonathan Lee</a> fixed an example
in the README file.</li>
<li><a href="https://github.com/gnzlbg">gnzlbg</a> supported the
implementation of user-defined types.</li>
<li><a href="https://github.com/qis">Alexej Harm</a> helped to get the
user-defined types working with Visual Studio.</li>
<li><a href="https://github.com/jaredgrubb">Jared Grubb</a> supported
the implementation of user-defined types.</li>
<li><a href="https://github.com/EnricoBilla">EnricoBilla</a> noted a
typo in an example.</li>
<li><a href="https://github.com/horenmar">Martin Hořeňovský</a> found a
way for a 2x speedup for the compilation time of the test suite.</li>
<li><a href="https://github.com/ukhegg">ukhegg</a> found proposed an
improvement for the examples section.</li>
<li><a href="https://github.com/rswanson-ihi">rswanson-ihi</a> noted a
typo in the README.</li>
<li><a href="https://github.com/stanmihai4">Mihai Stan</a> fixed a bug
in the comparison with <code>nullptr</code>s.</li>
<li><a href="https://github.com/tusharpm">Tushar Maheshwari</a> added <a
href="https://github.com/sakra/cotire">cotire</a> support to speed up
the compilation.</li>
<li><a href="https://github.com/TedLyngmo">TedLyngmo</a> noted a typo in
the README, removed unnecessary bit arithmetic, and fixed some
<code>-Weffc++</code> warnings.</li>
<li><a href="https://github.com/krzysztofwos">Krzysztof Woś</a> made
exceptions more visible.</li>
<li><a href="https://github.com/ftillier">ftillier</a> fixed a compiler
warning.</li>
<li><a href="https://github.com/tinloaf">tinloaf</a> made sure all
pushed warnings are properly popped.</li>
<li><a href="https://github.com/Fytch">Fytch</a> found a bug in the
documentation.</li>
<li><a href="https://github.com/Type1J">Jay Sistar</a> implemented a
Meson build description.</li>
<li><a href="https://github.com/HenryRLee">Henry Lee</a> fixed a warning
in ICC and improved the iterator implementation.</li>
<li><a href="https://github.com/vthiery">Vincent Thiery</a> maintains a
package for the Conan package manager.</li>
<li><a href="https://github.com/koemeet">Steffen</a> fixed a potential
issue with MSVC and <code>std::min</code>.</li>
<li><a href="https://github.com/Chocobo1">Mike Tzou</a> fixed some
typos.</li>
<li><a href="https://github.com/amrcode">amrcode</a> noted a misleading
documentation about comparison of floats.</li>
<li><a href="https://github.com/olegendo">Oleg Endo</a> reduced the
memory consumption by replacing <code>&lt;iostream&gt;</code> with
<code>&lt;iosfwd&gt;</code>.</li>
<li><a href="https://github.com/dan-42">dan-42</a> cleaned up the CMake
files to simplify including/reusing of the library.</li>
<li><a href="https://github.com/himikof">Nikita Ofitserov</a> allowed
for moving values from initializer lists.</li>
<li><a href="https://github.com/wincent">Greg Hurrell</a> fixed a
typo.</li>
<li><a href="https://github.com/DmitryKuk">Dmitry Kukovinets</a> fixed a
typo.</li>
<li><a href="https://github.com/kbthomp1">kbthomp1</a> fixed an issue
related to the Intel OSX compiler.</li>
<li><a href="https://github.com/daixtrose">Markus Werle</a> fixed a
typo.</li>
<li><a href="https://github.com/WebProdPP">WebProdPP</a> fixed a subtle
error in a precondition check.</li>
<li><a href="https://github.com/leha-bot">Alex</a> noted an error in a
code sample.</li>
<li><a href="https://github.com/tdegeus">Tom de Geus</a> reported some
warnings with ICC and helped to fix them.</li>
<li><a href="https://github.com/pjkundert">Perry Kundert</a> simplified
reading from input streams.</li>
<li><a href="https://github.com/sonulohani">Sonu Lohani</a> fixed a
small compilation error.</li>
<li><a href="https://github.com/jseward">Jamie Seward</a> fixed all MSVC
warnings.</li>
<li><a href="https://github.com/eld00d">Nate Vargas</a> added a Doxygen
tag file.</li>
<li><a href="https://github.com/pvleuven">pvleuven</a> helped to fix a
warning in ICC.</li>
<li><a href="https://github.com/crea7or">Pavel</a> helped to fix some
warnings in MSVC.</li>
<li><a href="https://github.com/jseward">Jamie Seward</a> avoided
unnecessary string copies in <code>find()</code> and
<code>count()</code>.</li>
<li><a href="https://github.com/Itja">Mitja</a> fixed some typos.</li>
<li><a href="https://github.com/jowr">Jorrit Wronski</a> updated the
Hunter package links.</li>
<li><a href="https://github.com/TinyTinni">Matthias Möller</a> added a
<code>.natvis</code> for the MSVC debug view.</li>
<li><a href="https://github.com/bogemic">bogemic</a> fixed some C++17
deprecation warnings.</li>
<li><a href="https://github.com/erengy">Eren Okka</a> fixed some MSVC
warnings.</li>
<li><a href="https://github.com/abolz">abolz</a> integrated the Grisu2
algorithm for proper floating-point formatting, allowing more roundtrip
checks to succeed.</li>
<li><a href="https://github.com/Pipeliner">Vadim Evard</a> fixed a
Markdown issue in the README.</li>
<li><a href="https://github.com/zerodefect">zerodefect</a> fixed a
compiler warning.</li>
<li><a href="https://github.com/kaidokert">Kert</a> allowed to template
the string type in the serialization and added the possibility to
override the exceptional behavior.</li>
<li><a href="https://github.com/mark-99">mark-99</a> helped fixing an
ICC error.</li>
<li><a href="https://github.com/patrikhuber">Patrik Huber</a> fixed
links in the README file.</li>
<li><a href="https://github.com/johnfb">johnfb</a> found a bug in the
implementation of CBOR’s indefinite length strings.</li>
<li><a href="https://github.com/pfultz2">Paul Fultz II</a> added a note
on the cget package manager.</li>
<li><a href="https://github.com/wla80">Wilson Lin</a> made the
integration section of the README more concise.</li>
<li><a href="https://github.com/ralfbielig">RalfBielig</a> detected and
fixed a memory leak in the parser callback.</li>
<li><a href="https://github.com/agrianius">agrianius</a> allowed to dump
JSON to an alternative string type.</li>
<li><a href="https://github.com/ktonon">Kevin Tonon</a> overworked the
C++11 compiler checks in CMake.</li>
<li><a href="https://github.com/ax3l">Axel Huebl</a> simplified a CMake
check and added support for the <a href="https://spack.io">Spack package
manager</a>.</li>
<li><a href="https://github.com/coryan">Carlos O’Ryan</a> fixed a
typo.</li>
<li><a href="https://github.com/jammehcow">James Upjohn</a> fixed a
version number in the compilers section.</li>
<li><a href="https://github.com/chuckatkins">Chuck Atkins</a> adjusted
the CMake files to the CMake packaging guidelines and provided
documentation for the CMake integration.</li>
<li><a href="https://github.com/dns13">Jan Schöppach</a> fixed a
typo.</li>
<li><a href="https://github.com/martin-mfg">martin-mfg</a> fixed a
typo.</li>
<li><a href="https://github.com/TinyTinni">Matthias Möller</a> removed
the dependency from <code>std::stringstream</code>.</li>
<li><a href="https://github.com/agrianius">agrianius</a> added code to
use alternative string implementations.</li>
<li><a href="https://github.com/Daniel599">Daniel599</a> allowed to use
more algorithms with the <code>items()</code> function.</li>
<li><a href="https://github.com/jrakow">Julius Rakow</a> fixed the Meson
include directory and fixed the links to <a
href="https://cppreference.com">cppreference.com</a>.</li>
<li><a href="https://github.com/sonulohani">Sonu Lohani</a> fixed the
compilation with MSVC 2015 in debug mode.</li>
<li><a href="https://github.com/grembo">grembo</a> fixed the test suite
and re-enabled several test cases.</li>
<li><a href="https://github.com/simnalamburt">Hyeon Kim</a> introduced
the macro <code>JSON_INTERNAL_CATCH</code> to control the exception
handling inside the library.</li>
<li><a href="https://github.com/thyu">thyu</a> fixed a compiler
warning.</li>
<li><a href="https://github.com/LEgregius">David Guthrie</a> fixed a
subtle compilation error with Clang 3.4.2.</li>
<li><a href="https://github.com/dennisfischer">Dennis Fischer</a>
allowed to call <code>find_package</code> without installing the
library.</li>
<li><a href="https://github.com/simnalamburt">Hyeon Kim</a> fixed an
issue with a double macro definition.</li>
<li><a href="https://github.com/rivertam">Ben Berman</a> made some error
messages more understandable.</li>
<li><a href="https://github.com/zakalibit">zakalibit</a> fixed a
compilation problem with the Intel C++ compiler.</li>
<li><a href="https://github.com/mandreyel">mandreyel</a> fixed a
compilation problem.</li>
<li><a href="https://github.com/koponomarenko">Kostiantyn
Ponomarenko</a> added version and license information to the Meson build
file.</li>
<li><a href="https://github.com/henryiii">Henry Schreiner</a> added
support for GCC 4.8.</li>
<li><a href="https://github.com/knilch0r">knilch</a> made sure the test
suite does not stall when run in the wrong directory.</li>
<li><a href="https://github.com/antonioborondo">Antonio Borondo</a>
fixed an MSVC 2017 warning.</li>
<li><a href="https://github.com/dgendreau">Dan Gendreau</a> implemented
the <code>NLOHMANN_JSON_SERIALIZE_ENUM</code> macro to quickly define an
enum/JSON mapping.</li>
<li><a href="https://github.com/efp">efp</a> added line and column
information to parse errors.</li>
<li><a href="https://github.com/julian-becker">julian-becker</a> added
BSON support.</li>
<li><a href="https://github.com/pratikpc">Pratik Chowdhury</a> added
support for structured bindings.</li>
<li><a href="https://github.com/davedissian">David Avedissian</a> added
support for Clang 5.0.1 (PS4 version).</li>
<li><a href="https://github.com/dumarjo">Jonathan Dumaresq</a>
implemented an input adapter to read from <code>FILE*</code>.</li>
<li><a href="https://github.com/kjpus">kjpus</a> fixed a link in the
documentation.</li>
<li><a href="https://github.com/manu-chroma">Manvendra Singh</a> fixed a
typo in the documentation.</li>
<li><a href="https://github.com/ziggurat29">ziggurat29</a> fixed an MSVC
warning.</li>
<li><a href="https://github.com/SylvainCorlay">Sylvain Corlay</a> added
code to avoid an issue with MSVC.</li>
<li><a href="https://github.com/mefyl">mefyl</a> fixed a bug when JSON
was parsed from an input stream.</li>
<li><a href="https://github.com/mpoquet">Millian Poquet</a> allowed to
install the library via Meson.</li>
<li><a href="https://github.com/moodboom">Michael Behrns-Miller</a>
found an issue with a missing namespace.</li>
<li><a href="https://github.com/naszta">Nasztanovics Ferenc</a> fixed a
compilation issue with libc 2.12.</li>
<li><a href="https://github.com/andreas-schwab">Andreas Schwab</a> fixed
the endian conversion.</li>
<li><a href="https://github.com/Mark-Dunning">Mark-Dunning</a> fixed a
warning in MSVC.</li>
<li><a href="https://github.com/garethsb-sony">Gareth
Sylvester-Bradley</a> added <code>operator/</code> for JSON
Pointers.</li>
<li><a href="https://github.com/johnmarkwayve">John-Mark</a> noted a
missing header.</li>
<li><a href="https://github.com/xvitaly">Vitaly Zaitsev</a> fixed
compilation with GCC 9.0.</li>
<li><a href="https://github.com/stac47">Laurent Stacul</a> fixed
compilation with GCC 9.0.</li>
<li><a href="https://github.com/iwanders">Ivor Wanders</a> helped to
reduce the CMake requirement to version 3.1.</li>
<li><a href="https://github.com/njlr">njlr</a> updated the Buckaroo
instructions.</li>
<li><a href="https://github.com/lieff">Lion</a> fixed a compilation
issue with GCC 7 on CentOS.</li>
<li><a href="https://github.com/nickaein">Isaac Nickaein</a> improved
the integer serialization performance and implemented the
<code>contains()</code> function.</li>
<li><a href="https://github.com/past-due">past-due</a> suppressed an
unfixable warning.</li>
<li><a href="https://github.com/elvisoric">Elvis Oric</a> improved Meson
support.</li>
<li><a href="https://github.com/Afforix">Matěj Plch</a> fixed an example
in the README.</li>
<li><a href="https://github.com/wythe">Mark Beckwith</a> fixed a
typo.</li>
<li><a href="https://github.com/scinart">scinart</a> fixed bug in the
serializer.</li>
<li><a href="https://github.com/pboettch">Patrick Boettcher</a>
implemented <code>push_back()</code> and <code>pop_back()</code> for
JSON Pointers.</li>
<li><a href="https://github.com/nicoddemus">Bruno Oliveira</a> added
support for Conda.</li>
<li><a href="https://github.com/skypjack">Michele Caini</a> fixed links
in the README.</li>
<li><a href="https://github.com/hnkb">Hani</a> documented how to install
the library with NuGet.</li>
<li><a href="https://github.com/wythe">Mark Beckwith</a> fixed a
typo.</li>
<li><a href="https://github.com/yann-morin-1998">yann-morin-1998</a>
helped to reduce the CMake requirement to version 3.1.</li>
<li><a href="https://github.com/podsvirov">Konstantin Podsvirov</a>
maintains a package for the MSYS2 software distro.</li>
<li><a href="https://github.com/remyabel">remyabel</a> added
GNUInstallDirs to the CMake files.</li>
<li><a href="https://github.com/taylorhoward92">Taylor Howard</a> fixed
a unit test.</li>
<li><a href="https://github.com/Macr0Nerd">Gabe Ron</a> implemented the
<code>to_string</code> method.</li>
<li><a href="https://github.com/heavywatal">Watal M. Iwasaki</a> fixed a
Clang warning.</li>
<li><a href="https://github.com/onqtam">Viktor Kirilov</a> switched the
unit tests from <a href="https://github.com/philsquared/Catch">Catch</a>
to <a href="https://github.com/onqtam/doctest">doctest</a></li>
<li><a href="https://github.com/ejcjason">Juncheng E</a> fixed a
typo.</li>
<li><a href="https://github.com/tete17">tete17</a> fixed a bug in the
<code>contains</code> function.</li>
<li><a href="https://github.com/Xav83">Xav83</a> fixed some cppcheck
warnings.</li>
<li><a href="https://github.com/0xflotus">0xflotus</a> fixed some
typos.</li>
<li><a href="https://github.com/chris0x44">Christian Deneke</a> added a
const version of <code>json_pointer::back</code>.</li>
<li><a href="https://github.com/crazyjul">Julien Hamaide</a> made the
<code>items()</code> function work with custom string types.</li>
<li><a href="https://github.com/nemequ">Evan Nemerson</a> updated fixed
a bug in Hedley and updated this library accordingly.</li>
<li><a href="https://github.com/flopp">Florian Pigorsch</a> fixed a lot
of typos.</li>
<li><a href="https://github.com/cbegue">Camille Bégué</a> fixed an issue
in the conversion from <code>std::pair</code> and
<code>std::tuple</code> to <code>json</code>.</li>
<li><a href="https://github.com/AnthonyVH">Anthony VH</a> fixed a
compile error in an enum deserialization.</li>
<li><a href="https://github.com/ua-code-dragon">Yuriy Vountesmery</a>
noted a subtle bug in a preprocessor check.</li>
<li><a href="https://github.com/dota17">Chen</a> fixed numerous issues
in the library.</li>
<li><a href="https://github.com/aokellermann">Antony Kellermann</a>
added a CI step for GCC 10.1.</li>
<li><a href="https://github.com/gistrec">Alex</a> fixed an MSVC
warning.</li>
<li><a href="https://github.com/rvjr">Rainer</a> proposed an improvement
in the floating-point serialization in CBOR.</li>
<li><a href="https://github.com/FrancoisChabot">Francois Chabot</a> made
performance improvements in the input adapters.</li>
<li><a href="https://github.com/ArthurSonzogni">Arthur Sonzogni</a>
documented how the library can be included via
<code>FetchContent</code>.</li>
<li><a href="https://github.com/rmisev">Rimas Misevičius</a> fixed an
error message.</li>
<li><a href="https://github.com/alexandermyasnikov">Alexander
Myasnikov</a> fixed some examples and a link in the README.</li>
<li><a href="https://github.com/uhoreg">Hubert Chathi</a> made CMake’s
version config file architecture-independent.</li>
<li><a href="https://github.com/OmnipotentEntity">OmnipotentEntity</a>
implemented the binary values for CBOR, MessagePack, BSON, and
UBJSON.</li>
<li><a href="https://github.com/ArtemSarmini">ArtemSarmini</a> fixed a
compilation issue with GCC 10 and fixed a leak.</li>
<li><a href="https://github.com/sea-kg">Evgenii Sopov</a> integrated the
library to the wsjcpp package manager.</li>
<li><a href="https://github.com/linev">Sergey Linev</a> fixed a compiler
warning.</li>
<li><a href="https://github.com/magamig">Miguel Magalhães</a> fixed the
year in the copyright.</li>
<li><a href="https://github.com/garethsb-sony">Gareth
Sylvester-Bradley</a> fixed a compilation issue with MSVC.</li>
<li><a href="https://github.com/alex-weej">Alexander “weej” Jones</a>
fixed an example in the README.</li>
<li><a href="https://github.com/Coeur">Antoine Cœur</a> fixed some typos
in the documentation.</li>
<li><a href="https://github.com/jothepro">jothepro</a> updated links to
the Hunter package.</li>
<li><a href="https://github.com/kastiglione">Dave Lee</a> fixed link in
the README.</li>
<li><a href="https://github.com/Klaim">Joël Lamotte</a> added
instruction for using Build2’s package manager.</li>
<li><a href="https://github.com/pauljurczak">Paul Jurczak</a> fixed an
example in the README.</li>
<li><a href="https://github.com/sonulohani">Sonu Lohani</a> fixed a
warning.</li>
<li><a href="https://github.com/gocarlos">Carlos Gomes Martinho</a>
updated the Conan package source.</li>
<li><a href="https://github.com/podsvirov">Konstantin Podsvirov</a>
fixed the MSYS2 package documentation.</li>
<li><a href="https://github.com/Tridacnid">Tridacnid</a> improved the
CMake tests.</li>
<li><a href="https://github.com/MBalszun">Michael</a> fixed MSVC
warnings.</li>
<li><a href="https://github.com/quentin-dev">Quentin Barbarat</a> fixed
an example in the documentation.</li>
<li><a href="https://github.com/XyFreak">XyFreak</a> fixed a compiler
warning.</li>
<li><a href="https://github.com/TotalCaesar659">TotalCaesar659</a> fixed
links in the README.</li>
<li><a href="https://github.com/tanuj208">Tanuj Garg</a> improved the
fuzzer coverage for UBSAN input.</li>
<li><a href="https://github.com/AODQ">AODQ</a> fixed a compiler
warning.</li>
<li><a href="https://github.com/jwittbrodt">jwittbrodt</a> made
<code>NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE</code> inline.</li>
<li><a href="https://github.com/pfeatherstone">pfeatherstone</a>
improved the upper bound of arguments of the
<code>NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE</code>/<code>NLOHMANN_DEFINE_TYPE_INTRUSIVE</code>
macros.</li>
<li><a href="https://github.com/jprochazk">Jan Procházka</a> fixed a bug
in the CBOR parser for binary and string values.</li>
<li><a href="https://github.com/T0b1-iOS">T0b1-iOS</a> fixed a bug in
the new hash implementation.</li>
<li><a href="https://github.com/matthewbauer">Matthew Bauer</a> adjusted
the CBOR writer to create tags for binary subtypes.</li>
<li><a href="https://github.com/gatopeich">gatopeich</a> implemented an
ordered map container for <code>nlohmann::ordered_json</code>.</li>
<li><a href="https://github.com/ericonr">Érico Nogueira Rolim</a> added
support for pkg-config.</li>
<li><a href="https://github.com/KonanM">KonanM</a> proposed an
implementation for the
<code>NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE</code>/<code>NLOHMANN_DEFINE_TYPE_INTRUSIVE</code>
macros.</li>
<li><a href="https://github.com/gracicot">Guillaume Racicot</a>
implemented <code>string_view</code> support and allowed C++20
support.</li>
<li><a href="https://github.com/alexreinking">Alex Reinking</a> improved
CMake support for <code>FetchContent</code>.</li>
<li><a href="https://github.com/ssbssa">Hannes Domani</a> provided a GDB
pretty printer.</li>
<li>Lars Wirzenius reviewed the README file.</li>
<li><a href="https://github.com/ongjunjie">Jun Jie</a> fixed a compiler
path in the CMake scripts.</li>
<li><a href="https://github.com/rbuch">Ronak Buch</a> fixed typos in the
documentation.</li>
<li><a href="https://github.com/karzhenkov">Alexander Karzhenkov</a>
fixed a move constructor and the Travis builds.</li>
<li><a href="https://github.com/leozz37">Leonardo Lima</a> added
CPM.Cmake support.</li>
<li><a href="https://github.com/jbzdarkid">Joseph Blackman</a> fixed a
warning.</li>
<li><a href="https://github.com/YarikTH">Yaroslav</a> updated doctest
and implemented unit tests.</li>
<li><a href="https://github.com/globberwops">Martin Stump</a> fixed a
bug in the CMake files.</li>
<li><a href="https://github.com/jasujm">Jaakko Moisio</a> fixed a bug in
the input adapters.</li>
<li><a href="https://github.com/bl-ue">bl-ue</a> fixed some Markdown
issues in the README file.</li>
<li><a href="https://github.com/wawiesel">William A. Wieselquist</a>
fixed an example from the README.</li>
<li><a href="https://github.com/abbaswasim">abbaswasim</a> fixed an
example from the README.</li>
<li><a href="https://github.com/remyjette">Remy Jette</a> fixed a
warning.</li>
<li><a href="https://github.com/frasermarlow">Fraser</a> fixed the
documentation.</li>
<li><a href="https://github.com/musicinmybrain">Ben Beasley</a> updated
doctest.</li>
<li><a href="https://github.com/doronbehar">Doron Behar</a> fixed
pkg-config.pc.</li>
<li><a href="https://github.com/raduteo">raduteo</a> fixed a
warning.</li>
<li><a href="https://github.com/theShmoo">David Pfahler</a> added the
possibility to compile the library without I/O support.</li>
<li><a href="https://github.com/mortenfyhn">Morten Fyhn Amundsen</a>
fixed a typo.</li>
<li><a href="https://github.com/jpl-mac">jpl-mac</a> allowed to treat
the library as a system header in CMake.</li>
<li><a href="https://github.com/jasmcaus">Jason Dsouza</a> fixed the
indentation of the CMake file.</li>
<li><a href="https://github.com/offa">offa</a> added a link to Conan
Center to the documentation.</li>
<li><a href="https://github.com/TotalCaesar659">TotalCaesar659</a>
updated the links in the documentation to use HTTPS.</li>
<li><a href="https://github.com/grafail">Rafail Giavrimis</a> fixed the
Google Benchmark default branch.</li>
<li><a href="https://github.com/ldionne">Louis Dionne</a> fixed a
conversion operator.</li>
<li><a
href="https://github.com/justanotheranonymoususer">justanotheranonymoususer</a>
made the examples in the README more consistent.</li>
<li><a href="https://github.com/Finkman">Finkman</a> suppressed some
<code>-Wfloat-equal</code> warnings.</li>
<li><a href="https://github.com/fhuberts">Ferry Huberts</a> fixed
<code>-Wswitch-enum</code> warnings.</li>
<li><a href="https://github.com/senyai">Arseniy Terekhin</a> made the
GDB pretty-printer robust against unset variable names.</li>
<li><a href="https://github.com/amirmasoudabdol">Amir Masoud Abdol</a>
updated the Homebrew command as nlohmann/json is now in
homebrew-core.</li>
<li><a href="https://github.com/Hallot">Hallot</a> fixed some
<code>-Wextra-semi-stmt warnings</code>.</li>
<li><a href="https://github.com/gcerretani">Giovanni Cerretani</a> fixed
<code>-Wunused</code> warnings on <code>JSON_DIAGNOSTICS</code>.</li>
<li><a href="https://github.com/Kapeli">Bogdan Popescu</a> hosts the <a
href="https://github.com/Kapeli/Dash-User-Contributions/tree/master/docsets/JSON_for_Modern_C%2B%2B">docset</a>
for offline documentation viewers.</li>
<li><a href="https://github.com/carlsmedstad">Carl Smedstad</a> fixed an
assertion error when using <code>JSON_DIAGNOSTICS</code>.</li>
<li><a href="https://github.com/miikka75">miikka75</a> provided an
important fix to compile C++17 code with Clang 9.</li>
<li><a href="https://github.com/kernie">Maarten Becker</a> fixed a
warning for shadowed variables.</li>
<li><a href="https://github.com/axnsan12">Cristi Vîjdea</a> fixed typos
in the <code>operator[]</code> documentation.</li>
<li><a href="https://github.com/axic">Alex Beregszaszi</a> fixed
spelling mistakes in comments.</li>
<li><a href="https://github.com/striezel">Dirk Stolle</a> fixed typos in
documentation.</li>
<li><a href="https://github.com/daniel-kun">Daniel Albuschat</a>
corrected the parameter name in the <code>parse</code>
documentation.</li>
<li><a href="https://github.com/Prince-Mendiratta">Prince Mendiratta</a>
fixed a link to the FAQ.</li>
<li><a href="https://github.com/falbrechtskirchinger">Florian
Albrechtskirchinger</a> implemented <code>std::string_view</code>
support for object keys and made dozens of other improvements.</li>
<li><a href="https://github.com/fangq">Qianqian Fang</a> implemented the
Binary JData (BJData) format.</li>
<li><a href="https://github.com/pketelsen">pketelsen</a> added macros
<code>NLOHMANN_DEFINE_TYPE_INTRUSIVE_WITH_DEFAULT</code> and
<code>NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE_WITH_DEFAULT</code>.</li>
<li><a href="https://github.com/DarkZeros">DarkZeros</a> adjusted to
code to not clash with Arduino defines.</li>
<li><a href="https://github.com/flagarde">flagarde</a> fixed the output
of <code>meta()</code> for MSVC.</li>
<li><a href="https://github.com/gcerretani">Giovanni Cerretani</a> fixed
a check for <code>std::filesystem</code>.</li>
<li><a href="https://github.com/rex4539">Dimitris Apostolou</a> fixed a
typo.</li>
<li><a href="https://github.com/fhuberts">Ferry Huberts</a> fixed a
typo.</li>
<li><a href="https://github.com/heinemml">Michael Nosthoff</a> fixed a
typo.</li>
<li><a href="https://github.com/jhnlee">JungHoon Lee</a> fixed a
typo.</li>
<li><a href="https://github.com/fdiblen">Faruk D.</a> fixed the
CITATION.CFF file.</li>
<li><a href="https://github.com/puffetto">Andrea Cocito</a> added a
clarification on macro usage to the documentation.</li>
<li><a href="https://github.com/kkarbowiak">Krzysiek Karbowiak</a>
refactored the tests to use <code>CHECK_THROWS_WITH_AS</code>.</li>
<li><a href="https://github.com/prncoprs">Chaoqi Zhang</a> fixed a
typo.</li>
<li><a href="https://github.com/ivanovmp">ivanovmp</a> fixed a
whitespace error.</li>
<li><a href="https://github.com/KsaNL">KsaNL</a> fixed a build error
when including <code>&lt;windows.h&gt;</code>.</li>
<li><a href="https://github.com/Tachi107">Andrea Pappacoda</a> moved
<code>.pc</code> and <code>.cmake</code> files to <code>share</code>
directory.</li>
<li><a href="https://github.com/wolfv">Wolf Vollprecht</a> added the
<code>patch_inplace</code> function.</li>
<li><a href="https://github.com/jez">Jake Zimmerman</a> highlighted
common usage patterns in the README file.</li>
<li><a href="https://github.com/NN---">NN</a> added the Visual Studio
output directory to <code>.gitignore</code>.</li>
<li><a href="https://github.com/romainreignier">Romain Reignier</a>
improved the performance the vector output adapter.</li>
<li><a href="https://github.com/Mike-Leo-Smith">Mike</a> fixed the
<code>std::iterator_traits</code>.</li>
<li><a href="https://github.com/zxey">Richard Hozák</a> added macro
<code>JSON_NO_ENUM</code> to disable default enum conversions.</li>
<li><a href="https://github.com/vakokako">vakokako</a> fixed tests when
compiling with C++20.</li>
<li><a href="https://github.com/alexweej">Alexander “weej” Jones</a>
fixed an example in the README.</li>
<li><a href="https://github.com/eli-schwartz">Eli Schwartz</a> added
more files to the <code>include.zip</code> archive.</li>
<li><a href="https://github.com/kevinlul">Kevin Lu</a> fixed a
compilation issue when typedefs with certain names were present.</li>
<li><a href="https://github.com/luxe">Trevor Hickey</a> improved the
description of an example.</li>
<li><a href="https://github.com/jef">Jef LeCompte</a> updated the year
in the README file.</li>
<li><a href="https://github.com/ahamez">Alexandre Hamez</a> fixed a
warning.</li>
<li><a href="https://github.com/mbadhan">Maninderpal Badhan</a> fixed a
typo.</li>
<li><a href="https://github.com/kevin--">kevin–</a> added a note to an
example in the README file.</li>
<li><a href="https://github.com/wx257osn2">I</a> fixed a typo.</li>
<li><a href="https://github.com/Lord-Kamina">Gregorio Litenstein</a>
fixed the Clang detection.</li>
<li><a href="https://github.com/andoma">Andreas Smas</a> added a Doozer
badge.</li>
<li><a href="https://github.com/wancw">WanCW</a> fixed the string
conversion with Clang.</li>
<li><a href="https://github.com/zhaohuaxishi">zhaohuaxishi</a> fixed a
Doxygen error.</li>
<li><a href="https://github.com/emvivre">emvivre</a> removed an invalid
parameter from CMake.</li>
<li><a href="https://github.com/Dobiasd">Tobias Hermann</a> fixed a link
in the README file.</li>
<li><a href="https://github.com/traits">Michael</a> fixed a
warning.</li>
<li><a href="https://github.com/ryanjmulder">Ryan Mulder</a> added
<code>ensure_ascii</code> to the <code>dump</code> function.</li>
<li><a href="https://github.com/murinicanor">Muri Nicanor</a> fixed the
<code>sed</code> discovery in the Makefile.</li>
<li><a href="https://github.com/dgavedissian">David Avedissian</a>
implemented SFINAE-friendly <code>iterator_traits</code>.</li>
<li><a href="https://github.com/aqnouch">AQNOUCH Mohammed</a> fixed a
typo in the README.</li>
<li><a href="https://github.com/garethsb">Gareth Sylvester-Bradley</a>
added <code>operator/=</code> and <code>operator/</code> to construct
JSON pointers.</li>
<li><a href="https://github.com/mykter">Michael Macnair</a> added
support for afl-fuzz testing.</li>
<li><a href="https://github.com/berkus">Berkus Decker</a> fixed a typo
in the README.</li>
<li><a href="https://github.com/effolkronium">Illia Polishchuk</a>
improved the CMake testing.</li>
<li><a href="https://github.com/eltociear">Ikko Ashimine</a> fixed a
typo.</li>
<li><a href="https://github.com/barcode">Raphael Grimm</a> added the
possibility to define a custom base class.</li>
<li><a href="https://github.com/tocic">tocic</a> fixed typos in the
documentation.</li>
<li><a href="https://github.com/Vertexwahn">Vertexwahn</a> added Bazel
build support.</li>
<li><a href="https://github.com/striezel">Dirk Stolle</a> fixed typos in
the documentation.</li>
<li><a href="https://github.com/DavidKorczynski">DavidKorczynski</a>
added a CIFuzz CI GitHub action.</li>
<li><a href="https://github.com/Finkman">Finkman</a> fixed the debug
pretty-printer.</li>
<li><a href="https://github.com/floriansegginger">Florian Segginger</a>
bumped the years in the README.</li>
<li><a href="https://github.com/haadfida">haadfida</a> cleaned up the
badges of used services.</li>
<li><a href="https://github.com/ArsenArsen">Arsen Arsenović</a> fixed a
build error.</li>
<li><a href="https://github.com/theevilone45">theevilone45</a> fixed a
typo in a CMake file.</li>
<li><a href="https://github.com/trofi">Sergei Trofimovich</a> fixed the
custom allocator support.</li>
<li><a href="https://github.com/joycebrum">Joyce</a> fixed some security
issues in the GitHub workflows.</li>
<li><a href="https://github.com/njakob">Nicolas Jakob</a> add vcpkg
version badge.</li>
<li><a href="https://github.com/Tomerkm">Tomerkm</a> added tests.</li>
<li><a href="https://github.com/tusooa">No.</a> fixed the use of
<code>get&lt;&gt;</code> calls.</li>
<li><a href="https://github.com/tarolling">taro</a> fixed a typo in the
<code>CODEOWNERS</code> file.</li>
<li><a href="https://github.com/eltociear">Ikko Eltociear Ashimine</a>
fixed a typo.</li>
<li><a href="https://github.com/felixonmars">Felix Yan</a> fixed a typo
in the README.</li>
<li><a href="https://github.com/HO-COOH">HO-COOH</a> fixed a parentheses
in the documentation.</li>
<li><a href="https://github.com/iwanders">Ivor Wanders</a> fixed the
examples to catch exception by <code>const&amp;</code>.</li>
<li><a href="https://github.com/miny1233">miny1233</a> fixed a
parentheses in the documentation.</li>
<li><a href="https://github.com/tomalakgeretkal">tomalakgeretkal</a>
fixed a compilation error.</li>
<li><a href="https://github.com/ALF-ONE">alferov</a> fixed a compilation
error.</li>
<li><a href="https://github.com/craigscott-crascit">Craig Scott</a>
fixed a deprecation warning in CMake.</li>
<li><a href="https://github.com/ZeronSix">Vyacheslav Zhdanovskiy</a>
added macros for serialization-only types.</li>
<li><a href="https://github.com/mwestphal">Mathieu Westphal</a> fixed
typos.</li>
<li><a href="https://github.com/scribam">scribam</a> fixed the MinGW
workflow.</li>
<li><a href="https://github.com/aleksproger">Aleksei Sapitskii</a> added
support for Apple’s Swift Package Manager.</li>
<li><a href="https://github.com/bebuch">Benjamin Buch</a> fixed the
installation path in CMake.</li>
<li><a href="https://github.com/colbychaskell">Colby Haskell</a>
clarified the parse error message in case a file cannot be opened.</li>
<li><a href="https://github.com/TheJCAB">Juan Carlos Arevalo Baeza</a>
fixed the enum conversion.</li>
<li><a href="https://github.com/ALF-ONE">alferov</a> fixed a version in
the documentation.</li>
<li><a href="https://github.com/serge-s">ss</a> fixed the amalgamation
call.</li>
<li><a href="https://github.com/AniketDhemare">AniketDhemare</a> fixed a
version in the documentation.</li>
<li><a href="https://github.com/philip-paul-mueller">Philip Müller</a>
fixed an example.</li>
<li><a href="https://github.com/LeilaShcheglova">Leila Shcheglova</a>
fixed a warning in a test.</li>
<li><a href="https://github.com/alexprabhat99">Alex Prabhat Bara</a>
fixed a function name in the documentation.</li>
<li><a href="https://github.com/laterlaugh">laterlaugh</a> fixed some
typos.</li>
<li><a href="https://github.com/MrJia1997">Yuanhao Jia</a> fixed the GDB
pretty printer.</li>
<li><a href="https://github.com/Fallen-Breath">Fallen_Breath</a> fixed
an example for JSON Pointer.</li>
<li><a href="https://github.com/tsnl">Nikhil Idiculla</a> fixed some
typos.</li>
<li><a href="https://github.com/gmyers18">Griffin Myers</a> updated the
Natvis file.</li>
<li><a href="https://github.com/thetimr">thetimr</a> fixed a typo in the
documentation.</li>
<li><a href="https://github.com/zerocukor287">Balazs Erseki</a> fixed a
URL in the contribution guidelines.</li>
<li><a href="https://github.com/rotolof">Niccolò Iardella</a> added
<code>NLOHMANN_DEFINE_DERIVED_TYPE_*</code> macros.</li>
<li><a href="https://github.com/iboB">Borislav Stanimirov</a> allowed
overriding the CMake target name.</li>
<li><a href="https://github.com/captaincrutches">Captain Crutches</a>
made <code>iterator_proxy_value</code> a
<code>std::forward_iterator</code>.</li>
<li><a href="https://github.com/fsandhei">Fredrik Sandhei</a> added type
conversion support for <code>std::optional</code>.</li>
<li><a href="https://github.com/jordan-hoang">jh96</a> added exceptions
when <code>nullptr</code> is passed to <code>parse</code>.</li>
<li><a href="https://github.com/StuartGorman">Stuart Gorman</a> fixed
number parsing when <code>EINTR</code> set in <code>errno</code>.</li>
<li><a href="https://github.com/dcbaker">Dylan Baker</a> generated a
pkg-config file that follows the pkg-config conventions.</li>
<li><a href="https://github.com/TianyiChen">Tianyi Chen</a> optimized
the binary <code>get_number</code> implementation.</li>
<li><a href="https://github.com/peng-wang-cn">peng-wang-cn</a> added
type conversion support for multidimensional arrays.</li>
<li><a href="https://github.com/EinarsNG">Einars Netlis-Galejs</a> added
<code>ONLY_SERIALIZE</code> for
<code>NLOHMANN_DEFINE_DERIVED_TYPE_*</code> macros.</li>
<li><a href="https://github.com/mering">Marcel</a> removed
<code>alwayslink=True</code> Bazel flag.</li>
<li><a href="https://github.com/hnampally">Harinath Nampally</a> added
diagnostic positions to exceptions.</li>
<li><a href="https://github.com/NissimBendanan">Nissim Armand Ben
Danan</a> fixed <code>NLOHMANN_DEFINE_TYPE_INTRUSIVE_WITH_DEFAULT</code>
with an empty JSON instance.</li>
<li><a href="https://github.com/codenut">Michael Valladolid</a> added
support for BSON uint64 serialization/deserialization.</li>
<li><a href="https://github.com/nikhilreddydev">Nikhil</a> updated the
documentation.</li>
<li><a href="https://github.com/nebkat">Nebojša Cvetković</a> added
support for BJDATA optimized binary array type.</li>
<li><a href="https://github.com/sushshring">Sushrut Shringarputale</a>
added support for diagnostic positions.</li>
<li><a href="https://github.com/kimci86">kimci86</a> templated to
<code>NLOHMANN_DEFINE_TYPE</code> macros to also support
<code>ordered_json</code>.</li>
<li><a href="https://github.com/richardtop">Richard Topchii</a> added
support for VisionOS in the Swift Package Manager.</li>
<li><a href="https://github.com/Robadob">Robert Chisholm</a> fixed a
typo.</li>
<li><a href="https://github.com/zjyhjqs">zjyhjqs</a> added CPack
support.</li>
<li><a href="https://github.com/bitFiedler">bitFiedler</a> made GDB
pretty printer work with Python 3.8.</li>
<li><a href="https://github.com/LocutusOfBorg">Gianfranco Costamagna</a>
fixed a compiler warning.</li>
<li><a href="https://github.com/risa2000">risa2000</a> made
<code>std::filesystem::path</code> conversion to/from UTF-8 encoded
string explicit.</li>
</ol>
<p>Thanks a lot for helping out! Please <a
href="mailto:mail@nlohmann.me">let me know</a> if I forgot someone.</p>
<h2 id="used-third-party-tools">Used third-party tools</h2>
<p>The library itself consists of a single header file licensed under
the MIT license. However, it is built, tested, documented, and whatnot
using a lot of third-party tools and services. Thanks a lot!</p>
<ul>
<li><a href="https://github.com/edlund/amalgamate"><strong>amalgamate.py
- Amalgamate C source and header files</strong></a> to create a single
header file</li>
<li><a href="https://lcamtuf.coredump.cx/afl/"><strong>American fuzzy
lop</strong></a> for fuzz testing</li>
<li><a href="https://www.appveyor.com"><strong>AppVeyor</strong></a> for
<a href="https://ci.appveyor.com/project/nlohmann/json">continuous
integration</a> on Windows</li>
<li><a href="http://astyle.sourceforge.net"><strong>Artistic
Style</strong></a> for automatic source code indentation</li>
<li><a href="https://clang.llvm.org"><strong>Clang</strong></a> for
compilation with code sanitizers</li>
<li><a href="https://cmake.org"><strong>CMake</strong></a> for build
automation</li>
<li><a href="https://www.codacy.com"><strong>Codacy</strong></a> for
further <a href="https://app.codacy.com/gh/nlohmann/json/dashboard">code
analysis</a></li>
<li><a href="https://coveralls.io"><strong>Coveralls</strong></a> to
measure <a href="https://coveralls.io/github/nlohmann/json">code
coverage</a></li>
<li><a href="https://scan.coverity.com"><strong>Coverity
Scan</strong></a> for <a
href="https://scan.coverity.com/projects/nlohmann-json">static
analysis</a></li>
<li><a
href="http://cppcheck.sourceforge.net"><strong>cppcheck</strong></a> for
static analysis</li>
<li><a
href="https://github.com/onqtam/doctest"><strong>doctest</strong></a>
for the unit tests</li>
<li><a
href="https://github.com/skywinder/github-changelog-generator"><strong>GitHub
Changelog Generator</strong></a> to generate the <a
href="https://github.com/nlohmann/json/blob/develop/ChangeLog.md">ChangeLog</a></li>
<li><a href="https://github.com/google/benchmark"><strong>Google
Benchmark</strong></a> to implement the benchmarks</li>
<li><a
href="https://nemequ.github.io/hedley/"><strong>Hedley</strong></a> to
avoid re-inventing several compiler-agnostic feature macros</li>
<li><a
href="https://github.com/linux-test-project/lcov"><strong>lcov</strong></a>
to process coverage information and create an HTML view</li>
<li><a
href="https://llvm.org/docs/LibFuzzer.html"><strong>libFuzzer</strong></a>
to implement fuzz testing for OSS-Fuzz</li>
<li><a
href="https://squidfunk.github.io/mkdocs-material/"><strong>Material for
MkDocs</strong></a> for the style of the documentation site</li>
<li><a href="https://www.mkdocs.org"><strong>MkDocs</strong></a> for the
documentation site</li>
<li><a
href="https://github.com/google/oss-fuzz"><strong>OSS-Fuzz</strong></a>
for continuous fuzz testing of the library (<a
href="https://github.com/google/oss-fuzz/tree/master/projects/json">project
repository</a>)</li>
<li><a href="https://probot.github.io"><strong>Probot</strong></a> for
automating maintainer tasks such as closing stale issues, requesting
missing information, or detecting toxic comments.</li>
<li><a href="https://valgrind.org"><strong>Valgrind</strong></a> to
check for correct memory management</li>
</ul>
<h2 id="notes">Notes</h2>
<h3 id="character-encoding">Character encoding</h3>
<p>The library supports <strong>Unicode input</strong> as follows:</p>
<ul>
<li>Only <strong>UTF-8</strong> encoded input is supported which is the
default encoding for JSON according to <a
href="https://tools.ietf.org/html/rfc8259.html#section-8.1">RFC
8259</a>.</li>
<li><code>std::u16string</code> and <code>std::u32string</code> can be
parsed, assuming UTF-16 and UTF-32 encoding, respectively. These
encodings are not supported when reading from files or other input
containers.</li>
<li>Other encodings such as Latin-1 or ISO 8859-1 are
<strong>not</strong> supported and will yield parse or serialization
errors.</li>
<li><a
href="https://www.unicode.org/faq/private_use.html#nonchar1">Unicode
noncharacters</a> will not be replaced by the library.</li>
<li>Invalid surrogates (e.g., incomplete pairs such as
<code>\uDEAD</code>) will yield parse errors.</li>
<li>The strings stored in the library are UTF-8 encoded. When using the
default string type (<code>std::string</code>), note that its
length/size functions return the number of stored bytes rather than the
number of characters or glyphs.</li>
<li>When you store strings with different encodings in the library,
calling <a
href="https://json.nlohmann.me/api/basic_json/dump/"><code>dump()</code></a>
may throw an exception unless
<code>json::error_handler_t::replace</code> or
<code>json::error_handler_t::ignore</code> are used as error
handlers.</li>
<li>To store wide strings (e.g., <code>std::wstring</code>), you need to
convert them to a UTF-8 encoded <code>std::string</code> before, see <a
href="https://json.nlohmann.me/home/faq/#wide-string-handling">an
example</a>.</li>
</ul>
<h3 id="comments-in-json">Comments in JSON</h3>
<p>This library does not support comments by default. It does so for
three reasons:</p>
<ol type="1">
<li><p>Comments are not part of the <a
href="https://tools.ietf.org/html/rfc8259">JSON specification</a>. You
may argue that <code>//</code> or <code>/* */</code> are allowed in
JavaScript, but JSON is not JavaScript.</p></li>
<li><p>This was not an oversight: Douglas Crockford <a
href="https://plus.google.com/118095276221607585885/posts/RK8qyGVaGSr">wrote
on this</a> in May 2012:</p>
<blockquote>
<p>I removed comments from JSON because I saw people were using them to
hold parsing directives, a practice which would have destroyed
interoperability. I know that the lack of comments makes some people
sad, but it shouldn’t.</p>
<p>Suppose you are using JSON to keep configuration files, which you
would like to annotate. Go ahead and insert all the comments you like.
Then pipe it through JSMin before handing it to your JSON parser.</p>
</blockquote></li>
<li><p>It is dangerous for interoperability if some libraries would add
comment support while others don’t. Please check <a
href="https://tools.ietf.org/html/draft-iab-protocol-maintenance-01">The
Harmful Consequences of the Robustness Principle</a> on this.</p></li>
</ol>
<p>However, you can pass set parameter <code>ignore_comments</code> to
true in the <code>parse</code> function to ignore <code>//</code> or
<code>/* */</code> comments. Comments will then be treated as
whitespace.</p>
<h3 id="order-of-object-keys">Order of object keys</h3>
<p>By default, the library does not preserve the <strong>insertion order
of object elements</strong>. This is standards-compliant, as the <a
href="https://tools.ietf.org/html/rfc8259.html">JSON standard</a>
defines objects as “an unordered collection of zero or more name/value
pairs”.</p>
<p>If you do want to preserve the insertion order, you can try the type
<a
href="https://github.com/nlohmann/json/issues/2179"><code>nlohmann::ordered_json</code></a>.
Alternatively, you can use a more sophisticated ordered map like <a
href="https://github.com/Tessil/ordered-map"><code>tsl::ordered_map</code></a>
(<a
href="https://github.com/nlohmann/json/issues/546#issuecomment-304447518">integration</a>)
or <a
href="https://github.com/nlohmann/fifo_map"><code>nlohmann::fifo_map</code></a>
(<a
href="https://github.com/nlohmann/json/issues/485#issuecomment-333652309">integration</a>).</p>
<p>See the <a
href="https://json.nlohmann.me/features/object_order/"><strong>documentation
on object order</strong></a> for more information.</p>
<h3 id="memory-release">Memory Release</h3>
<p>We checked with Valgrind and the Address Sanitizer (ASAN) that there
are no memory leaks.</p>
<p>If you find that a parsing program with this library does not release
memory, please consider the following case, and it may be unrelated to
this library.</p>
<p><strong>Your program is compiled with glibc.</strong> There is a
tunable threshold that glibc uses to decide whether to actually return
memory to the system or whether to cache it for later reuse. If in your
program you make lots of small allocations and those small allocations
are not a contiguous block and are presumably below the threshold, then
they will not get returned to the OS. Here is a related issue <a
href="https://github.com/nlohmann/json/issues/1924">#1924</a>.</p>
<h3 id="further-notes">Further notes</h3>
<ul>
<li>The code contains numerous debug <strong>assertions</strong> which
can be switched off by defining the preprocessor macro
<code>NDEBUG</code>, see the <a
href="https://en.cppreference.com/w/cpp/error/assert">documentation of
<code>assert</code></a>. In particular, note <a
href="https://json.nlohmann.me/api/basic_json/operator%5B%5D/"><code>operator[]</code></a>
implements <strong>unchecked access</strong> for const objects: If the
given key is not present, the behavior is undefined (think of a
dereferenced null pointer) and yields an <a
href="https://github.com/nlohmann/json/issues/289">assertion failure</a>
if assertions are switched on. If you are not sure whether an element in
an object exists, use checked access with the <a
href="https://json.nlohmann.me/api/basic_json/at/"><code>at()</code>
function</a>. Furthermore, you can define <code>JSON_ASSERT(x)</code> to
replace calls to <code>assert(x)</code>. See the <a
href="https://json.nlohmann.me/features/assertions/"><strong>documentation
on runtime assertions</strong></a> for more information.</li>
<li>As the exact number type is not defined in the <a
href="https://tools.ietf.org/html/rfc8259.html">JSON specification</a>,
this library tries to choose the best fitting C++ number type
automatically. As a result, the type <code>double</code> may be used to
store numbers which may yield <a
href="https://github.com/nlohmann/json/issues/181"><strong>floating-point
exceptions</strong></a> in certain rare situations if floating-point
exceptions have been unmasked in the calling code. These exceptions are
not caused by the library and need to be fixed in the calling code, such
as by re-masking the exceptions prior to calling library functions.</li>
<li>The code can be compiled without C++ <strong>runtime type
identification</strong> features; that is, you can use the
<code>-fno-rtti</code> compiler flag.</li>
<li><strong>Exceptions</strong> are used widely within the library. They
can, however, be switched off with either using the compiler flag
<code>-fno-exceptions</code> or by defining the symbol
<code>JSON_NOEXCEPTION</code>. In this case, exceptions are replaced by
<code>abort()</code> calls. You can further control this behavior by
defining <code>JSON_THROW_USER</code> (overriding <code>throw</code>),
<code>JSON_TRY_USER</code> (overriding <code>try</code>), and
<code>JSON_CATCH_USER</code> (overriding <code>catch</code>). Note that
<code>JSON_THROW_USER</code> should leave the current scope (e.g., by
throwing or aborting), as continuing after it may yield undefined
behavior. Note the explanatory <a
href="https://en.cppreference.com/w/cpp/error/exception/what"><code>what()</code></a>
string of exceptions is not available for MSVC if exceptions are
disabled, see <a
href="https://github.com/nlohmann/json/discussions/2824">#2824</a>. See
the <a
href="https://json.nlohmann.me/home/exceptions/"><strong>documentation
of exceptions</strong></a> for more information.</li>
</ul>
<h2 id="execute-unit-tests">Execute unit tests</h2>
<p>To compile and run the tests, you need to execute</p>
<pre class="shell"><code>mkdir build
cd build
cmake .. -DJSON_BuildTests=On
cmake --build .
ctest --output-on-failure</code></pre>
<p>Note that during the <code>ctest</code> stage, several JSON test
files are downloaded from an <a
href="https://github.com/nlohmann/json_test_data">external
repository</a>. If policies forbid downloading artifacts during testing,
you can download the files yourself and pass the directory with the test
files via <code>-DJSON_TestDataDirectory=path</code> to CMake. Then, no
Internet connectivity is required. See <a
href="https://github.com/nlohmann/json/issues/2189">issue #2189</a> for
more information.</p>
<p>If the test suite is not found, several test suites will fail like
this:</p>
<pre><code>===============================================================================
json/tests/src/make_test_data_available.hpp:21:
TEST CASE:  check test suite is downloaded

json/tests/src/make_test_data_available.hpp:23: FATAL ERROR: REQUIRE( utils::check_testsuite_downloaded() ) is NOT correct!
  values: REQUIRE( false )
  logged: Test data not found in &#39;json/cmake-build-debug/json_test_data&#39;.
          Please execute target &#39;download_test_data&#39; before running this test suite.
          See &lt;https://github.com/nlohmann/json#execute-unit-tests&gt; for more information.

===============================================================================</code></pre>
<p>In case you have downloaded the library rather than checked out the
code via Git, test <code>cmake_fetch_content_configure</code> will fail.
Please execute <code>ctest -LE git_required</code> to skip these tests.
See <a href="https://github.com/nlohmann/json/issues/2189">issue
#2189</a> for more information.</p>
<p>Some tests change the installed files and hence make the whole
process not reproducible. Please execute
<code>ctest -LE not_reproducible</code> to skip these tests. See <a
href="https://github.com/nlohmann/json/issues/2324">issue #2324</a> for
more information. Furthermore, assertions must be switched off to ensure
reproducible builds (see <a
href="https://github.com/nlohmann/json/discussions/4494">discussion
4494</a>).</p>
<p>Note you need to call
<code>cmake -LE "not_reproducible|git_required"</code> to exclude both
labels. See <a href="https://github.com/nlohmann/json/issues/2596">issue
#2596</a> for more information.</p>
<p>As Intel compilers use unsafe floating point optimization by default,
the unit tests may fail. Use flag <a
href="https://www.intel.com/content/www/us/en/docs/cpp-compiler/developer-guide-reference/2021-8/fp-model-fp.html"><code>/fp:precise</code></a>
then.</p>
