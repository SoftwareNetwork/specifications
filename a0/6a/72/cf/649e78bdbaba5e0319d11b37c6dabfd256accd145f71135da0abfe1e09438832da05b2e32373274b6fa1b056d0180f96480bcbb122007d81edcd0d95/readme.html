<h1 id="opensubdiv">OpenSubdiv</h1>
<p>OpenSubdiv is a set of open source libraries that implement high
performance subdivision surface (subdiv) evaluation on massively
parallel CPU and GPU architectures. This codepath is optimized for
drawing deforming subdivs with static topology at interactive
framerates. The resulting limit surface matches Pixar’s Renderman to
numerical precision.</p>
<p>OpenSubdiv is covered by the Apache license, and is free to use for
commercial or non-commercial use. This is the same code that Pixar uses
internally for animated film production. Our intent is to encourage high
performance accurate subdiv drawing by giving away the “good stuff”.</p>
<p>Feel free to use it and let us know what you think.</p>
<p>For more details about OpenSubdiv, see <a
href="http://graphics.pixar.com">Pixar Graphics Technologies</a>.</p>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 26%" />
<col style="width: 26%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">Linux</th>
<th style="text-align: center;">Windows</th>
<th style="text-align: center;">macOS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">dev</td>
<td style="text-align: center;"><a
href="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_build/latest?definitionId=2&amp;branchName=dev"><img
src="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_apis/build/status/PixarAnimationStudios.OpenSubdiv?branchName=dev&amp;jobName=Linux"
alt="Build Status" /></a></td>
<td style="text-align: center;"><a
href="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_build/latest?definitionId=2&amp;branchName=dev"><img
src="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_apis/build/status/PixarAnimationStudios.OpenSubdiv?branchName=dev&amp;jobName=Windows"
alt="Build Status" /></a></td>
<td style="text-align: center;"><a
href="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_build/latest?definitionId=2&amp;branchName=dev"><img
src="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_apis/build/status/PixarAnimationStudios.OpenSubdiv?branchName=dev&amp;jobName=macOS"
alt="Build Status" /></a></td>
</tr>
<tr class="even">
<td style="text-align: center;">release</td>
<td style="text-align: center;"><a
href="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_build/latest?definitionId=2&amp;branchName=release"><img
src="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_apis/build/status/PixarAnimationStudios.OpenSubdiv?branchName=release&amp;jobName=Linux"
alt="Build Status" /></a></td>
<td style="text-align: center;"><a
href="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_build/latest?definitionId=2&amp;branchName=release"><img
src="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_apis/build/status/PixarAnimationStudios.OpenSubdiv?branchName=release&amp;jobName=Windows"
alt="Build Status" /></a></td>
<td style="text-align: center;"><a
href="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_build/latest?definitionId=2&amp;branchName=release"><img
src="https://dev.azure.com/PixarAnimationStudios/OpenSubdiv/_apis/build/status/PixarAnimationStudios.OpenSubdiv?branchName=release&amp;jobName=macOS"
alt="Build Status" /></a></td>
</tr>
</tbody>
</table>
<h2 id="documents">Documents</h2>
<ul>
<li><a href="http://graphics.pixar.com/opensubdiv/docs/intro.html">User
Documents</a></li>
<li><a
href="http://graphics.pixar.com/opensubdiv/docs/doxy_html/index.html">Doxygen
API Documents</a></li>
<li><a
href="http://graphics.pixar.com/opensubdiv/docs/release_notes.html">Release
Notes</a></li>
</ul>
<h2 id="forum">Forum</h2>
<ul>
<li><a
href="https://groups.google.com/forum/embed/?place=forum/opensubdiv">OpenSubdiv
Google Groups</a></li>
</ul>
<h2 id="prerequisites-and-building">Prerequisites and Building</h2>
<p>The OpenSubdiv core libraries are implemented in C++ with no
dependencies other than the C++ standard library.</p>
<p>The OpenSubdiv::Osd library contains additional conditionally
compiled components which use specific external CPU and GPU APIs for
evaluation and display and there are also optional interactive examples.
Some of these optional aspects are enabled by default but can be
disabled while configuring the OpenSubdiv build.</p>
<p>For complete information, please see: <a
href="http://graphics.pixar.com/opensubdiv/docs/cmake_build.html">Building
with CMake</a></p>
<h2 id="versions">Versions</h2>
<p>These are the versions of external dependencies used to test the
current release of OpenSubdiv. Generally, OpenSubdiv will also work with
earlier and later versions of these external dependencies, but this
represents versions known to work.</p>
<table>
<colgroup>
<col style="width: 69%" />
<col style="width: 10%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>Core Dependencies</th>
<th>Version</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://www.cmake.org">CMake</a></td>
<td>3.14</td>
<td><em>Required</em></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 69%" />
<col style="width: 10%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>Optional OpenSubdiv::Osd Dependencies</th>
<th>Version</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://www.opengl.org">OpenGL</a></td>
<td>4.1+</td>
<td>OpenGL</td>
</tr>
<tr class="even">
<td><a href="https://developer.apple.com/metal">Metal</a></td>
<td>3+</td>
<td>Metal</td>
</tr>
<tr class="odd">
<td><a href="https://developer.nvidia.com/cuda-toolkit">CUDA</a></td>
<td>12.6</td>
<td>CUDA</td>
</tr>
<tr class="even">
<td><a href="https://github.com/uxlfoundation/oneTBB">TBB</a></td>
<td>2021.12.0</td>
<td>oneTBB</td>
</tr>
<tr class="odd">
<td><a href="https://www.khronos.org/opencl">OpenCL</a></td>
<td>1.1</td>
<td>OpenCL</td>
</tr>
<tr class="even">
<td><a
href="https://www.microsoft.com/en-us/download/details.aspx?id=6812">DirectX11</a></td>
<td>11+</td>
<td>DirectX11</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 69%" />
<col style="width: 10%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>Optional Interactive Example Dependencies</th>
<th>Version</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://www.glfw.org">GLFW</a></td>
<td>3.3.3</td>
<td>OpenGL example viewers</td>
</tr>
<tr class="even">
<td><a href="https://github.com/wdas/ptex">Ptex</a></td>
<td>2.4.2</td>
<td>Ptex example viewers</td>
</tr>
<tr class="odd">
<td><a href="https://www.zlib.net">Zlib</a></td>
<td>1.2.13</td>
<td>Ptex example viewers</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 68%" />
<col style="width: 10%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>Optional Documentation Dependencies</th>
<th>Version</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://www.doxygen.nl">Doxygen</a></td>
<td>1.14.0</td>
<td>C++ API Documentation</td>
</tr>
<tr class="even">
<td><a href="https://pypi.org/project/docutils">Docutils</a></td>
<td>0.21.2</td>
<td>general documentation</td>
</tr>
<tr class="odd">
<td><a href="https://pypi.org/project/Pygments">Pygments</a></td>
<td>2.19</td>
<td>general documentation</td>
</tr>
</tbody>
</table>
<h2
id="building-with-minimal-dependencies-to-run-glviewer-and-other-example-programs">Building
with minimal dependencies to run glViewer and other example
programs</h2>
<h3 id="all-platforms">All platforms:</h3>
<ul>
<li>Install cmake and GLFW</li>
</ul>
<p>make sure GLFW install directories are configured as follows:</p>
<pre><code>   ${GLFW_LOCATION}/include/GLFW/glfw3.h
   ${GLFW_LOCATION}/lib/libglfw3.a (linux)
   ${GLFW_LOCATION}/lib/glfw3.lib (windows)</code></pre>
<ul>
<li>Clone OpenSubdiv repository</li>
</ul>
<pre><code>   git clone https://github.com/PixarAnimationStudios/OpenSubdiv
   cd OpenSubdiv</code></pre>
<h3 id="windows-visual-studio">Windows (Visual Studio)</h3>
<pre><code>cmake -B buildDir ^
      -D CMAKE_INSTALL_PREFIX=instDir ^
      -G &quot;Visual Studio 16 2019&quot; -A x64 ^
      -D NO_PTEX=1 -D NO_DOC=1 ^
      -D NO_OMP=1 -D NO_TBB=1 -D NO_CUDA=1 -D NO_OPENCL=1 -D NO_CLEW=1 ^
      -D &quot;GLFW_LOCATION=C:\path\to\glfw&quot; ^
      -S .

cmake --build buildDir --config Release --target install</code></pre>
<h3 id="linux">Linux</h3>
<pre><code>cmake -B buildDir \
      -D CMAKE_INSTALL_PREFIX=instDir \
      -D NO_PTEX=1 -D NO_DOC=1 \
      -D NO_OMP=1 -D NO_TBB=1 -D NO_CUDA=1 -D NO_OPENCL=1 -D NO_CLEW=1 \
      -D &quot;GLFW_LOCATION=/path/to/glfw&quot; \
      -S .

cmake --build buildDir --config Release --target install</code></pre>
<h3 id="macos">macOS</h3>
<pre><code>cmake -B buildDir \
      -D CMAKE_INSTALL_PREFIX=instDir \
      -G Xcode \
      -D NO_PTEX=1 -D NO_DOC=1 \
      -D NO_OMP=1 -D NO_TBB=1 -D NO_CUDA=1 -D NO_OPENCL=1 -D NO_CLEW=1 \
      -D &quot;GLFW_LOCATION=/path/to/glfw&quot; \
      -S .

cmake --build buildDir --config Release --target install</code></pre>
<h3 id="ios">iOS</h3>
<p>Use CMAKE_SYSTEM_NAME to have CMake use the appropriate
cross-compilation toolchain when building for iOS.</p>
<pre><code>SDKROOT=$(xcrun --sdk iphoneos --show-sdk-path) \
cmake -B buildDir \
      -D CMAKE_INSTALL_PREFIX=instDir \
      -G Xcode \
      -D CMAKE_SYSTEM_NAME=iOS \
      -D NO_PTEX=1 -D NO_DOC=1 \
      -D NO_OMP=1 -D NO_TBB=1 -D NO_CUDA=1 -D NO_OPENCL=1 -D NO_CLEW=1 \
      -D NO_TUTORIALS=1 -D NO_EXAMPLES=1 -D NO_REGRESSION=1 -D NO_OPENGL=1 \
      -S .</code></pre>
<ul>
<li>This will produce an “OpenSubdiv.xcodeproj” that can be opened with
Xcode.</li>
<li>Use
<code>SDKROOT=$(xcrun --sdk iphonesimulator --show-sdk-path)</code>
instead for an iOS-Sim target</li>
</ul>
<h3 id="useful-cmake-options-and-environment-variables">Useful cmake
options and environment variables</h3>
<pre><code>-DCMAKE_BUILD_TYPE=[Debug|Release]

-DCMAKE_INSTALL_PREFIX=[base path to install OpenSubdiv (default: Current directory)]
-DCMAKE_LIBDIR_BASE=[library directory basename (default: lib)]
-DCMAKE_SYSTEM_NAME=[target system name for cross-compilation builds, e.g. iOS]

-DCMAKE_PREFIX_PATH=[semicolon-separated list of directories specifying installation prefixes to be searched by the find_package() command (default: empty list)]

-DCUDA_SDK_ROOT_DIR=[path to CUDA]
-DCUDA_TOOLKIT_ROOT_DIR=[path to CUDA]
-DOSD_CUDA_NVCC_FLAGS=[CUDA options, e.g. --gpu-architecture]

-DGLFW_LOCATION=[path to GLFW for OpenGL example viewers]
-DPTEX_LOCATION=[path to Ptex for Ptex example viewers]

-DNO_LIB=1        // disable the opensubdiv libs build (caveat emptor)
-DNO_EXAMPLES=1   // disable examples build
-DNO_TUTORIALS=1  // disable tutorials build
-DNO_REGRESSION=1 // disable regression tests build
-DNO_PTEX=1       // disable Ptex examples
-DNO_DOC=1        // disable documentation build
-DNO_OMP=1        // disable OpenMP
-DNO_TBB=1        // disable TBB
-DNO_CUDA=1       // disable CUDA
-DNO_OPENCL=1     // disable OpenCL
-DNO_CLEW=1       // disable OpenCL loader library
-DNO_OPENGL=1     // disable OpenGL
-DNO_METAL=1      // disable Metal

-DOSD_PATCH_SHADER_SOURCE_GLSL=1  // GLSL Patch Shader Source
-DOSD_PATCH_SHADER_SOURCE_HLSL=1  // HLSL Patch Shader Source
-DOSD_PATCH_SHADER_SOURCE_MSL=1   // MSL Patch Shader Source</code></pre>
