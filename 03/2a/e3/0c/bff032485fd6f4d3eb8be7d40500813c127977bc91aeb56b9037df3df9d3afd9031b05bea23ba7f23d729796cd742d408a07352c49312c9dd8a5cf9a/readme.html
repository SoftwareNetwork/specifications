<h1 id="cds-c-library">CDS C++ library</h1>
<p><a href="http://badge.fury.io/gh/khizmax%2Flibcds"><img src="https://badge.fury.io/gh/khizmax%2Flibcds.svg" alt="GitHub version" /></a> <a href="https://github.com/khizmax/libcds/blob/master/LICENSE"><img src="https://img.shields.io/:license-boost-blue.svg?style=round-square" alt="License" /></a> <a href="https://travis-ci.org/khizmax/libcds"><img src="https://travis-ci.org/khizmax/libcds.svg?branch=dev" alt="Build Status" /></a> <a href="https://ci.appveyor.com/project/khizmax/libcds"><img src="https://ci.appveyor.com/api/projects/status/github/khizmax/libcds?branch=dev&amp;svg=true" alt="Build status" /></a></p>
<!---
The coverity dataset is about 4G of size and about 1G in compressed state so it is a problem to upload it to the coverity server
[![Coverity Scan Build Status](https://scan.coverity.com/projects/4445/badge.svg)](https://scan.coverity.com/projects/4445)
-->
<p>The Concurrent Data Structures (CDS) library is a collection of concurrent containers that don't require external (manual) synchronization for shared access, and safe memory reclamation (SMR) algorithms like <a href="http://en.wikipedia.org/wiki/Hazard_pointer">Hazard Pointer</a> and user-space <a href="http://en.wikipedia.org/wiki/Read-copy-update">RCU</a> that is used as an epoch-based SMR.</p>
<p>CDS is mostly header-only template library. Only SMR core implementation is segregated to .so/.dll file.</p>
<p>The library contains the implementations of the following containers: - <a href="http://en.wikipedia.org/wiki/Non-blocking_algorithm">lock-free</a> stack with optional elimination support - several algo for lock-free queue, including classic Michael &amp; Scott algorithm and its derivatives, the flat combining queue, the segmented queue. - several implementation of unordered set/map - lock-free and fine-grained lock-based - <a href="http://mcg.cs.tau.ac.il/projects/projects/flat-combining">flat-combining</a> technique - lock-free <a href="http://en.wikipedia.org/wiki/Skip_list">skip-list</a> - lock-free FeldmanHashMap/Set <a href="http://samos-conference.com/Resources_Samos_Websites/Proceedings_Repository_SAMOS/2013/Files/2013-IC-20.pdf">Multi-Level Array Hash</a> with thread-safe bidirectional iterator support - Bronson's et al algorithm for fine-grained lock-based AVL tree</p>
<p>Generally, each container has an intrusive and non-intrusive (STL-like) version belonging to <em>cds::intrusive</em> and <em>cds::container</em> namespace respectively.</p>
<p>Version 2.x of the library is written on C++11 and can be compiled by GCC 4.8+, clang 3.6+, Intel C++ 15+, and MS VC++ 14 (2015) and above</p>
<p>Download the latest release from http://sourceforge.net/projects/libcds/files/</p>
<p>See online doxygen-generated doc here: http://libcds.sourceforge.net/doc/cds-api/index.html</p>
<p>Evolution of libcds (Gource visualization by Landon Wilkins): https://www.youtube.com/watch?v=FHaJvVdmJ0w</p>
<p><strong>How to build</strong> - *nix: <a href="build/cmake/readme.md">use CMake</a> - Windows: use MS Visual C++ 2017 project</p>
<p>Some parts of libcds may depend on DCAS (double-width compare-and-swap) atomic primitive if the target architecture supports it. For x86, cmake build script enables <code>-mcx16</code> compiler flag that switches DCAS support on. You may manually disable DCAS support with the following command line flags in GCC/clang (for MS VC++ compiler DCAS is not supported): - <code>-DCDS_DISABLE_128BIT_ATOMIC</code> - for 64bit build - <code>-DCDS_DISABLE_64BIT_ATOMIC</code> - for 32bit build</p>
<p><strong>All your projects AND libcds MUST be compiled with the same flags - either with DCAS support or without it.</strong></p>
<p><strong>Pull request requirements</strong> - Pull-request to <em>master</em> branch will be unconditionally rejected - <em>integration</em> branch is intended for pull-request. Usually, <em>integration</em> branch is the same as <em>master</em> - <em>dev</em> branch is intended for main developing. Usually, it contains unstable code</p>
<p><a href="https://www.openhub.net/p/khizmax-libcds"><img src="https://www.openhub.net/p/khizmax-libcds/widgets/project_thin_badge.gif" alt="Project stats" /></a></p>
<h2 id="references">References</h2>
<p><em>Stack</em> - <em>TreiberStack</em>: [1986] R. K. Treiber. Systems programming: Coping with parallelism. Technical Report RJ 5118, IBM Almaden Research Center, April 1986. - Elimination back-off implementation is based on idea from [2004] Danny Hendler, Nir Shavit, Lena Yerushalmi &quot;A Scalable Lock-free Stack Algorithm&quot; <a href="http://people.csail.mit.edu/shanir/publications/Lock_Free.pdf">pdf</a> - <em>FCStack</em> - flat-combining wrapper for <em>std::stack</em></p>
<p><em>Queue</em> - <em>BasketQueue</em>: [2007] Moshe Hoffman, Ori Shalev, Nir Shavit &quot;The Baskets Queue&quot; <a href="http://people.csail.mit.edu/shanir/publications/Baskets%20Queue.pdf">pdf</a> - <em>MSQueue</em>: * [1998] Maged Michael, Michael Scott &quot;Simple, fast, and practical non-blocking and blocking concurrent queue algorithms&quot; <a href="http://www.cs.rochester.edu/~scott/papers/1996_PODC_queues.pdf">pdf</a> * [2002] Maged M.Michael &quot;Safe memory reclamation for dynamic lock-free objects using atomic reads and writes&quot; <a href="http://www.research.ibm.com/people/m/michael/podc-2002.pdf">pdf</a> * [2003] Maged M.Michael &quot;Hazard Pointers: Safe memory reclamation for lock-free objects&quot; <a href="http://www.research.ibm.com/people/m/michael/ieeetpds-2004.pdf">pdf</a> - <em>RWQueue</em>: [1998] Maged Michael, Michael Scott &quot;Simple, fast, and practical non-blocking and blocking concurrent queue algorithms&quot; <a href="http://www.cs.rochester.edu/~scott/papers/1996_PODC_queues.pdf">pdf</a> - <em>MoirQueue</em>: [2000] Simon Doherty, Lindsay Groves, Victor Luchangco, Mark Moir &quot;Formal Verification of a practical lock-free queue algorithm&quot; <a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.87.9954&amp;rep=rep1&amp;type=pdf">pdf</a> - <em>OptimisticQueue</em>: [2008] Edya Ladan-Mozes, Nir Shavit &quot;An Optimistic Approach to Lock-Free FIFO Queues&quot; <a href="https://people.csail.mit.edu/edya/publications/OptimisticFIFOQueue-journal.pdf">pdf</a> - <em>SegmentedQueue</em>: [2010] Afek, Korland, Yanovsky &quot;Quasi-Linearizability: relaxed consistency for improved concurrency&quot; <a href="http://mcg.cs.tau.ac.il/papers/opodis2010-quasi.pdf">pdf</a> - <em>FCQueue</em> - flat-combining wrapper for <em>std::queue</em> - <em>VyukovMPMCCycleQueue</em> Dmitry Vyukov (see http://www.1024cores.net)</p>
<p><em>Deque</em> - flat-combining deque based on <em>stl::deque</em></p>
<p><em>Map, set</em> - <em>MichaelHashMap</em>: [2002] Maged Michael &quot;High performance dynamic lock-free hash tables and list-based sets&quot; <a href="http://www.research.ibm.com/people/m/michael/spaa-2002.pdf">pdf</a> - <em>SplitOrderedList</em>: [2003] Ori Shalev, Nir Shavit &quot;Split-Ordered Lists - Lock-free Resizable Hash Tables&quot; <a href="http://people.csail.mit.edu/shanir/publications/Split-Ordered_Lists.pdf">pdf</a> - <em>StripedMap</em>, <em>StripedSet</em>: [2008] Maurice Herlihy, Nir Shavit &quot;The Art of Multiprocessor Programming&quot; - <em>CuckooMap</em>, <em>CuckooSet</em>: [2008] Maurice Herlihy, Nir Shavit &quot;The Art of Multiprocessor Programming&quot; - <em>SkipListMap</em>, <em>SkipListSet</em>: [2008] Maurice Herlihy, Nir Shavit &quot;The Art of Multiprocessor Programming&quot; - <em>FeldmanHashMap</em>, <em>FeldmanHashSet</em>: [2013] Steven Feldman, Pierre LaBorde, Damian Dechev &quot;Concurrent Multi-level Arrays: Wait-free Extensible Hash Maps&quot;. Supports <strong>thread-safe bidirectional iterators</strong> <a href="http://samos-conference.com/Resources_Samos_Websites/Proceedings_Repository_SAMOS/2013/Files/2013-IC-20.pdf">pdf</a></p>
<p><em>Ordered single-linked list</em> - <em>LazyList</em>: [2005] Steve Heller, Maurice Herlihy, Victor Luchangco, Mark Moir, William N. Scherer III, and Nir Shavit &quot;A Lazy Concurrent List-Based Set Algorithm&quot; <a href="http://people.csail.mit.edu/shanir/publications/Lazy_Concurrent.pdf">pdf</a> - <em>MichaelList</em>: [2002] Maged Michael &quot;High performance dynamic lock-free hash tables and list-based sets&quot; <a href="http://www.research.ibm.com/people/m/michael/spaa-2002.pdf">pdf</a></p>
<p><em>Priority queue</em> - <em>MSPriorityQueue</em>: [1996] G.Hunt, M.Michael, S. Parthasarathy, M.Scott &quot;An efficient algorithm for concurrent priority queue heaps&quot; <a href="http://web.cse.ohio-state.edu/dmrl/papers/heap96.pdf">pdf</a></p>
<p><em>Tree</em> - <em>EllenBinTree</em>: [2010] F.Ellen, P.Fatourou, E.Ruppert, F.van Breugel &quot;Non-blocking Binary Search Tree&quot; <a href="http://www.cs.vu.nl/~tcs/cm/faith.pdf">pdf</a> - <em>BronsonAVLTreeMap</em> - lock-based fine-grained AVL-tree implementation: [2010] Nathan Bronson, Jared Casper, Hassan Chafi, Kunle Olukotun &quot;A Practical Concurrent Binary Search Tree&quot; <a href="https://ppl.stanford.edu/papers/ppopp207-bronson.pdf">pdf</a></p>
<p><em>SMR</em> - Hazard Pointers * [2002] Maged M.Michael &quot;Safe memory reclamation for dynamic lock-free objects using atomic reads and writes&quot; <a href="http://www.research.ibm.com/people/m/michael/podc-2002.pdf">pdf</a> * [2003] Maged M.Michael &quot;Hazard Pointers: Safe memory reclamation for lock-free objects&quot; <a href="http://www.research.ibm.com/people/m/michael/ieeetpds-2004.pdf">pdf</a> * [2004] Andrei Alexandrescy, Maged Michael &quot;Lock-free Data Structures with Hazard Pointers&quot; <a href="http://www.researchgate.net/profile/Andrei_Alexandrescu/publication/252573326_Lock-Free_Data_Structures_with_Hazard_Pointers/links/0deec529e7804288fe000000.pdf">pdf</a> - User-space RCU * [2009] M.Desnoyers &quot;Low-Impact Operating System Tracing&quot; PhD Thesis, Chapter 6 &quot;User-Level Implementations of Read-Copy Update&quot; <a href="http://www.lttng.org/files/thesis/desnoyers-dissertation-2009-12-v27.pdf">pdf</a> * [2011] M.Desnoyers, P.McKenney, A.Stern, M.Dagenias, J.Walpole &quot;User-Level Implementations of Read-Copy Update&quot; <a href="http://www.dorsal.polymtl.ca/sites/www.dorsal.polymtl.ca/files/publications/desnoyers-ieee-urcu-submitted.pdf">pdf</a></p>
<p><em>Flat Combining</em> technique - [2010] Hendler, Incze, Shavit and Tzafrir &quot;Flat Combining and the Synchronization-Parallelism Tradeoff&quot; <a href="http://www.cs.bgu.ac.il/~hendlerd/papers/flat-combining.pdf">pdf</a></p>
