<h1 id="cnl-a-compositional-numeric-library-for-c">CNL: A Compositional Numeric Library for C++</h1>
<h2 id="under-construction"><strong><em>UNDER CONSTRUCTION!</em></strong></h2>
<p>This project is a fork of the <a href="https://github.com/johnmcfarlane/fixed_point">fixed_point</a> library and is not yet ready for use. Please use <a href="https://github.com/johnmcfarlane/fixed_point">fixed_point</a> instead.</p>
<p>The <a href="https://github.com/johnmcfarlane/fixed_point">fixed_point</a> library provides a header-only C++11 API for approximating real numbers using binary fixed-point arithmetic. It forms the reference implementation of a standard library proposal presented in paper, <a href="http://wg21.link/p0037">P0037</a> and is developed as part of study groups, <a href="https://groups.google.com/a/isocpp.org/forum/#!forum/sg14">SG14</a> and SG6.</p>
<h2 id="download">Download</h2>
<p>The library is <a href="https://github.com/johnmcfarlane/fixed_point">hosted</a> on GitHub:</p>
<pre class="shell"><code>$ git clone https://github.com/johnmcfarlane/fixed_point.git</code></pre>
<p>The API is exposed through headers in the <a href="./include/">include</a> directory. Add this to your system header list and include, e.g.:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="pp">#include </span><span class="im">&lt;sg14/fixed_point&gt;</span></code></pre></div>
<h2 id="tests-and-benchmarks">Tests and Benchmarks</h2>
<h3 id="linux">Linux</h3>
<p>Tested on <a href="https://travis-ci.org/johnmcfarlane/fixed_point">Travis</a> (Ubuntu 14.04) using GCC 5.4 and Clang 3.5 and <a href="https://www.debian.org/releases/stable/">Debian GNU/Linux 8.3</a> using GCC 5.4 and Clang 3.5.0.</p>
<p>Requires:</p>
<ul>
<li>G++ 5.4</li>
<li><a href="https://cmake.org/download/">CMake</a> 3.2</li>
</ul>
<p>Optional:</p>
<ul>
<li><a href="http://www.boost.org/">Boost</a> - facilitates multiprecision support</li>
<li><a href="http://www.doxygen.org/">Doxygen</a> - generates documentation in the <em>doc/gh-pages</em> directory</li>
<li><a href="http://pandoc.org/">pandoc</a> - generates proposal papers</li>
</ul>
<p>For a list of configuration options:</p>
<pre class="shell"><code>$ cmake -LH</code></pre>
<p>To build everything:</p>
<pre class="shell"><code>$ cmake -DCMAKE_BUILD_TYPE=Release
$ make</code></pre>
<p>To disable exception handling (incompatible with Boost 1.55 or lower), add <code>-DEXCEPTIONS=OFF</code> to the <code>cmake</code> command:</p>
<pre class="shell"><code>$ cmake -DCMAKE_BUILD_TYPE=Release -DEXCEPTIONS=OFF
$ make</code></pre>
<p>To run tests:</p>
<pre class="shell"><code>$ cmake -DCMAKE_BUILD_TYPE=Release
$ make fp_test
$ ./fp_test</code></pre>
<p>To run benchmarks:</p>
<pre class="shell"><code>$ cmake -DCMAKE_BUILD_TYPE=Release
$ make fp_benchmark
$ ./fp_benchmark</code></pre>
<p>To profile benchmarks:</p>
<ol style="list-style-type: decimal">
<li><p>Build with frame pointers included:</p>
<pre class="shell"><code>$ cmake -DCMAKE_BUILD_TYPE=Release -DPROFILE=ON
$ make fp_benchmark
$ ./fp_benchmark</code></pre></li>
<li><p>then run:</p>
<pre class="shell"><code>$ perf record -g ./fp_benchmark
$ perf report -g &#39;graph,0.5,caller&#39;</code></pre></li>
</ol>
<p>To install:</p>
<pre class="shell"><code>$ cmake -DCMAKE_BUILD_TYPE=Release
$ make
$ sudo make install</code></pre>
<h4 id="windows">Windows</h4>
<p>Tested on <a href="https://ci.appveyor.com/project/johnmcfarlane/fixed-point/branch/master">AppVeyor</a> and on <em>Windows 10 Professional</em> with <em>CMake 3.8.0</em>. Requires:</p>
<ul>
<li>MSBuild 15.0 (VS 2017)</li>
<li><a href="https://cmake.org/download/">CMake</a> 3.8.0</li>
</ul>
<p>To build <em>vs/Release/fp_test.exe</em> and <em>vs/Release/fp_benchmark.exe</em>:</p>
<pre><code>cmake -G &quot;Visual Studio 15 2017&quot; .
MSBuild.exe /m fixed_point.sln /p:Configuration=Release</code></pre>
<p>For 64-bit builds, append <code>Win64</code> to the <code>-G</code> option above:</p>
<pre><code>cmake -G &quot;Visual Studio 15 2017 Win64&quot; .</code></pre>
<p>Note that <em>fp_benchmark</em> is unlikely to produce valid results due to missing <code>escape</code> and <code>clobber</code> functions.</p>
<h3 id="cleaning">Cleaning</h3>
<p>To clean the project files:</p>
<pre><code>git clean -Xdff .</code></pre>
<p>(Use with caution!)</p>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li><a href="http://johnmcfarlane.github.io/fixed_point/">documentation</a></li>
<li>Standard Library proposal, <a href="http://wg21.link/p0037">P0037</a></li>
<li>position paper illustrating the compositonal approach, <a href="http://wg21.link/p0554">P0554</a></li>
<li>forum of <a href="https://groups.google.com/a/isocpp.org/forum/#!forum/sg14">Study Group 14</a></li>
</ul>
<h2 id="contact-information">Contact Information</h2>
<p>All feedback greatly appreciated.</p>
<ul>
<li><a href="https://github.com/johnmcfarlane">GitHub</a></li>
<li><a href="https://groups.google.com/a/isocpp.org/forum/#!forum/sg14">SG14 forum</a></li>
<li><a href="mailto:fixed-point@john.mcfarlane.name">fixed-point@john.mcfarlane.name</a></li>
</ul>
