<h1 id="μpb-small-fast-c-protos">μpb: small, fast C protos</h1>
<p>μpb (often written ‘upb’) is a small <a href="https://github.com/protocolbuffers/protobuf">protobuf</a> implementation written in C.</p>
<p>upb is the core runtime for protobuf languages extensions in <a href="https://github.com/protocolbuffers/protobuf/tree/master/ruby">Ruby</a>, <a href="https://github.com/protocolbuffers/protobuf/tree/master/php">PHP</a>, and (soon) Python.</p>
<p>While upb offers a C API, the C API &amp; ABI <strong>are not stable</strong>. For this reason, upb is not generally offered as a C library for direct consumption, and there are no releases.</p>
<h2 id="features">Features</h2>
<p>upb has comparable speed to protobuf C++, but is an order of magnitude smaller in code size.</p>
<p>Like the main protobuf implementation in C++, it supports:</p>
<ul>
<li>a generated API (in C)</li>
<li>reflection</li>
<li>binary &amp; JSON wire formats</li>
<li>text format serialization</li>
<li>all standard features of protobufs (oneofs, maps, unknown fields, etc.)</li>
<li>full conformance with the protobuf conformance tests</li>
</ul>
<p>upb also supports some features that C++ does not:</p>
<ul>
<li><strong>optional reflection:</strong> generated messages are agnostic to whether reflection will be linked in or not.</li>
<li><strong>no global state:</strong> no pre-main registration or other global state.</li>
<li><strong>fast reflection-based parsing:</strong> messages loaded at runtime parse just as fast as compiled-in messages.</li>
</ul>
<p>However there are some features it does not support:</p>
<ul>
<li>proto2 extensions (coming soon!)</li>
<li>text format parsing</li>
<li>deep descriptor verification: upb’s descriptor validation is not as exhaustive as <code>protoc</code>.</li>
</ul>
<h2 id="install">Install</h2>
<p>For Ruby, use <a href="https://rubygems.org/gems/google-protobuf">RubyGems</a>:</p>
<pre><code>$ gem install google-protobuf</code></pre>
<p>For PHP, use <a href="https://pecl.php.net/package/protobuf">PECL</a>:</p>
<pre><code>$ sudo pecl install protobuf</code></pre>
<h2 id="contributing">Contributing</h2>
<p>Please see <a href="CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
