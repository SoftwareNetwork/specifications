<h1 id="azure-storage-client-library-for-c-6.1.0">Azure Storage Client Library for C++ (6.1.0)</h1>
<p>The Azure Storage Client Library for C++ allows you to build applications against Microsoft Azure Storage. For an overview of Azure Storage, see <a href="http://azure.microsoft.com/en-us/documentation/articles/storage-introduction/">Introduction to Microsoft Azure Storage</a>.</p>
<p>There is an alternative client library that requires minimum dependency, which provides basic object storage that Blob service offers. Please see <a href="https://github.com/Azure/azure-storage-cpplite">azure-storage-cpplite</a> for more information.</p>
<h1 id="features">Features</h1>
<ul>
<li>Tables
<ul>
<li>Create/Delete Tables</li>
<li>Query/Create/Read/Update/Delete Entities</li>
</ul></li>
<li>Blobs
<ul>
<li>Create/Read/Update/Delete Blobs</li>
</ul></li>
<li>Queues
<ul>
<li>Create/Delete Queues</li>
<li>Insert/Peek Queue Messages</li>
<li>Advanced Queue Operations</li>
</ul></li>
<li>Files
<ul>
<li>Create/Delete/Resize Shares</li>
<li>Create/Delete Directories</li>
<li>Create/Read/Update/Delete Files</li>
</ul></li>
</ul>
<h1 id="getting-started">Getting started</h1>
<p>For the best development experience, we recommend that developers use the <a href="https://github.com/Microsoft/vcpkg">Vcpkg</a> as the cross-platform library manager.</p>
<h2 id="requirements">Requirements</h2>
<p>To call Azure services, you must first have an Azure subscription. Sign up for a <a href="https://azure.microsoft.com/en-us/pricing/free-trial/">free trial</a> or use your <a href="https://azure.microsoft.com/en-us/pricing/member-offers/msdn-benefits-details/">MSDN subscriber benefits</a>.</p>
<h2 id="need-help">Need Help?</h2>
<p>Be sure to check out the <a href="https://social.msdn.microsoft.com/Forums/azure/en-US/home?forum=windowsazuredata">Azure Storage Forum</a> on MSDN if you need help, or use <a href="http://stackoverflow.com/questions/tagged/azure">StackOverflow</a>.</p>
<h2 id="collaborate-contribute">Collaborate &amp; Contribute</h2>
<p>We gladly accept community contributions.</p>
<ul>
<li><strong>Issues:</strong> Report bugs on the <a href="https://github.com/Azure/azure-storage-cpp/issues">Issues page</a> in GitHub.</li>
<li><strong>Forums:</strong> Communicate with the Azure Storage development team on the <a href="https://social.msdn.microsoft.com/Forums/azure/en-US/home?forum=windowsazuredata">Azure Storage Forum</a> or <a href="http://stackoverflow.com/questions/tagged/azure">StackOverflow</a>.</li>
<li><strong>Source Code Contributions:</strong> Please follow the <a href="http://azure.github.io/guidelines/">contribution guidelines for Azure open source</a> for instructions about contributing to the source project.</li>
</ul>
<p>For general suggestions about Azure, use our <a href="http://feedback.azure.com/forums/34192--general-feedback">Azure feedback forum</a>.</p>
<h2 id="download-install">Download &amp; Install</h2>
<h3 id="via-git">Via Git</h3>
<p>To create a local clone of the source for the Azure Storage Client Library for C++ via <code>git</code>, type:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/Azure/azure-storage-cpp.git
<span class="bu">cd</span> azure-storage-cpp</code></pre></div>
<p>To build with source code, there are three ways:</p>
<p><strong>Via Vcpkg</strong> You can manage the dependencies with Vcpkg, and use Visual Studio 2015 update 3 or Visual Studio 2017 for development environment. Simply install Casablanca via Vcpkg will setup everything needed.</p>
<pre><code>C:\src\vcpkg&gt; .\vcpkg install cpprestsdk</code></pre>
<p><strong>Via NuGet</strong> Because Casablanca does not release NuGet packages anywhere anymore, Starting from 5.1.0, this repository cannot be built with pre-built Casablanca NuGet packages. However, you can export your own version of Casablanca NuGet packages to install dependencies of this project:</p>
<pre><code>C:\src\vcpkg&gt; .\vcpkg install cpprestsdk
C:\src\vcpkg&gt; .\vcpkg export --nuget cpprestsdk --nuget-id=Casablanca --nuget-version=2.10.13</code></pre>
<p><strong>Manage dependencies by yourself</strong> It is not recommended to manage dependencies by yourself. However, you can still build Casablanca by yourself and specify the include directories and link binaries.</p>
<h3 id="via-nuget">Via NuGet</h3>
<p>To install the binaries for the Azure Storage Client Library for C++, you can export a NuGet package with Vcpkg and put it into your local NuGet feed. For more information about how to export a NuGet package, please see <a href="https://github.com/Microsoft/vcpkg/blob/master/docs/specifications/export-command.md">Binary Export</a>.</p>
<p>Normally, exporting NuGet package is done with the following command:</p>
<pre><code>C:\src\vcpkg&gt; .\vcpkg export --nuget azure-storage-cpp --nuget-id=Microsoft.Azure.Storage.CPP --nuget-version=6.0.0</code></pre>
<h3 id="via-vcpkg">Via Vcpkg</h3>
<p>To install the Azure Storage Client Library for C++ through Vcpkg, you need Vcpkg installed first. Please follow the instructions(https://github.com/Microsoft/vcpkg#quick-start) to install Vcpkg.</p>
<p>install package with:</p>
<pre><code>C:\src\vcpkg&gt; .\vcpkg install azure-storage-cpp</code></pre>
<h4 id="visual-studio-version">Visual Studio Version</h4>
<p>Starting from version 6.1.0, Azure Storage Client Library for C++ supports Visual Studio 2015 and Visual Studio 2017. In case you have the need to use Visual Studio 2013, please get <a href="https://github.com/Azure/azure-storage-cpp/releases/tag/v6.0.0">version 6.0.0</a>, to use Visual Studio 2012, please get <a href="http://www.nuget.org/packages/wastorage/2.0.0">version 2.0.0</a>.</p>
<h2 id="dependencies">Dependencies</h2>
<h3 id="c-rest-sdk">C++ REST SDK</h3>
<p>The Azure Storage Client Library for C++ depends on the C++ REST SDK (codename &quot;Casablanca&quot;) It can be installed through Vcpkg (vcpkg install cpprestsdk) or downloaded directly from <a href="https://github.com/Microsoft/cpprestsdk/releases/">GitHub</a>.</p>
<p>The validated Casablanca version for each major or recent release on different platforms can be found in the following chart:</p>
<table>
<colgroup>
<col width="31%" />
<col width="35%" />
<col width="32%" />
</colgroup>
<thead>
<tr class="header">
<th>azure-storage-cpp's version</th>
<th>Casablanca version for Windows</th>
<th>Casablanca version for Linux</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1.0.0</td>
<td>2.4.0</td>
<td>2.4.0</td>
</tr>
<tr class="even">
<td>2.0.0</td>
<td>2.4.0</td>
<td>2.4.0</td>
</tr>
<tr class="odd">
<td>3.0.0</td>
<td>2.9.1</td>
<td>2.9.1</td>
</tr>
<tr class="even">
<td>4.0.0</td>
<td>2.9.1</td>
<td>2.9.1</td>
</tr>
<tr class="odd">
<td>5.0.0</td>
<td>2.9.1</td>
<td>2.9.1</td>
</tr>
<tr class="even">
<td>5.0.1</td>
<td>2.9.1</td>
<td>2.9.1</td>
</tr>
<tr class="odd">
<td>5.1.0</td>
<td>2.10.6</td>
<td>2.10.3</td>
</tr>
<tr class="even">
<td>5.1.1</td>
<td>2.10.6</td>
<td>2.10.3</td>
</tr>
<tr class="odd">
<td>5.2.0</td>
<td>2.10.6</td>
<td>2.10.3</td>
</tr>
<tr class="even">
<td>6.0.0</td>
<td>2.10.10</td>
<td>2.10.10</td>
</tr>
<tr class="odd">
<td>6.1.0</td>
<td>2.10.13</td>
<td>2.10.13</td>
</tr>
</tbody>
</table>
<h2 id="code-samples">Code Samples</h2>
<p>To get started with the coding, please visit the following articles: - <a href="https://azure.microsoft.com/documentation/articles/storage-c-plus-plus-how-to-use-blobs/">How to use Blob Storage from C++</a> - <a href="https://azure.microsoft.com/documentation/articles/storage-c-plus-plus-how-to-use-tables/">How to use Table Storage from C++</a> - <a href="https://azure.microsoft.com/documentation/articles/storage-c-plus-plus-how-to-use-queues">How to use Queue Storage from C++</a></p>
<p>To accomplish specific tasks, please find the code samples at <a href="Microsoft.WindowsAzure.Storage/samples">samples folder</a>.</p>
<h2 id="getting-started-on-linux">Getting Started on Linux</h2>
<h3 id="getting-started-on-ubuntu">Getting Started on Ubuntu</h3>
<p>As mentioned above, the Azure Storage Client Library for C++ depends on Casablanca. Follow <a href="https://github.com/Microsoft/cpprestsdk/wiki/How-to-build-for-Linux">these instructions</a> to compile it.</p>
<p>Once this is complete, then:</p>
<ul>
<li><p>Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/Azure/azure-storage-cpp.git</code></pre></div>
The project is cloned to a folder called <code>azure-storage-cpp</code>. Always use the master branch, which contains the latest release.</li>
<li><p>Install additional dependencies:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> apt-get install libxml2-dev uuid-dev</code></pre></div></li>
<li><p>Build the SDK for Release:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> azure-storage-cpp/Microsoft.WindowsAzure.Storage
<span class="fu">mkdir</span> build.release
<span class="bu">cd</span> build.release
<span class="va">CASABLANCA_DIR=</span><span class="op">&lt;</span><span class="ex">path</span> to Casablanca<span class="op">&gt;</span> CXX=g++-4.8 cmake .. -DCMAKE_BUILD_TYPE=Release
<span class="fu">make</span></code></pre></div>
<p>In the above command, replace <code>&lt;path to Casablanca&gt;</code> to point to your local installation of Casablanca. For example, if the file <code>libcpprest.so</code> exists at location <code>~/Github/Casablanca/cpprestsdk/Release/build.release/Binaries/libcpprest.so</code>, then your <code>cmake</code> command should be:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="va">CASABLANCA_DIR=</span>~/Github/Casablanca/cpprestsdk <span class="va">CXX=</span>g++-4.8 <span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release</code></pre></div>
<p>The library is generated under <code>azure-storage-cpp/Microsoft.WindowsAzure.Storage/build.release/Binaries/</code>.</p></li>
</ul>
<p>To build and run unit tests: - Install UnitTest++ library:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> apt-get install libunittest++-dev</code></pre></div>
<ul>
<li><p>Build the test code:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="va">CASABLANCA_DIR=</span><span class="op">&lt;</span><span class="ex">path</span> to Casablanca<span class="op">&gt;</span> CXX=g++-4.8 cmake .. -DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=ON
<span class="fu">make</span></code></pre></div></li>
<li><p>Run unit tests</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> Binaries
<span class="ex">vi</span> test_configurations.json <span class="co"># modify test config file to include your storage account credentials</span>
<span class="ex">./azurestoragetest</span></code></pre></div></li>
</ul>
<p>To build sample code:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="va">CASABLANCA_DIR=</span><span class="op">&lt;</span><span class="ex">path</span> to Casablanca<span class="op">&gt;</span> CXX=g++-4.8 cmake .. -DCMAKE_BUILD_TYPE=Release -DBUILD_SAMPLES=ON
<span class="fu">make</span></code></pre></div>
<p>To run the samples:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> Binaries
<span class="ex">vi</span> ../../samples/SamplesCommon/samples_common.h <span class="co"># modify connection string to include your storage account credentials</span>
<span class="ex">./samplesblobs</span>            # run the blobs sample
<span class="ex">./samplesjson</span>             # run the tables sample with JSON payload
<span class="ex">./samplestables</span>           # run the tables sample
<span class="ex">./samplesqueues</span>           # run the queues sample</code></pre></div>
<p>Please note the current build script is only tested on Ubuntu 16.04. Please update the script accordingly for other distributions.</p>
<p>Please note that starting from 2.10.0, Casablanca requires a minimum version of CMake v3.1, so the default CMake on Ubuntu 14.04 cannot support Casablanca build. User can upgrade CMake by themselves to build Casablanca. If default CMake (2.8) for Ubuntu 14.04 must be used, 5.0.1 with Casablanca version v2.9.1 is recommended.</p>
<h3 id="getting-started-on-sles12">Getting Started on SLES12</h3>
<p><em>Please note the following build script is only tested on SLES12 SP3. The script may need to be updated accordingly for other distributions.</em></p>
<p>Before building the Azure Storage Client Library on C++, some prerequisites need to be installed first: - Install prerequisites:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> zypper install git gcc-c++ boost-devel cmake libopenssl-devel libxml2-devel libuuid-devel</code></pre></div>
<p>The Azure Storage Client Library for C++ depends on Casablanca, following are instructions to build and install Casablanca:</p>
<ul>
<li><p>Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/Microsoft/cpprestsdk.git</code></pre></div></li>
<li><p>Checkout the version on which Azure Storage Client Library for C++ depends:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> checkout tags/v2.10.13 -b v2.10.13</code></pre></div></li>
<li><p>Build the project in Release mode</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> cpprestsdk/Release
<span class="fu">git</span> submodule update --init
<span class="fu">mkdir</span> build.release
<span class="bu">cd</span> build.release
<span class="va">CXX=</span>g++-4.8 <span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DWERROR=OFF -DBUILD_SAMPLES=OFF -DBUILD_TESTS=OFF
<span class="fu">sudo</span> make install</code></pre></div></li>
</ul>
<p>To build the Azure Storage Client Library for C++ project:</p>
<ul>
<li><p>Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/Azure/azure-storage-cpp.git</code></pre></div>
<p>The project is cloned to a folder called <code>azure-storage-cpp</code>. Always use the master branch, which contains the latest release.</p></li>
<li><p>Build the SDK in Release mode:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> azure-storage-cpp/Microsoft.WindowsAzure.Storage
<span class="fu">mkdir</span> build.release
<span class="bu">cd</span> build.release
<span class="va">CXX=</span>g++-4.8 <span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release
<span class="fu">make</span></code></pre></div></li>
</ul>
<p>The library is generated under <code>azure-storage-cpp/Microsoft.WindowsAzure.Storage/build.release/Binaries/</code>.</p>
<p>The Azure Storage Client Library for C++ project depends on Unitest++ for unit test:</p>
<p>To build and install Unitest++: - Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/unittest-cpp/unittest-cpp.git</code></pre></div>
<ul>
<li><p>Build and install the project:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> unittest-cpp/builds/
<span class="va">CXX=</span>g++-4.8 <span class="fu">cmake</span> ..
<span class="fu">sudo</span> make install</code></pre></div></li>
</ul>
<p>Build and run unit test against Azure Storage Client Library for C++: - Build the test code:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="va">CXX=</span>g++-4.8 <span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=ON
<span class="fu">make</span></code></pre></div>
<ul>
<li><p>Run unit tests</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> Binaries
<span class="ex">vi</span> test_configurations.json <span class="co"># modify test config file to include your storage account credentials</span>
<span class="ex">./azurestoragetest</span></code></pre></div></li>
</ul>
<p>To build sample code:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="va">CXX=</span>g++-4.8 <span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DBUILD_SAMPLES=ON
<span class="fu">make</span></code></pre></div>
<p>To run the samples:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> Binaries
<span class="ex">vi</span> ../../samples/SamplesCommon/samples_common.h <span class="co"># modify connection string to include your storage account credentials</span>
<span class="ex">./samplesblobs</span>            # run the blobs sample
<span class="ex">./samplesjson</span>             # run the tables sample with JSON payload
<span class="ex">./samplestables</span>           # run the tables sample
<span class="ex">./samplesqueues</span>           # run the queues sample</code></pre></div>
<h3 id="getting-started-on-rhel-7">Getting Started on RHEL 7</h3>
<p><em>Please note the following build script is only tested on RHEL 7.5. The script may need to be updated accordingly for other distributions.</em></p>
<p>Before building the Azure Storage Client Library on C++, some prerequisites need to be installed first: - Install prerequisites:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> yum install git gcc-c++ openssl-devel libxml2-devel libuuid-devel</code></pre></div>
<ul>
<li><p>Download and install cmake3:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">wget</span> -O cmakeinstall.sh https://cmake.org/files/v3.12/cmake-3.12.3-Linux-x86_64.sh
<span class="fu">chmod</span> a+x cmakeinstall.sh
<span class="fu">sudo</span> ./cmakeinstall.sh --prefix=/usr</code></pre></div></li>
<li><p>Download and install boost</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">wget</span> https://dl.bintray.com/boostorg/release/1.68.0/source/boost_1_68_0.tar.gz
<span class="fu">tar</span> xvf boost_1_68_0.tar.gz
<span class="bu">cd</span> boost_1_68_0
<span class="ex">./bootstrap.sh</span>
<span class="fu">sudo</span> ./b2 install</code></pre></div></li>
</ul>
<p>The Azure Storage Client Library for C++ depends on Casablanca, following are instructions to build and install Casablanca:</p>
<ul>
<li><p>Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/Microsoft/cpprestsdk.git</code></pre></div></li>
<li><p>Checkout the version on which Azure Storage Client Library for C++ depends:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> checkout tags/v2.10.13 -b v2.10.13</code></pre></div></li>
<li><p>Build the project in Release mode</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> cpprestsdk/Release
<span class="fu">git</span> submodule update --init
<span class="fu">mkdir</span> build.release
<span class="bu">cd</span> build.release
<span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DWERROR=OFF -DBUILD_SAMPLES=OFF -DBUILD_TESTS=OFF
<span class="fu">sudo</span> make install</code></pre></div></li>
</ul>
<p>To build the Azure Storage Client Library for C++ project:</p>
<ul>
<li><p>Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/Azure/azure-storage-cpp.git</code></pre></div>
<p>The project is cloned to a folder called <code>azure-storage-cpp</code>. Always use the master branch, which contains the latest release.</p></li>
<li><p>Build the SDK in Release mode:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> azure-storage-cpp/Microsoft.WindowsAzure.Storage
<span class="fu">mkdir</span> build.release
<span class="bu">cd</span> build.release
<span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release
<span class="fu">make</span></code></pre></div></li>
</ul>
<p>The library is generated under <code>azure-storage-cpp/Microsoft.WindowsAzure.Storage/build.release/Binaries/</code>.</p>
<p>The Azure Storage Client Library for C++ project depends on Unitest++ for unit test:</p>
<p>To build and install Unitest++: - Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/unittest-cpp/unittest-cpp.git</code></pre></div>
<ul>
<li><p>Build and install the project:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> unittest-cpp/builds/
<span class="fu">cmake</span> ..
<span class="fu">sudo</span> make install</code></pre></div></li>
</ul>
<p>Build and run unit test against Azure Storage Client Library for C++: - Build the test code:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=ON
<span class="fu">make</span></code></pre></div>
<ul>
<li><p>Run unit tests</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> Binaries
<span class="ex">vi</span> test_configurations.json <span class="co"># modify test config file to include your storage account credentials</span>
<span class="ex">./azurestoragetest</span></code></pre></div></li>
</ul>
<p>To build sample code:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DBUILD_SAMPLES=ON
<span class="fu">make</span></code></pre></div>
<p>To run the samples:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> Binaries
<span class="ex">vi</span> ../../samples/SamplesCommon/samples_common.h <span class="co"># modify connection string to include your storage account credentials</span>
<span class="ex">./samplesblobs</span>            # run the blobs sample
<span class="ex">./samplesjson</span>             # run the tables sample with JSON payload
<span class="ex">./samplestables</span>           # run the tables sample
<span class="ex">./samplesqueues</span>           # run the queues sample</code></pre></div>
<h3 id="getting-started-on-rhel-6">Getting Started on RHEL 6</h3>
<p><em>Please note the following build script is only tested on RHEL 6.9. The script may need to be updated accordingly for other distributions.</em></p>
<p>Before building the Azure Storage Client Library on C++, some prerequisites need to be installed first: - Install prerequisites:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> yum install git openssl-devel libxml2-devel libuuid-devel</code></pre></div>
<ul>
<li><p>Install and enable to use gcc-c++</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> yum install devtoolset-3-gcc-c++.x86_64
<span class="ex">scl</span> enable devtoolset-3 bash</code></pre></div></li>
<li><p>Download and install cmake3:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">wget</span> -O cmakeinstall.sh https://cmake.org/files/v3.12/cmake-3.12.3-Linux-x86_64.sh
<span class="fu">chmod</span> a+x cmakeinstall.sh
<span class="fu">sudo</span> ./cmakeinstall.sh --prefix=/usr</code></pre></div></li>
<li><p>Download and install boost</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">wget</span> https://dl.bintray.com/boostorg/release/1.68.0/source/boost_1_68_0.tar.gz
<span class="fu">tar</span> xvf boost_1_68_0.tar.gz
<span class="bu">cd</span> boost_1_68_0
<span class="ex">./bootstrap.sh</span>
<span class="fu">sudo</span> ./b2 install</code></pre></div></li>
</ul>
<p>The Azure Storage Client Library for C++ depends on Casablanca, following are instructions to build and install Casablanca:</p>
<ul>
<li><p>Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/Microsoft/cpprestsdk.git</code></pre></div></li>
<li><p>Checkout the version on which Azure Storage Client Library for C++ depends:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> checkout tags/v2.10.13 -b v2.10.13</code></pre></div></li>
<li><p>Build the project in Release mode</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> cpprestsdk/Release
<span class="fu">git</span> submodule update --init
<span class="fu">mkdir</span> build.release
<span class="bu">cd</span> build.release
<span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DWERROR=OFF -DBUILD_SAMPLES=OFF -DBUILD_TESTS=OFF -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++
<span class="fu">sudo</span> make install</code></pre></div></li>
</ul>
<p>To build the Azure Storage Client Library for C++ project:</p>
<ul>
<li><p>Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/Azure/azure-storage-cpp.git</code></pre></div>
<p>The project is cloned to a folder called <code>azure-storage-cpp</code>. Always use the master branch, which contains the latest release.</p></li>
<li><p>Build the SDK in Release mode:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> azure-storage-cpp/Microsoft.WindowsAzure.Storage
<span class="fu">mkdir</span> build.release
<span class="bu">cd</span> build.release
<span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++
<span class="fu">make</span></code></pre></div></li>
</ul>
<p>The library is generated under <code>azure-storage-cpp/Microsoft.WindowsAzure.Storage/build.release/Binaries/</code>.</p>
<p>The Azure Storage Client Library for C++ project depends on Unitest++ for unit test:</p>
<p>To build and install Unitest++: - Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/unittest-cpp/unittest-cpp.git</code></pre></div>
<ul>
<li><p>Build and install the project:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> unittest-cpp/builds/
<span class="fu">cmake</span> .. -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++
<span class="fu">sudo</span> make install</code></pre></div></li>
</ul>
<p>Build and run unit test against Azure Storage Client Library for C++: - Build the test code:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=ON -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++
<span class="fu">make</span></code></pre></div>
<ul>
<li><p>Run unit tests</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> Binaries
<span class="ex">vi</span> test_configurations.json <span class="co"># modify test config file to include your storage account credentials</span>
<span class="ex">./azurestoragetest</span></code></pre></div></li>
</ul>
<p>To build sample code:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DBUILD_SAMPLES=ON -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++
<span class="fu">make</span></code></pre></div>
<p>To run the samples:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> Binaries
<span class="ex">vi</span> ../../samples/SamplesCommon/samples_common.h <span class="co"># modify connection string to include your storage account credentials</span>
<span class="ex">./samplesblobs</span>            # run the blobs sample
<span class="ex">./samplesjson</span>             # run the tables sample with JSON payload
<span class="ex">./samplestables</span>           # run the tables sample
<span class="ex">./samplesqueues</span>           # run the queues sample</code></pre></div>
<h2 id="getting-started-on-osx">Getting Started on OSX</h2>
<p><em>Note that OSX is not officially supported yet, but it has been seen to work, YMMV. This build has been tested to work when the dependencies are installed via homebrew, YMMV if using FINK or MacPorts</em></p>
<p>Install dependecies with homebrew:</p>
<pre><code>brew install libxml2 ossp-uuid openssl</code></pre>
<p>As mentioned above, the Azure Storage Client Library for C++ depends on Casablanca. If you are using homebrew you can install it from there:</p>
<pre><code>brew install cpprestsdk</code></pre>
<p>Otherwise, you may need to build it. Follow <a href="https://github.com/Microsoft/cpprestsdk/wiki/How-to-build-for-Mac-OS-X">these instructions</a> to compile it.</p>
<p>Once this is complete, then:</p>
<ul>
<li><p>Clone the project using git:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/Azure/azure-storage-cpp.git</code></pre></div>
<p>The project is cloned to a folder called <code>azure-storage-cpp</code>. Always use the master branch, which contains the latest release.</p></li>
</ul>
<p><strong>Some notes about building</strong>: - If you're using homebrew, there seems to be an issue with the pkg-config files, which means that, by default, a -L flag to tell the linker where libintl lives is left out. We've accounted for this in our CMAKE file, by looking in the usual directory that homebrew puts those libs. If you are not using homebrew, you will get an error stating that you need to tell us where those libs live. - Similarly, for openssl, you don't want to use the version that comes with OSX, it is old. We've accounted for this in the CMAKE script by setting the search paths to where homebrew puts openssl, so if you're not using homebrew you'll need to tell us where a more recent version of openssl lives.</p>
<ul>
<li><p>Build the SDK for Release if you are using hombrew:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> azure-storage-cpp/Microsoft.WIndowsAzure.Storage
<span class="fu">mkdir</span> build.release
<span class="bu">cd</span> build.release
<span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release
<span class="fu">make</span></code></pre></div></li>
<li><p>OR, Build the SDK for Release if you are not using homebrew</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> azure-storage-cpp/Microsoft.WindowsAzure.Storage
<span class="fu">mkdir</span> build.release
<span class="bu">cd</span> build.release
<span class="va">CASABLANCA_DIR=</span><span class="op">&lt;</span><span class="ex">path</span> to casablanca<span class="op">&gt;</span> cmake .. -DCMAKE_BUILD_TYPE=Release -DOPENSSL_ROOT_DIR=<span class="op">&lt;</span>path to openssl<span class="op">&gt;</span> -DGETTEXT_LIB_DIR=<span class="op">&lt;</span>path to gettext lib dir<span class="op">&gt;</span>
<span class="fu">make</span></code></pre></div>
<p>In the above command, replace: - <code>&lt;path to Casablanca&gt;</code> to point to your local installation of Casablanca. For example, if the file <code>libcpprest.so</code> exists at location <code>~/Github/Casablanca/cpprestsdk/Release/build.release/Binaries/libcpprest.dylib</code>, then <path to casablanca> should be <code>~/Github/Casablanca/cpprestsdk</code> - <code>&lt;path to openssl&gt;</code> to your local openssl, it is recommended not to use the version that comes with OSX, rather use one from Homebrew or the like. This should be the path that contains the <code>lib</code> and <code>include</code> directories - <code>&lt;path to gettext lib dir&gt;</code> is the directory which contains <code>libintl.dylib</code></p>
<p>For example you might use:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="va">CASABLANCA_DIR=</span>~/Github/Casablanca/cpprestsdk <span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DOPENSSL_ROOT_DIR=/usr/local/opt/openssl -DGETTEXT_LIB_DIR=/usr/local/opt/gettext/lib</code></pre></div>
<p>The library is generated under <code>azure-storage-cpp/Microsoft.WindowsAzure.Storage/build.release/Binaries/</code>.</p>
<p>To build and run unit tests: - Install UnitTest++ library:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">brew</span> install unittest-cpp</code></pre></div>
<ul>
<li><p>Build the test code:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">cmake</span> .. -DCMAKE_BUILD_TYPE=Release -DBUILD_TESTS=ON
<span class="fu">make</span></code></pre></div></li>
<li><p>Run unit tests</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> Binaries
<span class="ex">vi</span> test_configurations.json <span class="co"># modify test config file to include your storage account credentials</span>
<span class="ex">./azurestoragetest</span></code></pre></div></li>
</ul>
<h1 id="learn-more">Learn More</h1>
<ul>
<li><a href="documentation/Microsoft%20Azure%20Storage%20Client%20Library%20for%20C%2B%2B%202.0.0.md">Microsoft Azure Storage Client Library for C++ v2.0.0</a></li>
<li><a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2015/04/29/microsoft-azure-storage-client-library-for-c-v1-0-0-general-availability.aspx">Microsoft Azure Storage Client Library for C++ v1.0.0 (General Availability)</a></li>
</ul>
