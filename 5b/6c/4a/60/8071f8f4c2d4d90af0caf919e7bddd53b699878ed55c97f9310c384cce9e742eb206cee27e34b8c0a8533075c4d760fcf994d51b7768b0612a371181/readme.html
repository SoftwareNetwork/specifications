<h1 id="taskflow">Taskflow
<img align="right" width="10%" src="image/taskflow_logo.png"></h1>
<!--[![Linux Build Status](https://travis-ci.com/taskflow/taskflow.svg?branch=master)](https://travis-ci.com/taskflow/taskflow)-->
<p><a
href="https://github.com/taskflow/taskflow/actions?query=workflow%3AUbuntu"><img
src="https://github.com/taskflow/taskflow/workflows/Ubuntu/badge.svg"
alt="Ubuntu" /></a> <a
href="https://github.com/taskflow/taskflow/actions?query=workflow%3AmacOS"><img
src="https://github.com/taskflow/taskflow/workflows/macOS/badge.svg"
alt="macOS" /></a> <a
href="https://github.com/taskflow/taskflow/actions?query=workflow%3AWindows"><img
src="https://github.com/taskflow/taskflow/workflows/Windows/badge.svg"
alt="Windows" /></a> <a
href="https://taskflow.github.io/taskflow/index.html"><img
src="image/api-doc.svg" alt="Wiki" /></a> <a
href="https://taskflow.github.io/tfprof/"><img src="image/tfprof.svg"
alt="TFProf" /></a> <a
href="https://tsung-wei-huang.github.io/papers/tpds21-taskflow.pdf"><img
src="image/cite-tpds.svg" alt="Cite" /></a></p>
<p>Taskflow helps you quickly write parallel and heterogeneous task
programs in modern C++</p>
<h1 id="why-taskflow">Why Taskflow?</h1>
<p>Taskflow is faster, more expressive, and easier for drop-in
integration than many of existing task programming frameworks in
handling complex parallel workloads.</p>
<p><img src="image/performance.png" /></p>
<p>Taskflow lets you quickly implement task decomposition strategies
that incorporate both regular and irregular compute patterns, together
with an efficient <em>work-stealing</em> scheduler to optimize your
multithreaded performance.</p>
<table>
<colgroup>
<col style="width: 48%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
href="#start-your-first-taskflow-program">Static Tasking</a></th>
<th style="text-align: center;"><a
href="#create-a-subflow-graph">Subflow Tasking</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img
src="image/static_graph.svg" /></td>
<td
style="text-align: center;"><img align="right" src="image/dynamic_graph.svg" width="100%"></td>
</tr>
</tbody>
</table>
<p>Taskflow supports conditional tasking for you to make rapid
control-flow decisions across dependent tasks to implement cycles and
conditions that were otherwise difficult to do with existing tools.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"><a
href="#integrate-control-flow-to-a-task-graph">Conditional
Tasking</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="image/condition.svg" /></td>
</tr>
</tbody>
</table>
<p>Taskflow is composable. You can create large parallel graphs through
composition of modular and reusable blocks that are easier to optimize
at an individual scope.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"><a href="#compose-task-graphs">Taskflow
Composition</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="image/framework.svg" /></td>
</tr>
</tbody>
</table>
<p>Taskflow supports heterogeneous tasking for you to accelerate a wide
range of scientific computing applications by harnessing the power of
CPU-GPU collaborative computing.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"><a
href="#offload-a-task-to-a-gpu">Concurrent CPU-GPU Tasking</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="image/cudaflow.svg" /></td>
</tr>
</tbody>
</table>
<p>Taskflow provides visualization and tooling needed for profiling
Taskflow programs.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"><a
href="https://taskflow.github.io/tfprof">Taskflow Profiler</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="image/tfprof.png" /></td>
</tr>
</tbody>
</table>
<p>We are committed to support trustworthy developments for both
academic and industrial research projects in parallel computing. Check
out <a href="https://taskflow.github.io/#tag_users">Who is Using
Taskflow</a> and what our users say:</p>
<ul>
<li><em>“Taskflow is the cleanest Task API I’ve ever seen.” <a
href="http://coreliuminc.com">Damien Hocking <span class="citation"
data-cites="Corelium">@Corelium</span> Inc</a></em></li>
<li><em>“Taskflow has a very simple and elegant tasking interface. The
performance also scales very well.” <a
href="https://github.com/totalgee">Glen Fraser</a></em></li>
<li><em>“Taskflow lets me handle parallel processing in a smart way.” <a
href="https://cpp-learning.com/cpp-taskflow/">Hayabusa <span
class="citation" data-cites="Learning">@Learning</span></a></em></li>
<li><em>“Taskflow improves the throughput of our graph engine in just a
few hours of coding.” <a href="https://ossia.io/">Jean-Michaël <span
class="citation" data-cites="KDAB">@KDAB</span></a></em></li>
<li><em>“Best poster award for open-source parallel programming
library.” <a href="https://github.com/CppCon/CppCon2018">Cpp Conference
2018</a></em></li>
<li><em>“Second Prize of Open-source Software Competition.” <a
href="https://tsung-wei-huang.github.io/img/mm19-ossc-award.jpg">ACM
Multimedia Conference 2019</a></em></li>
</ul>
<p>See a quick poster presentation below and visit the <a
href="https://taskflow.github.io/taskflow/index.html">documentation</a>
to learn more about Taskflow. Technical details can be referred to our
<a
href="https://tsung-wei-huang.github.io/papers/tpds21-taskflow.pdf">IEEE
TPDS paper</a>.</p>
<p><img src="image/taskflow-poster.png" /></p>
<h1 id="start-your-first-taskflow-program">Start Your First Taskflow
Program</h1>
<p>The following program (<code>simple.cpp</code>) creates a taskflow of
four tasks <code>A</code>, <code>B</code>, <code>C</code>, and
<code>D</code>, where <code>A</code> runs before <code>B</code> and
<code>C</code>, and <code>D</code> runs after <code>B</code> and
<code>C</code>. When <code>A</code> finishes, <code>B</code> and
<code>C</code> can run in parallel. Try it live on <a
href="https://godbolt.org/z/j8hx3xnnx">Compiler Explorer
(godbolt)</a>!</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;taskflow/taskflow.hpp&gt;</span><span class="pp">  </span><span class="co">// Taskflow is header-only</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(){</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>Executor executor<span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>Taskflow taskflow<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">auto</span> <span class="op">[</span>A<span class="op">,</span> B<span class="op">,</span> C<span class="op">,</span> D<span class="op">]</span> <span class="op">=</span> taskflow<span class="op">.</span>emplace<span class="op">(</span>  <span class="co">// create four tasks</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">[]</span> <span class="op">()</span> <span class="op">{</span> <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;TaskA</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span> <span class="op">},</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">[]</span> <span class="op">()</span> <span class="op">{</span> <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;TaskB</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span> <span class="op">},</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">[]</span> <span class="op">()</span> <span class="op">{</span> <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;TaskC</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span> <span class="op">},</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">[]</span> <span class="op">()</span> <span class="op">{</span> <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;TaskD</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span> <span class="op">}</span> </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">);</span>                                  </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>                                      </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  A<span class="op">.</span>precede<span class="op">(</span>B<span class="op">,</span> C<span class="op">);</span>  <span class="co">// A runs before B and C</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  D<span class="op">.</span>succeed<span class="op">(</span>B<span class="op">,</span> C<span class="op">);</span>  <span class="co">// D runs after  B and C</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>                                      </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  executor<span class="op">.</span>run<span class="op">(</span>taskflow<span class="op">).</span>wait<span class="op">();</span> </span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Taskflow is <em>header-only</em> and there is no wrangle with
installation. To compile the program, clone the Taskflow project and
tell the compiler to include the <a href="./taskflow/">headers</a>.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">~$</span> git clone https://github.com/taskflow/taskflow.git  <span class="co"># clone it only once</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">~$</span> g++ <span class="at">-std</span><span class="op">=</span>c++20 examples/simple.cpp <span class="at">-I.</span> <span class="at">-O2</span> <span class="at">-pthread</span> <span class="at">-o</span> simple</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">~$</span> ./simple</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ex">TaskA</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ex">TaskC</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="ex">TaskB</span> </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="ex">TaskD</span></span></code></pre></div>
<h1 id="visualize-your-first-taskflow-program">Visualize Your First
Taskflow Program</h1>
<p>Taskflow comes with a built-in profiler, <a
href="https://taskflow.github.io/tfprof/">TFProf</a>, for you to profile
and visualize taskflow programs in an easy-to-use web-based
interface.</p>
<p><img src="doxygen/images/tfprof.png" /></p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run the program with the environment variable TF_ENABLE_PROFILER enabled</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">~$</span> TF_ENABLE_PROFILER=simple.json ./simple</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="ex">~$</span> cat simple.json</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">[</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="dt">{</span><span class="st">&quot;executor&quot;</span><span class="dt">:</span><span class="st">&quot;0&quot;</span><span class="op">,</span><span class="st">&quot;data&quot;</span><span class="dt">:[{</span><span class="st">&quot;worker&quot;</span><span class="dt">:0</span><span class="op">,</span><span class="st">&quot;level&quot;</span><span class="dt">:0</span><span class="op">,</span><span class="st">&quot;data&quot;</span><span class="dt">:[{</span><span class="st">&quot;span&quot;</span><span class="dt">:[172</span><span class="op">,</span><span class="dt">186]</span><span class="op">,</span><span class="st">&quot;name&quot;</span><span class="dt">:</span><span class="st">&quot;0_0&quot;</span><span class="op">,</span><span class="st">&quot;type&quot;</span><span class="dt">:</span><span class="st">&quot;static&quot;</span><span class="dt">}</span><span class="op">,</span><span class="dt">{</span><span class="st">&quot;span&quot;</span><span class="dt">:[187</span><span class="op">,</span><span class="dt">189]</span><span class="op">,</span><span class="st">&quot;name&quot;</span><span class="dt">:</span><span class="st">&quot;0_1&quot;</span><span class="op">,</span><span class="st">&quot;type&quot;</span><span class="dt">:</span><span class="st">&quot;static&quot;</span><span class="dt">}]}</span><span class="op">,</span><span class="dt">{</span><span class="st">&quot;worker&quot;</span><span class="dt">:2</span><span class="op">,</span><span class="st">&quot;level&quot;</span><span class="dt">:0</span><span class="op">,</span><span class="st">&quot;data&quot;</span><span class="dt">:[{</span><span class="st">&quot;span&quot;</span><span class="dt">:[93</span><span class="op">,</span><span class="dt">164]</span><span class="op">,</span><span class="st">&quot;name&quot;</span><span class="dt">:</span><span class="st">&quot;2_0&quot;</span><span class="op">,</span><span class="st">&quot;type&quot;</span><span class="dt">:</span><span class="st">&quot;static&quot;</span><span class="dt">}</span><span class="op">,</span><span class="dt">{</span><span class="st">&quot;span&quot;</span><span class="dt">:[170</span><span class="op">,</span><span class="dt">179]</span><span class="op">,</span><span class="st">&quot;name&quot;</span><span class="dt">:</span><span class="st">&quot;2_1&quot;</span><span class="op">,</span><span class="st">&quot;type&quot;</span><span class="dt">:</span><span class="st">&quot;static&quot;</span><span class="dt">}]}]}</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="bu">]</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># paste the profiling json data to https://taskflow.github.io/tfprof/</span></span></code></pre></div>
<p>In addition to execution diagram, you can dump the graph to a DOT
format and visualize it using a number of free <a
href="https://www.graphviz.org/">GraphViz</a> tools.</p>
<pre><code>// dump the taskflow graph to a DOT format through std::cout
taskflow.dump(std::cout); </code></pre>
<p align="center">
<img src="doxygen/images/simple.svg">
</p>
<h1 id="express-task-graph-parallelism">Express Task Graph
Parallelism</h1>
<p>Taskflow empowers users with both static and dynamic task graph
constructions to express end-to-end parallelism in a task graph that
embeds in-graph control flow.</p>
<ol type="1">
<li><a href="#create-a-subflow-graph">Create a Subflow Graph</a></li>
<li><a href="#integrate-control-flow-to-a-task-graph">Integrate Control
Flow to a Task Graph</a></li>
<li><a href="#offload-a-task-to-a-gpu">Offload a Task to a GPU</a></li>
<li><a href="#compose-task-graphs">Compose Task Graphs</a></li>
<li><a href="#launch-asynchronous-tasks">Launch Asynchronous
Tasks</a></li>
<li><a href="#execute-a-taskflow">Execute a Taskflow</a></li>
<li><a href="#leverage-standard-parallel-algorithms">Leverage Standard
Parallel Algorithms</a></li>
</ol>
<h2 id="create-a-subflow-graph">Create a Subflow Graph</h2>
<p>Taskflow supports <em>dynamic tasking</em> for you to create a
subflow graph from the execution of a task to perform dynamic
parallelism. The following program spawns a task dependency graph
parented at task <code>B</code>.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task A <span class="op">=</span> taskflow<span class="op">.</span>emplace<span class="op">([](){}).</span>name<span class="op">(</span><span class="st">&quot;A&quot;</span><span class="op">);</span>  </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task C <span class="op">=</span> taskflow<span class="op">.</span>emplace<span class="op">([](){}).</span>name<span class="op">(</span><span class="st">&quot;C&quot;</span><span class="op">);</span>  </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task D <span class="op">=</span> taskflow<span class="op">.</span>emplace<span class="op">([](){}).</span>name<span class="op">(</span><span class="st">&quot;D&quot;</span><span class="op">);</span>  </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task B <span class="op">=</span> taskflow<span class="op">.</span>emplace<span class="op">([]</span> <span class="op">(</span>tf<span class="op">::</span>Subflow<span class="op">&amp;</span> subflow<span class="op">)</span> <span class="op">{</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>Task B1 <span class="op">=</span> subflow<span class="op">.</span>emplace<span class="op">([](){}).</span>name<span class="op">(</span><span class="st">&quot;B1&quot;</span><span class="op">);</span>  </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>Task B2 <span class="op">=</span> subflow<span class="op">.</span>emplace<span class="op">([](){}).</span>name<span class="op">(</span><span class="st">&quot;B2&quot;</span><span class="op">);</span>  </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>Task B3 <span class="op">=</span> subflow<span class="op">.</span>emplace<span class="op">([](){}).</span>name<span class="op">(</span><span class="st">&quot;B3&quot;</span><span class="op">);</span>  </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  B3<span class="op">.</span>succeed<span class="op">(</span>B1<span class="op">,</span> B2<span class="op">);</span>  <span class="co">// B3 runs after B1 and B2</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="op">}).</span>name<span class="op">(</span><span class="st">&quot;B&quot;</span><span class="op">);</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>A<span class="op">.</span>precede<span class="op">(</span>B<span class="op">,</span> C<span class="op">);</span>  <span class="co">// A runs before B and C</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>D<span class="op">.</span>succeed<span class="op">(</span>B<span class="op">,</span> C<span class="op">);</span>  <span class="co">// D runs after  B and C</span></span></code></pre></div>
<p align="center">
<img src="doxygen/images/subflow_join.svg">
</p>
<h2 id="integrate-control-flow-to-a-task-graph">Integrate Control Flow
to a Task Graph</h2>
<p>Taskflow supports <em>conditional tasking</em> for you to make rapid
control-flow decisions across dependent tasks to implement cycles and
conditions in an <em>end-to-end</em> task graph.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task init <span class="op">=</span> taskflow<span class="op">.</span>emplace<span class="op">([](){}).</span>name<span class="op">(</span><span class="st">&quot;init&quot;</span><span class="op">);</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task stop <span class="op">=</span> taskflow<span class="op">.</span>emplace<span class="op">([](){}).</span>name<span class="op">(</span><span class="st">&quot;stop&quot;</span><span class="op">);</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">// creates a condition task that returns a random binary</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task cond <span class="op">=</span> taskflow<span class="op">.</span>emplace<span class="op">(</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">[](){</span> <span class="cf">return</span> <span class="bu">std::</span>rand<span class="op">()</span> <span class="op">%</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="op">).</span>name<span class="op">(</span><span class="st">&quot;cond&quot;</span><span class="op">);</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>init<span class="op">.</span>precede<span class="op">(</span>cond<span class="op">);</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">// creates a feedback loop {0: cond, 1: stop}</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>cond<span class="op">.</span>precede<span class="op">(</span>cond<span class="op">,</span> stop<span class="op">);</span></span></code></pre></div>
<p align="center">
<img src="doxygen/images/conditional-tasking-1.svg">
</p>
<h2 id="offload-a-task-to-a-gpu">Offload a Task to a GPU</h2>
<p>Taskflow supports GPU tasking for you to accelerate a wide range of
scientific computing applications by harnessing the power of CPU-GPU
collaborative computing using Nvidia CUDA Graph.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>__global__ <span class="dt">void</span> saxpy<span class="op">(</span><span class="dt">size_t</span> N<span class="op">,</span> <span class="dt">float</span> alpha<span class="op">,</span> <span class="dt">float</span><span class="op">*</span> dx<span class="op">,</span> <span class="dt">float</span><span class="op">*</span> dy<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> i <span class="op">=</span> blockIdx<span class="op">.</span>x<span class="op">*</span>blockDim<span class="op">.</span>x <span class="op">+</span> threadIdx<span class="op">.</span>x<span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">(</span>i <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    y<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> a<span class="op">*</span>x<span class="op">[</span>i<span class="op">]</span> <span class="op">+</span> y<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">// create a CUDA Graph task</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task cudaflow <span class="op">=</span> taskflow<span class="op">.</span>emplace<span class="op">([&amp;]()</span> <span class="op">{</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>cudaGraph cg<span class="op">;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>cudaTask h2d_x <span class="op">=</span> cg<span class="op">.</span>copy<span class="op">(</span>dx<span class="op">,</span> hx<span class="op">.</span>data<span class="op">(),</span> N<span class="op">);</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>cudaTask h2d_y <span class="op">=</span> cg<span class="op">.</span>copy<span class="op">(</span>dy<span class="op">,</span> hy<span class="op">.</span>data<span class="op">(),</span> N<span class="op">);</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>cudaTask d2h_x <span class="op">=</span> cg<span class="op">.</span>copy<span class="op">(</span>hx<span class="op">.</span>data<span class="op">(),</span> dx<span class="op">,</span> N<span class="op">);</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>cudaTask d2h_y <span class="op">=</span> cg<span class="op">.</span>copy<span class="op">(</span>hy<span class="op">.</span>data<span class="op">(),</span> dy<span class="op">,</span> N<span class="op">);</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>cudaTask saxpy <span class="op">=</span> cg<span class="op">.</span>kernel<span class="op">((</span>N<span class="op">+</span><span class="dv">255</span><span class="op">)/</span><span class="dv">256</span><span class="op">,</span> <span class="dv">256</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> saxpy<span class="op">,</span> N<span class="op">,</span> <span class="fl">2.0</span><span class="bu">f</span><span class="op">,</span> dx<span class="op">,</span> dy<span class="op">);</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  saxpy<span class="op">.</span>succeed<span class="op">(</span>h2d_x<span class="op">,</span> h2d_y<span class="op">)</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>       <span class="op">.</span>precede<span class="op">(</span>d2h_x<span class="op">,</span> d2h_y<span class="op">);</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">// instantiate an executable CUDA graph and run it through a stream</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>cudaGraphExec exec<span class="op">(</span>cg<span class="op">);</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>cudaStream stream<span class="op">;</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  stream<span class="op">.</span>run<span class="op">(</span>exec<span class="op">).</span>synchronize<span class="op">();</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="op">}).</span>name<span class="op">(</span><span class="st">&quot;CUDA Graph Task&quot;</span><span class="op">);</span></span></code></pre></div>
<p align="center">
<img src="doxygen/images/saxpy_1_cudaflow.svg">
</p>
<h2 id="compose-task-graphs">Compose Task Graphs</h2>
<p>Taskflow is composable. You can create large parallel graphs through
composition of modular and reusable blocks that are easier to optimize
at an individual scope.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Taskflow f1<span class="op">,</span> f2<span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">// create taskflow f1 of two tasks</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task f1A <span class="op">=</span> f1<span class="op">.</span>emplace<span class="op">([]()</span> <span class="op">{</span> <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Task f1A</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span> <span class="op">})</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                 <span class="op">.</span>name<span class="op">(</span><span class="st">&quot;f1A&quot;</span><span class="op">);</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task f1B <span class="op">=</span> f1<span class="op">.</span>emplace<span class="op">([]()</span> <span class="op">{</span> <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Task f1B</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span> <span class="op">})</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                 <span class="op">.</span>name<span class="op">(</span><span class="st">&quot;f1B&quot;</span><span class="op">);</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">// create taskflow f2 with one module task composed of f1</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task f2A <span class="op">=</span> f2<span class="op">.</span>emplace<span class="op">([]()</span> <span class="op">{</span> <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Task f2A</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span> <span class="op">})</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>                 <span class="op">.</span>name<span class="op">(</span><span class="st">&quot;f2A&quot;</span><span class="op">);</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task f2B <span class="op">=</span> f2<span class="op">.</span>emplace<span class="op">([]()</span> <span class="op">{</span> <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Task f2B</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span> <span class="op">})</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>                 <span class="op">.</span>name<span class="op">(</span><span class="st">&quot;f2B&quot;</span><span class="op">);</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task f2C <span class="op">=</span> f2<span class="op">.</span>emplace<span class="op">([]()</span> <span class="op">{</span> <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Task f2C</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span> <span class="op">})</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>                 <span class="op">.</span>name<span class="op">(</span><span class="st">&quot;f2C&quot;</span><span class="op">);</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task f1_module_task <span class="op">=</span> f2<span class="op">.</span>composed_of<span class="op">(</span>f1<span class="op">)</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>                            <span class="op">.</span>name<span class="op">(</span><span class="st">&quot;module&quot;</span><span class="op">);</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>f1_module_task<span class="op">.</span>succeed<span class="op">(</span>f2A<span class="op">,</span> f2B<span class="op">)</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span>precede<span class="op">(</span>f2C<span class="op">);</span></span></code></pre></div>
<p align="center">
<img src="doxygen/images/composition.svg">
</p>
<h2 id="launch-asynchronous-tasks">Launch Asynchronous Tasks</h2>
<p>Taskflow supports <em>asynchronous</em> tasking. You can launch tasks
asynchronously to dynamically explore task graph parallelism.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Executor executor<span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">// create asynchronous tasks directly from an executor</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>future<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> future <span class="op">=</span> executor<span class="op">.</span>async<span class="op">([](){</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;async task returns 1</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="op">});</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>executor<span class="op">.</span>silent_async<span class="op">([](){</span> <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;async task does not return</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span> <span class="op">});</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">// create asynchronous tasks with dynamic dependencies</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>AsyncTask A <span class="op">=</span> executor<span class="op">.</span>silent_dependent_async<span class="op">([](){</span> printf<span class="op">(</span><span class="st">&quot;A</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">});</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>AsyncTask B <span class="op">=</span> executor<span class="op">.</span>silent_dependent_async<span class="op">([](){</span> printf<span class="op">(</span><span class="st">&quot;B</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">},</span> A<span class="op">);</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>AsyncTask C <span class="op">=</span> executor<span class="op">.</span>silent_dependent_async<span class="op">([](){</span> printf<span class="op">(</span><span class="st">&quot;C</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">},</span> A<span class="op">);</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>AsyncTask D <span class="op">=</span> executor<span class="op">.</span>silent_dependent_async<span class="op">([](){</span> printf<span class="op">(</span><span class="st">&quot;D</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">},</span> B<span class="op">,</span> C<span class="op">);</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>executor<span class="op">.</span>wait_for_all<span class="op">();</span></span></code></pre></div>
<h2 id="execute-a-taskflow">Execute a Taskflow</h2>
<p>The executor provides several <em>thread-safe</em> methods to run a
taskflow. You can run a taskflow once, multiple times, or until a
stopping criteria is met. These methods are non-blocking with a
<code>tf::Future&lt;void&gt;</code> return to let you query the
execution status.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">// runs the taskflow once</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Future<span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> run_once <span class="op">=</span> executor<span class="op">.</span>run<span class="op">(</span>taskflow<span class="op">);</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">// wait on this run to finish</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>run_once<span class="op">.</span>get<span class="op">();</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">// run the taskflow four times</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>executor<span class="op">.</span>run_n<span class="op">(</span>taskflow<span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">// runs the taskflow five times</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>executor<span class="op">.</span>run_until<span class="op">(</span>taskflow<span class="op">,</span> <span class="op">[</span>counter<span class="op">=</span><span class="dv">5</span><span class="op">](){</span> <span class="cf">return</span> <span class="op">--</span>counter <span class="op">==</span> <span class="dv">0</span><span class="op">;</span> <span class="op">});</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">// block the executor until all submitted taskflows complete</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>executor<span class="op">.</span>wait_for_all<span class="op">();</span></span></code></pre></div>
<h2 id="leverage-standard-parallel-algorithms">Leverage Standard
Parallel Algorithms</h2>
<p>Taskflow defines algorithms for you to quickly express common
parallel patterns using standard C++ syntaxes, such as parallel
iterations, parallel reductions, and parallel sort.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task task1 <span class="op">=</span> taskflow<span class="op">.</span>for_each<span class="op">(</span> <span class="co">// assign each element to 100 in parallel</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  first<span class="op">,</span> last<span class="op">,</span> <span class="op">[]</span> <span class="op">(</span><span class="kw">auto</span><span class="op">&amp;</span> i<span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> <span class="dv">100</span><span class="op">;</span> <span class="op">}</span>    </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="op">);</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task task2 <span class="op">=</span> taskflow<span class="op">.</span>reduce<span class="op">(</span>   <span class="co">// reduce a range of items in parallel</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  first<span class="op">,</span> last<span class="op">,</span> init<span class="op">,</span> <span class="op">[]</span> <span class="op">(</span><span class="kw">auto</span> a<span class="op">,</span> <span class="kw">auto</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="op">);</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Task task3 <span class="op">=</span> taskflow<span class="op">.</span>sort<span class="op">(</span>     <span class="co">// sort a range of items in parallel</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  first<span class="op">,</span> last<span class="op">,</span> <span class="op">[]</span> <span class="op">(</span><span class="kw">auto</span> a<span class="op">,</span> <span class="kw">auto</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">&lt;</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="op">);</span></span></code></pre></div>
<p>Additionally, Taskflow provides composable graph building blocks for
you to efficiently implement common parallel algorithms, such as
parallel pipeline.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">// create a pipeline to propagate five tokens through three serial stages</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>tf<span class="op">::</span>Pipeline pl<span class="op">(</span>num_parallel_lines<span class="op">,</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>Pipe<span class="op">{</span>tf<span class="op">::</span>PipeType<span class="op">::</span>SERIAL<span class="op">,</span> <span class="op">[](</span>tf<span class="op">::</span>Pipeflow<span class="op">&amp;</span> pf<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">(</span>pf<span class="op">.</span>token<span class="op">()</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      pf<span class="op">.</span>stop<span class="op">();</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">}},</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>Pipe<span class="op">{</span>tf<span class="op">::</span>PipeType<span class="op">::</span>SERIAL<span class="op">,</span> <span class="op">[](</span>tf<span class="op">::</span>Pipeflow<span class="op">&amp;</span> pf<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;stage 2: input buffer[</span><span class="sc">%zu</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> pf<span class="op">.</span>line<span class="op">(),</span> buffer<span class="op">[</span>pf<span class="op">.</span>line<span class="op">()]);</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="op">}},</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  tf<span class="op">::</span>Pipe<span class="op">{</span>tf<span class="op">::</span>PipeType<span class="op">::</span>SERIAL<span class="op">,</span> <span class="op">[](</span>tf<span class="op">::</span>Pipeflow<span class="op">&amp;</span> pf<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;stage 3: input buffer[</span><span class="sc">%zu</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> pf<span class="op">.</span>line<span class="op">(),</span> buffer<span class="op">[</span>pf<span class="op">.</span>line<span class="op">()]);</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">}}</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="op">);</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>taskflow<span class="op">.</span>composed_of<span class="op">(</span>pl<span class="op">)</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>executor<span class="op">.</span>run<span class="op">(</span>taskflow<span class="op">).</span>wait<span class="op">();</span></span></code></pre></div>
<h1 id="supported-compilers">Supported Compilers</h1>
<p>To use Taskflow, you only need a compiler that supports C++17:</p>
<ul>
<li>GNU C++ Compiler at least v8.4 with -std=c++17</li>
<li>Clang C++ Compiler at least v6.0 with -std=c++17</li>
<li>Microsoft Visual Studio at least v19.14 with /std:c++17</li>
<li>AppleClang Xcode Version at least v12.0 with -std=c++17</li>
<li>Nvidia CUDA Toolkit and Compiler (nvcc) at least v11.1 with
-std=c++17</li>
<li>Intel C++ Compiler at least v19.0.1 with -std=c++17</li>
<li>Intel DPC++ Clang Compiler at least v13.0.0 with -std=c++17 and
SYCL20</li>
</ul>
<p>Taskflow works on Linux, Windows, and Mac OS X.</p>
<p>Although Taskflow supports primarily C++17, you can enable C++20
compilation through <code>-std=c++20</code> (or <code>/std:c++20</code>
for MSVC) to achieve better performance due to new C++20 features.</p>
<h1 id="learn-more-about-taskflow">Learn More about Taskflow</h1>
<p>Visit our <a href="https://taskflow.github.io/">project website</a>
and <a
href="https://taskflow.github.io/taskflow/index.html">documentation</a>
to learn more about Taskflow. To get involved:</p>
<ul>
<li>See <a
href="https://taskflow.github.io/taskflow/Releases.html">release
notes</a> to stay up-to-date with newest versions</li>
<li>Read the step-by-step tutorial at <a
href="https://taskflow.github.io/taskflow/pages.html">cookbook</a></li>
<li>Submit an issue at <a
href="https://github.com/taskflow/taskflow/issues">GitHub
issues</a></li>
<li>Find out our technical details at <a
href="https://taskflow.github.io/taskflow/References.html">references</a></li>
<li>Watch our technical talks at YouTube</li>
</ul>
<p><a href="https://www.youtube.com/watch?v=u4vaY0cjzos"><img
src="https://img.youtube.com/vi/u4vaY0cjzos/0.jpg"
alt="Taskflow Tutorials" /></a></p>
<p>We are committed to support trustworthy developments for both
academic and industrial research projects in parallel and heterogeneous
computing. If you are using Taskflow, please cite the following paper we
published at 2021 IEEE TPDS:</p>
<ul>
<li>Tsung-Wei Huang, Dian-Lun Lin, Chun-Xun Lin, and Yibo Lin, "<a
href="https://tsung-wei-huang.github.io/papers/tpds21-taskflow.pdf">Taskflow:
A Lightweight Parallel and Heterogeneous Task Graph Computing
System</a>," <i>IEEE Transactions on Parallel and Distributed Systems
(TPDS)</i>, vol. 33, no. 6, pp. 1303-1320, June 2022</li>
</ul>
<p>More importantly, we appreciate all Taskflow <a
href="https://taskflow.github.io/taskflow/contributors.html">contributors</a>
and the following organizations for sponsoring the Taskflow project!</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><!-- --></th>
<th style="text-align: center;"><!-- --></th>
<th style="text-align: center;"><!-- --></th>
<th style="text-align: center;"><!-- --></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td
style="text-align: center;"><img src="doxygen/images/utah-ece-logo.png"></td>
<td style="text-align: center;"><img src="doxygen/images/nsf.png"></td>
<td
style="text-align: center;"><img src="doxygen/images/darpa.png"></td>
<td
style="text-align: center;"><img src="doxygen/images/NumFocus.png"></td>
</tr>
<tr class="even">
<td
style="text-align: center;"><img src="doxygen/images/nvidia-logo.png"></td>
<td
style="text-align: center;"><img src="doxygen/images/uw-madison-ece-logo.png"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<p><a
href="https://ads.fund/token/0xadf8c696719c904923504683d3f3f7d18774ac06">Taskflow</a>
project is also supported by ADS.FUND.</p>
<h1 id="license">License</h1>
<p>Taskflow is licensed with the <a href="./LICENSE">MIT License</a>.
You are completely free to re-distribute your work derived from
Taskflow.</p>
<hr />
